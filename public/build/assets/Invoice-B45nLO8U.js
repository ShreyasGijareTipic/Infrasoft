import{r as d,u as Ve,b as Be,j as e,C as we}from"./index-BjGmA7Bo.js";/* empty css                */import{a as x,b as a,c as k}from"./index.esm-Dt7Qe3Av.js";import{a as $e,p as Pe}from"./api-CIBCEetx.js";import{P as He}from"./ProjectSelectionModal-CwgmrRvW.js";import{u as Ye,C as Ae,a as Ze,b as Xe,c as Je,d as Ke,e as De}from"./DefaultLayout-B3RBETEZ.js";import{C as es,a as ss}from"./CCardBody-C0Yq84MQ.js";import{C as ts}from"./CCardHeader-AnyY50zi.js";import{C as Te}from"./CForm-vzVfQCWh.js";import{C as i}from"./CFormLabel-B_oLSbD9.js";import{C as j}from"./CInputGroup-ByShXRUz.js";import{C as l}from"./CFormInput-DF8ie22K.js";import{C as b}from"./CInputGroupText-CzZZis2s.js";import{c as oe}from"./cil-x-0440B5Ce.js";import{c as rs}from"./cil-search-CDkY_4k-.js";import{c as ke}from"./cil-plus-D8mtC-W5.js";import{C as ns}from"./CFormSelect-CFPHA-xf.js";import{C as g}from"./CButton-CC7WAWlS.js";import{c as Ie}from"./cil-pencil-m516yCOw.js";import{C as os}from"./CFormTextarea-mg6q-B3W.js";import"./CTable-L_woAYa2.js";import"./RawMaterial-BtjEDAbB.js";import"./cil-mobile-D36DLDwv.js";import"./CFormControlWrapper-BkxhhPL_.js";const ks=({editMode:I=!1,initialData:c=null,onSubmit:ae=null})=>{const[Ge,Fe]=d.useState(!1),[G,ce]=d.useState(!1),[H,le]=d.useState(!0);d.useState();const me=Ve();Ye();const{showToast:_}=Be(),[Ee,de]=d.useState(!1),[Y,F]=d.useState([]),[p,z]=d.useState(""),[Q,C]=d.useState(!1),[Z,q]=d.useState([]),[ie,ue]=d.useState(!1),X=d.useRef(null),J=d.useRef(null),[n,M]=d.useState({projectId:null,projectName:"",customer_id:null,customer_name:"",address:"",mobile_number:"",customer:{name:"",address:"",mobile:""},invoiceType:1,invoiceDate:new Date().toISOString().split("T")[0],deliveryDate:new Date().toISOString().split("T")[0],discount:0,paidAmount:0,subtotal:0,taxableAmount:0,gstAmount:0,sgstAmount:0,cgstAmount:0,igstAmount:0,finalAmount:0,gstPercentage:18,sgstPercentage:9,cgstPercentage:9,igstPercentage:0,ref_id:"",po_number:"",gstOnGstMode:!1}),[v,V]=d.useState([{work_type:"",uom:"",qty:0,price:0,total_price:0,gst_percent:18,cgst_amount:0,sgst_amount:0,remark:""}]),[Le,R]=d.useState(!1),[S,he]=d.useState({customer_name:"",mobile_number:"",project_name:"",work_place:""}),xe=["25% Advance release on team mobilization onsite.","25% Release on completion of pile foundation.","20% Release after completion of MMS and Module mounting.","20% to be released on completion of AC/DC.","10% released after work has been completed and handed over to the client."],[O,B]=d.useState(xe),[qe,K]=d.useState(-1),[je,pe]=d.useState(""),[D,ge]=d.useState(""),be=["18% Tax Extra","ROW on your side","Work will commence only after receiving an official work order"],[W,$]=d.useState(be),[Me,ee]=d.useState(-1),[fe,ye]=d.useState(""),[se,_e]=d.useState(""),[Ce,ve]=d.useState(""),Re=()=>Math.max(0,n.finalAmount-n.paidAmount),U=d.useCallback(async(s="")=>{le(!0);try{const t=s?`/api/projects?searchQuery=${encodeURIComponent(s)}`:"/api/projects",r=await $e(t);console.log("Fetched projects (raw):",r);const o=Array.isArray(r)?r:r==null?void 0:r.data;if(!o||!Array.isArray(o)){console.log("Invalid API response - no data array"),F([]),s||_("warning","No projects data available from server");return}const u=o.map(m=>({id:m.id,project_name:m.project_name||"Unknown Project",customer_name:m.customer_name||"Unknown Customer",work_place:m.work_place||"",project_cost:m.project_cost||"0",mobile_number:m.mobile_number||"",gst_number:m.gst_number||"",remark:m.remark||"",customer_id:m.customer_id||m.id,customer:{name:m.customer_name||"Unknown",address:m.work_place||"N/A",mobile:m.mobile_number||"N/A"},start_date:m.start_date,end_date:m.end_date})).filter(m=>m.project_name&&m.customer_id);console.log("Transformed projects:",u),F(u),u.length===0&&!s&&_("warning","No valid projects found - check API data")}catch(t){console.error("Error fetching projects:",t),F([]),s||_("danger","Failed to fetch projects")}finally{le(!1)}},[]);d.useEffect(()=>{var s,t,r;I&&c&&(M({projectId:c.projectId,projectName:c.projectName,customer_id:c.customer_id,customer_name:((s=c.customer)==null?void 0:s.name)||"",address:((t=c.customer)==null?void 0:t.address)||"",mobile_number:((r=c.customer)==null?void 0:r.mobile)||"",customer:c.customer,invoiceType:c.invoiceType,invoiceDate:c.invoiceDate,deliveryDate:c.deliveryDate||new Date().toISOString().split("T")[0],discount:c.discount||0,paidAmount:c.paidAmount||0,subtotal:c.subtotal||0,taxableAmount:c.taxableAmount||0,gstAmount:c.gstAmount||0,sgstAmount:c.sgst||0,cgstAmount:c.cgst||0,igstAmount:c.igst||0,finalAmount:c.finalAmount||0,gstPercentage:c.gstPercentage||18,sgstPercentage:c.sgstPercentage||9,cgstPercentage:c.cgstPercentage||9,igstPercentage:c.igstPercentage||0,ref_id:c.ref_id,po_number:c.po_number||""}),V(c.items||[{work_type:"",uom:"",qty:0,price:0,total_price:0,remark:""}]),z(c.projectName||""),te(c.items||v),B(c.payment_terms?c.payment_terms.split(`
`):xe),$(c.terms_and_conditions?c.terms_and_conditions.split(`
`):be),ve(c.note||""))},[I,c]),d.useEffect(()=>{U()},[U]),d.useEffect(()=>{const s=setTimeout(()=>{p&&p.length>2&&!ie&&!n.projectId?U(p):(F([]),q([]),C(!1)),ue(!1)},300);return()=>clearTimeout(s)},[p,U,ie,n.projectId]),d.useEffect(()=>{if(p&&Y.length>0&&!n.projectId){const s=p.toLowerCase(),t=Y.filter(r=>r.project_name&&r.project_name.toLowerCase().includes(s)||r.customer_name&&r.customer_name.toLowerCase().includes(s)||r.work_place&&r.work_place.toLowerCase().includes(s)||r.mobile_number&&r.mobile_number.includes(s)||r.remark&&r.remark.toLowerCase().includes(s));console.log("Filtered projects:",t,"Query:",p),q(t),C(t.length>0&&p.length>2&&!n.projectId)}else q([]),C(!1)},[p,Y,n.projectId]),d.useEffect(()=>{const s=t=>{X.current&&!X.current.contains(t.target)&&J.current&&!J.current.contains(t.target)&&C(!1)};return Q&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[Q]);const Ne=s=>{console.log("Selected project:",s),M(t=>{var r,o,u,m;return{...t,projectId:s.id,projectName:s.project_name,customer_id:s.customer_id||s.id,customer_name:s.customer_name||((r=s.customer)==null?void 0:r.name)||"",address:s.work_place||s.location||"",mobile_number:s.mobile_number||((o=s.customer)==null?void 0:o.mobile)||"",customer:{name:s.customer_name||((u=s.customer)==null?void 0:u.name)||"",address:s.work_place||s.location||"",mobile:s.mobile_number||((m=s.customer)==null?void 0:m.mobile)||""}}}),z(s.project_name),ue(!0),C(!1),F([]),q([])},Oe=()=>{M(s=>({...s,projectId:null,projectName:"",customer_id:null,customer_name:"",address:"",mobile_number:"",customer:{name:"",address:"",mobile:""}})),z(""),C(!1),F([]),q([])},f=s=>{const{name:t,value:r}=s.target;M(o=>{let u={...o,[t]:t==="discount"||t==="paidAmount"||t.endsWith("Percentage")?parseFloat(r)||0:r};if(t==="gstPercentage"){const h=(parseFloat(r)||0)/2;u={...u,sgstPercentage:h,cgstPercentage:h}}else if(t==="sgstPercentage"||t==="cgstPercentage"){const m=t==="sgstPercentage"?parseFloat(r)||0:o.sgstPercentage,h=t==="cgstPercentage"?parseFloat(r)||0:o.cgstPercentage;u={...u,gstPercentage:m+h}}if(t==="discount"||t.endsWith("Percentage")){const m=v.reduce((Se,ne)=>Se+(ne.total_price||0),0),h=m-u.discount,y=h*(u.sgstPercentage/100),w=h*(u.cgstPercentage/100),P=h*(u.igstPercentage/100),A=y+w+P,re=h+A;u={...u,subtotal:m,taxableAmount:h,gstAmount:A,sgstAmount:y,cgstAmount:w,igstAmount:P,finalAmount:re}}return u})},E=(s,t,r)=>{const o=[...v];t==="qty"||t==="price"?o[s][t]=parseFloat(r)||0:t==="gst_percent"?o[s].gst_percent=r===""?0:parseFloat(r):o[s][t]=r;const u=o[s].qty||0,m=o[s].price||0,h=o[s].gst_percent||0,y=u*m,w=h/2,P=y*(w/100),A=y*(w/100);o[s].cgst_amount=P,o[s].sgst_amount=A,o[s].total_price=y+P+A,V(o),te(o)},We=()=>{V([...v,{work_type:"",uom:"",qty:0,price:0,total_price:0,gst_percent:18,cgst_amount:0,sgst_amount:0,remark:""}])},Ue=s=>{const t=[...v];t.splice(s,1),V(t),te(t)},te=s=>{M(t=>{const r=s.reduce((T,N)=>T+N.qty*N.price,0);s.reduce((T,N)=>T+(N.cgst_amount||0),0),s.reduce((T,N)=>T+(N.sgst_amount||0),0);const o=s.reduce((T,N)=>T+(N.total_price||0),0),u=o*(t.sgstPercentage/100),m=o*(t.cgstPercentage/100),h=o*(t.igstPercentage/100),y=u+m+h,w=y,P=u,A=m,re=h,ne=o+y-(t.discount||0);return{...t,subtotal:r,taxableAmount:o,gstAmount:w,cgstAmount:A,sgstAmount:P,igstAmount:re,finalAmount:ne}})},ze=async s=>{if(s.preventDefault(),!s.currentTarget.checkValidity()){Fe(!0);return}if(!n.projectId||!n.customer_id){_("danger","Please select a project with a valid customer");return}try{ce(!0);const r={...n,project_id:n.projectId,customer_name:n.customer_name,address:n.address,mobile_number:n.mobile_number,items:v.filter(o=>o.work_type&&o.qty>0),payment_terms:O.join(`
`),terms_and_conditions:W.join(`
`),note:Ce};if(console.log("Submitting data:",r),I&&ae)await ae(r);else{const o=await Pe("/api/order",r);o&&(_("success","Invoice created successfully"),me(`/invoice-details/${o.id}`))}}catch(r){console.error("Submit error:",r),_("danger","Failed to create invoice")}finally{ce(!1)}},L=s=>{const{name:t,value:r}=s.target;he(o=>({...o,[t]:r}))},Qe=async()=>{try{await Pe("/api/projects",S)&&(_("success","Project added successfully"),R(!1),he({customer_name:"",mobile_number:"",project_name:"",work_place:"",is_confirm:0}),U())}catch(s){console.error("Error adding project:",s),_("danger","Failed to add project")}};return e.jsxs(x,{children:[e.jsx(a,{xs:12,children:e.jsxs(es,{className:"mb-4",children:[e.jsx(ts,{children:e.jsx("strong",{children:I?"Edit Invoice":"Create Invoice"})}),e.jsx(ss,{children:e.jsxs(Te,{validated:Ge,onSubmit:ze,children:[e.jsxs(x,{className:"mb-3",children:[e.jsxs(a,{md:6,children:[e.jsx(i,{children:"Project Name *"}),e.jsxs("div",{ref:X,style:{position:"relative"},children:[e.jsxs(j,{children:[e.jsx(l,{type:"text",value:p,onChange:s=>{z(s.target.value),n.projectId?C(!1):C(s.target.value.length>2)},placeholder:"Search by project name, customer, location...",required:!0}),e.jsx(b,{className:"cursor-pointer",onClick:()=>{n.projectName||p?Oe():de(!0)},children:e.jsx(k,{icon:n.projectName||p?oe:rs})})]}),H&&Q&&p.length>2&&e.jsxs("div",{className:"dropdown-menu show p-2",children:[e.jsx(we,{size:"sm"})," Loading projects..."]}),Q&&Z.length>0&&!n.projectId&&e.jsxs("div",{ref:J,className:"dropdown-menu show",style:{maxHeight:"300px",overflowY:"auto"},children:[Z.map(s=>e.jsxs("div",{className:"dropdown-item cursor-pointer p-2 border-bottom",onClick:()=>Ne(s),onMouseEnter:t=>t.target.style.backgroundColor="#f8f9fa",onMouseLeave:t=>t.target.style.backgroundColor="white",children:[e.jsx("div",{className:"fw-medium text-primary",children:s.project_name}),e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Customer:"})," ",s.customer_name]}),s.work_place&&e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Location:"})," ",s.work_place]}),s.project_cost&&e.jsxs("div",{className:"small text-success",children:[e.jsx("strong",{children:"Amount:"})," ₹",s.project_cost]}),s.mobile_number&&e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Mobile:"})," ",s.mobile_number]})]},s.id)),!n.projectId&&e.jsxs("div",{className:"dropdown-item cursor-pointer p-2 border-top text-primary",onClick:()=>R(!0),children:[e.jsx(k,{icon:ke,className:"me-2"}),"Add New Project"]})]}),p.length>2&&Z.length===0&&!H&&!n.projectId&&e.jsx("div",{className:"dropdown-menu show",style:{maxHeight:"300px",overflowY:"auto"},children:e.jsxs("div",{className:"dropdown-item cursor-pointer p-2 border-top text-primary",onClick:()=>R(!0),children:[e.jsx(k,{icon:ke,className:"me-2"}),"Add New Project"]})})]}),n.projectName&&e.jsxs("div",{className:"mt-1 p-2 bg-light rounded border",children:[e.jsxs("div",{className:"small text-success",children:[e.jsx("strong",{children:"Selected:"})," ",n.projectName]}),e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Customer:"})," ",n.customer.name]}),n.customer.address&&e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Location:"})," ",n.customer.address]})]})]}),e.jsxs(a,{md:6,children:[e.jsx(i,{children:"Invoice Date *"}),e.jsx(l,{type:"date",name:"invoiceDate",value:n.invoiceDate,onChange:f,required:!0})]})]}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(a,{md:4,children:[e.jsx(i,{children:"Delivery Date *"}),e.jsx(l,{type:"date",name:"deliveryDate",value:n.deliveryDate,onChange:f,required:!0})]}),e.jsxs(a,{md:4,children:[e.jsx(i,{children:"Reference ID"}),e.jsx(l,{type:"text",name:"ref_id",value:n.ref_id,onChange:f,placeholder:"Enter Reference ID"})]}),e.jsxs(a,{md:4,children:[e.jsx(i,{children:"Po Number"}),e.jsx(l,{type:"text",name:"po_number",value:n.po_number,onChange:f,placeholder:"Enter PO Number"})]})]}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(a,{md:4,children:[e.jsx(i,{children:"Customer Name"}),e.jsx(l,{value:n.customer.name,readOnly:!0,placeholder:"Select a project to populate"})]}),e.jsxs(a,{md:4,children:[e.jsx(i,{children:"Work Location"}),e.jsx(l,{value:n.customer.address,readOnly:!0,placeholder:"Select a project to populate"})]}),e.jsxs(a,{md:4,children:[e.jsx(i,{children:"Customer Mobile"}),e.jsx(l,{value:n.customer.mobile,readOnly:!0,placeholder:"Select a project to populate"})]})]}),e.jsx(x,{className:"mb-3",children:e.jsxs(a,{md:6,children:[e.jsx(i,{children:"Invoice Type *"}),e.jsxs(ns,{name:"invoiceType",value:n.invoiceType,onChange:f,required:!0,children:[e.jsx("option",{value:1,children:"Quotation"}),e.jsx("option",{value:2,children:"Work Order"})]})]})}),e.jsx("h6",{className:"mt-4 mb-3 fw-semibold text-primary border-bottom border-primary pb-2",children:"Work Details"}),v.map((s,t)=>e.jsxs("div",{className:"border rounded p-3 mb-3 bg-light",children:[e.jsxs(x,{className:"g-3 mb-2 align-items-end",children:[e.jsx(a,{md:3,children:e.jsx(l,{label:"Work Type *",placeholder:"Work Type",value:s.work_type,onChange:r=>E(t,"work_type",r.target.value),required:!0})}),e.jsx(a,{md:2,children:e.jsx(l,{label:"Unit",placeholder:"UOM",value:s.uom,onChange:r=>E(t,"uom",r.target.value)})}),e.jsx(a,{md:2,children:e.jsx(l,{label:"Qty *",type:"number",step:"0.01",min:"0",value:s.qty,onChange:r=>E(t,"qty",r.target.value),required:!0})}),e.jsxs(a,{md:2,children:[e.jsx(i,{children:"Rate *"}),e.jsxs(j,{children:[e.jsx(b,{children:"₹"}),e.jsx(l,{type:"number",step:"0.01",min:"0",value:s.price,onChange:r=>E(t,"price",r.target.value),required:!0})]})]}),e.jsxs(a,{md:2,children:[e.jsx(i,{children:"Base Amount"}),e.jsxs("div",{className:"fw-medium",children:["₹",(s.qty*s.price).toFixed(2)]})]}),e.jsx(a,{md:1,className:"d-flex align-items-end",children:e.jsx(g,{color:"danger",size:"sm",onClick:()=>Ue(t),disabled:v.length===1,children:"×"})})]}),e.jsxs(x,{className:"g-3 align-items-end",children:[e.jsx(a,{md:2,children:e.jsx(l,{label:"GST %",type:"number",step:"0.01",min:"0",max:"100",value:s.gst_percent,onChange:r=>E(t,"gst_percent",r.target.value)})}),e.jsxs(a,{md:2,children:[e.jsx(i,{children:"CGST"}),e.jsxs("div",{className:"text-success fw-medium",children:["₹",s.cgst_amount.toFixed(2)]})]}),e.jsxs(a,{md:2,children:[e.jsx(i,{children:"SGST"}),e.jsxs("div",{className:"text-success fw-medium",children:["₹",s.sgst_amount.toFixed(2)]})]}),e.jsxs(a,{md:2,children:[e.jsx(i,{className:"text-primary",children:"Total (with GST)"}),e.jsxs("div",{className:"fw-bold text-primary",children:["₹",s.total_price.toFixed(2)]})]}),e.jsx(a,{md:4,children:e.jsx(l,{label:"Remark",placeholder:"Optional",value:s.remark,onChange:r=>E(t,"remark",r.target.value)})})]})]},t)),e.jsx(g,{color:"warning",variant:"outline",className:"mb-4",onClick:We,children:"+ Add Work"}),e.jsx("h6",{className:"mt-4 mb-3 fw-semibold text-primary border-bottom border-primary pb-2",children:"GST Details"}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(a,{md:3,children:[e.jsx(i,{children:"Total GST (%)"}),e.jsxs(j,{children:[e.jsx(l,{type:"number",name:"gstPercentage",value:n.gstPercentage,onChange:f,min:"0",max:"100",step:"0.01",disabled:G,placeholder:"18.00"}),e.jsx(b,{children:"%"})]}),e.jsx("div",{className:"form-text text-muted",children:e.jsxs("small",{children:["GST Amount: ₹",Number(n.gstAmount||0).toFixed(2)]})})]}),e.jsxs(a,{md:3,children:[e.jsx(i,{children:"SGST (%)"}),e.jsxs(j,{children:[e.jsx(l,{type:"number",name:"sgstPercentage",value:n.sgstPercentage,onChange:f,min:"0",max:"50",step:"0.01",disabled:G,placeholder:"9.00"}),e.jsx(b,{children:"%"})]}),e.jsx("div",{className:"form-text text-muted",children:e.jsxs("small",{children:["SGST Amount: ₹",Number(n.sgstAmount||0).toFixed(2)]})})]}),e.jsxs(a,{md:3,children:[e.jsx(i,{children:"CGST (%)"}),e.jsxs(j,{children:[e.jsx(l,{type:"number",name:"cgstPercentage",value:n.cgstPercentage,onChange:f,min:"0",max:"50",step:"0.01",disabled:G,placeholder:"9.00"}),e.jsx(b,{children:"%"})]}),e.jsx("div",{className:"form-text text-muted",children:e.jsxs("small",{children:["CGST Amount: ₹",Number(n.cgstAmount||0).toFixed(2)]})})]}),e.jsxs(a,{md:3,children:[e.jsx(i,{children:"IGST (%)"}),e.jsxs(j,{children:[e.jsx(l,{type:"number",name:"igstPercentage",value:n.igstPercentage,onChange:f,min:"0",max:"100",step:"0.01",disabled:G,placeholder:"0.00"}),e.jsx(b,{children:"%"})]}),e.jsx("div",{className:"form-text text-muted",children:e.jsxs("small",{children:["IGST Amount: ₹",Number(n.igstAmount||0).toFixed(2)]})})]})]}),e.jsx("div",{className:"alert alert-info border-0 bg-info-subtle mb-3",children:e.jsx("div",{className:"d-flex",children:e.jsxs("div",{children:[e.jsx("strong",{className:"text-info",children:"Auto-Calculation:"}),e.jsxs("ul",{className:"mb-0 mt-1 text-info",children:[e.jsx("li",{children:e.jsx("small",{children:"Enter total GST % to auto-split into CGST and SGST"})}),e.jsx("li",{children:e.jsx("small",{children:"Modify CGST or SGST to auto-update total GST %"})})]})]})})}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(a,{md:4,children:[e.jsx(i,{children:"Subtotal"}),e.jsxs(j,{children:[e.jsx(b,{children:"₹"}),e.jsx(l,{type:"number",value:Number(n.subtotal||0).toFixed(2),readOnly:!0})]})]}),e.jsxs(a,{md:4,children:[e.jsx(i,{children:"Taxable Amount"}),e.jsxs(j,{children:[e.jsx(b,{children:"₹"}),e.jsx(l,{type:"number",value:Number(n.taxableAmount||0).toFixed(2),readOnly:!0})]})]}),e.jsxs(a,{md:4,children:[e.jsx(i,{children:"GST Amount"}),e.jsxs(j,{children:[e.jsx(b,{children:"₹"}),e.jsx(l,{type:"number",value:Number(n.gstAmount||0).toFixed(2),readOnly:!0})]})]})]}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(a,{md:6,children:[e.jsx(i,{children:"Final Amount"}),e.jsxs(j,{children:[e.jsx(b,{children:"₹"}),e.jsx(l,{type:"number",value:Number(n.finalAmount||0).toFixed(2),readOnly:!0})]})]}),e.jsxs(a,{md:6,children:[e.jsx(i,{children:"Remaining Amount"}),e.jsxs(j,{children:[e.jsx(b,{children:"₹"}),e.jsx(l,{type:"number",value:Number(Re()||0).toFixed(2),readOnly:!0,className:"text-danger fw-medium"})]})]})]}),e.jsx("h6",{className:"mt-4 mb-3 fw-semibold text-primary border-bottom border-primary pb-2",children:"Payment Terms"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:O.map((s,t)=>qe===t?e.jsxs(j,{style:{width:"auto"},children:[e.jsx(l,{value:je,onChange:r=>pe(r.target.value)}),e.jsx(g,{color:"success",onClick:()=>{const r=[...O];r[t]=je,B(r),K(-1)},children:"Save"}),e.jsx(g,{color:"secondary",onClick:()=>K(-1),children:"Cancel"})]},t):e.jsxs(Ae,{color:"info",className:"me-1 mb-1",style:{fontSize:"0.9em"},children:[s,e.jsx(k,{icon:Ie,className:"ms-2",style:{cursor:"pointer"},onClick:()=>{K(t),pe(s)}}),e.jsx(k,{icon:oe,className:"ms-1",style:{cursor:"pointer"},onClick:()=>{B(O.filter((r,o)=>o!==t))}})]},t))}),e.jsx(x,{className:"mb-3",children:e.jsx(a,{md:6,children:e.jsxs(j,{children:[e.jsx(l,{placeholder:"Add new payment term...",value:D,onChange:s=>ge(s.target.value)}),e.jsx(g,{color:"primary",onClick:()=>{D.trim()&&(B([...O,D.trim()]),ge(""))},children:"Add"})]})})}),e.jsx("h6",{className:"mt-4 mb-3 fw-semibold text-primary border-bottom border-primary pb-2",children:"Terms & Conditions"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:W.map((s,t)=>Me===t?e.jsxs(j,{style:{width:"auto"},children:[e.jsx(l,{value:fe,onChange:r=>ye(r.target.value)}),e.jsx(g,{color:"success",onClick:()=>{const r=[...W];r[t]=fe,$(r),ee(-1)},children:"Save"}),e.jsx(g,{color:"secondary",onClick:()=>ee(-1),children:"Cancel"})]},t):e.jsxs(Ae,{color:"warning",className:"me-1 mb-1",style:{fontSize:"0.9em"},children:[s,e.jsx(k,{icon:Ie,className:"ms-2",style:{cursor:"pointer"},onClick:()=>{ee(t),ye(s)}}),e.jsx(k,{icon:oe,className:"ms-1",style:{cursor:"pointer"},onClick:()=>{$(W.filter((r,o)=>o!==t))}})]},t))}),e.jsx(x,{className:"mb-3",children:e.jsx(a,{md:6,children:e.jsxs(j,{children:[e.jsx(l,{placeholder:"Add new condition...",value:se,onChange:s=>_e(s.target.value)}),e.jsx(g,{color:"primary",onClick:()=>{se.trim()&&($([...W,se.trim()]),_e(""))},children:"Add"})]})})}),e.jsx("h6",{className:"mt-4 mb-2 fw-semibold text-primary border-bottom border-primary pb-2",children:"Additional Note"}),e.jsx(os,{type:"text",className:"mb-3",placeholder:"Enter note if any...",value:Ce,onChange:s=>ve(s.target.value)}),e.jsx(g,{color:"primary",type:"submit",disabled:G||!n.projectId||!n.customer_id||H,children:G?e.jsx(we,{size:"sm"}):I?"Update Invoice":"Submit Invoice"}),"  ",I&&e.jsx(g,{color:"secondary",type:"button",onClick:()=>me("/invoiceTable"),children:"Close"})]})})]})}),e.jsxs(Ze,{visible:Le,onClose:()=>R(!1),children:[e.jsx(Xe,{children:e.jsx(Je,{children:"Add New Project"})}),e.jsx(Ke,{children:e.jsxs(Te,{children:[e.jsxs(x,{className:"mb-3",children:[e.jsxs(a,{md:6,children:[e.jsx(i,{children:"Customer Name *"}),e.jsx(l,{type:"text",name:"customer_name",value:S.customer_name,onChange:L,required:!0,maxLength:255})]}),e.jsxs(a,{md:6,children:[e.jsx(i,{children:"Mobile Number *"}),e.jsx(l,{type:"text",name:"mobile_number",value:S.mobile_number,onChange:L,required:!0,maxLength:10,minLength:10,pattern:"^[0-9]{10}$",placeholder:"Enter 10-digit mobile number"})]})]}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(a,{md:6,children:[e.jsx(i,{children:"Project Name *"}),e.jsx(l,{type:"text",name:"project_name",value:S.project_name,onChange:L,required:!0,maxLength:255})]}),e.jsxs(a,{md:6,children:[e.jsx(i,{children:"Work Place"}),e.jsx(l,{type:"text",name:"work_place",value:S.work_place,onChange:L,maxLength:255})]})]}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(a,{md:6,children:[e.jsx(i,{children:"GST number"}),e.jsx(l,{type:"text",name:"gst_number",value:S.gst_number,onChange:s=>{const t=s.target.value.toUpperCase();/^[A-Z0-9]{0,15}$/.test(t)&&L({target:{name:"gst_number",value:t}})},required:!0,maxLength:15,minLength:15,placeholder:"Enter GST number (15 chars)"})]}),e.jsxs(a,{md:6,children:[e.jsx(i,{children:"Pan Card number"}),e.jsx(l,{type:"text",name:"pan_number",value:S.pan_number,onChange:s=>{const t=s.target.value.toUpperCase();/^[A-Z0-9]{0,10}$/.test(t)&&L({target:{name:"pan_number",value:t}})},required:!0,maxLength:10,minLength:10,placeholder:"Enter PAN number (10 chars)"})]})]})]})}),e.jsxs(De,{children:[e.jsx(g,{color:"secondary",onClick:()=>R(!1),children:"Close"}),e.jsx(g,{color:"primary",onClick:Qe,children:"Save"})]})]}),e.jsx(He,{visible:Ee,onClose:()=>de(!1),onSelectProject:Ne})]})};export{ks as default};
