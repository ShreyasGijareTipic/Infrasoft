import{b as C,r as h,j as e}from"./index-2HJ-j-Kr.js";import{p as N}from"./api-CIBCEetx.js";import{a as v,b as f}from"./index.esm-DegARfP0.js";import{C as P,a as g}from"./CCardBody-B36NFFEm.js";import{C as y}from"./CCardHeader-Cm87llrc.js";import{C as w}from"./CForm-DYbbRBNz.js";import{C as o}from"./CFormLabel-DMp8BC0Y.js";import{C as n}from"./CFormInput-DYM7ipjm.js";import{C as q}from"./CFormCheck-Dys85onz.js";import{C as u}from"./CButton-ChW-yoOE.js";import"./CFormControlWrapper-BOjiYF1h.js";const Q=()=>{const{showToast:d}=C(),[x,p]=h.useState(!1),[r,l]=h.useState({name:"",localName:"",slug:"",categoryId:0,incStep:1,desc:"",multiSize:!1,show:!0,returnable:!0,showOnHome:!0,unit:"",qty:"",oPrice:"",bPrice:"",media:[],sizes:[]}),i=s=>{const{name:c,value:a}=s.target;c==="name"?l(t=>({...t,name:a,localName:x?t.localName:a})):c==="localName"?(p(!0),l({...r,localName:a})):l({...r,[c]:a})},b=s=>{const{name:c,checked:a}=s.target;l({...r,[c]:a})},j=async s=>{s.preventDefault();const c=s.target;if(!c.checkValidity()){c.classList.add("was-validated");return}let a={...r,sizes:[]};a.slug=a.name.replace(/[^\w]/g,"_"),r.multiSize||(a.sizes.push({name:a.name,localName:a.localName,qty:a.qty,oPrice:a.oPrice,bPrice:a.bPrice,dPrice:a.oPrice,stock:a.qty,show:!0,returnable:a.returnable}),delete a.oPrice,delete a.bPrice,delete a.qty);try{await N("/api/product",a)?(d("success","Product added successfully"),m()):d("danger","Error occured, please try again later.")}catch(t){d("danger","Error occured "+t)}},m=()=>{l({name:"",localName:"",slug:"",categoryId:0,incStep:1,desc:"",multiSize:!1,show:!0,returnable:!0,showOnHome:!0,qty:0,oPrice:0,bPrice:0,media:[],sizes:[]})};return e.jsx(v,{children:e.jsx(f,{xs:12,children:e.jsxs(P,{className:"mb-4",children:[e.jsx(y,{children:e.jsx("strong",{children:"Create New Product"})}),e.jsx(g,{children:e.jsxs(w,{className:"needs-validation",noValidate:!0,onSubmit:j,children:[e.jsxs("div",{className:"row mb-2",children:[e.jsxs("div",{className:"col-6",children:[e.jsx(o,{htmlFor:"pname",children:e.jsx("b",{children:"Product Name"})}),e.jsx(n,{type:"text",id:"pname",placeholder:"Product Name",name:"name",value:r.name,onChange:i,required:!0,feedbackInvalid:"Please provide name.",feedbackValid:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:"Product name is required"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx(o,{htmlFor:"plname",children:e.jsx("b",{children:"Local Name"})}),e.jsx(n,{type:"text",id:"plname",placeholder:"Local Name",name:"localName",value:r.localName,onChange:i}),e.jsx("div",{className:"invalid-feedback",children:"Local name is required"})]})]}),e.jsxs("div",{className:"row mb-2",children:[e.jsxs("div",{className:"col-4",children:[e.jsx(o,{htmlFor:"qty",children:e.jsx("b",{children:"Product Qty."})}),e.jsx(n,{type:"number",id:"qty",placeholder:"0",min:"1",name:"qty",value:r.qty,onChange:i,required:!0}),e.jsx("div",{className:"invalid-feedback",children:"Quantity must be greater than 0"})]}),e.jsxs("div",{className:"col-4",children:[e.jsx(o,{htmlFor:"bPrice",children:e.jsx("b",{children:"Base Price"})}),e.jsx(n,{type:"number",id:"bPrice",placeholder:"0",min:"1",name:"bPrice",value:r.bPrice,onChange:i,required:!0}),e.jsx("div",{className:"invalid-feedback",children:"Base price must be greater than 0"})]}),e.jsxs("div",{className:"col-4",children:[e.jsx(o,{htmlFor:"oPrice",children:e.jsx("b",{children:"Selling Price"})}),e.jsx(n,{type:"number",id:"oPrice",placeholder:"0",min:"1",name:"oPrice",onFocus:()=>l(s=>({...s,price:""})),value:r.oPrice,onChange:i,required:!0}),e.jsx("div",{className:"invalid-feedback",children:"Selling price must be greater than 0"})]})]}),e.jsx("div",{className:"row mb-2",children:e.jsx("div",{className:"col-6",children:e.jsx(q,{id:"show",label:"Show for invoicing",name:"show",checked:r.show,onChange:b})})}),e.jsxs("div",{className:"mb-3",children:[e.jsx(u,{color:"success",type:"submit",children:"Submit"}),"Â ",e.jsx(u,{color:"secondary",onClick:m,children:"Clear"})]})]})})]})})})};export{Q as default};
