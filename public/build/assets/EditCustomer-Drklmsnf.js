import{d as g,b as N,u as k,r as l,j as e}from"./index-BjGmA7Bo.js";import{g as w,a as p,b as _}from"./api-CIBCEetx.js";import{a as E,b as F}from"./index.esm-Dt7Qe3Av.js";import{C as S,a as L}from"./CCardBody-C0Yq84MQ.js";import{C as q}from"./CCardHeader-AnyY50zi.js";import{C as I}from"./CForm-vzVfQCWh.js";import{C as n}from"./CFormLabel-B_oLSbD9.js";import{C as h}from"./CFormInput-DF8ie22K.js";import{C as P}from"./CFormSelect-CFPHA-xf.js";import{C as D}from"./CFormTextarea-mg6q-B3W.js";import{C as b}from"./CButton-CC7WAWlS.js";import"./CFormControlWrapper-BkxhhPL_.js";const O=()=>{const C=g(),{showToast:t}=N(),x=k(),[r,c]=l.useState({name:"",mobile:"",discount:0,company_id:0,show:!0}),m=w(),[j,u]=l.useState([]);l.useEffect(()=>{try{y(),p("/api/company").then(a=>{if(a){const o=a.map(s=>({label:s.company_name,value:s.company_id}));m.type===0?u(o):u(o.filter(s=>s.value===m.company_id))}})}catch(a){t("danger","Error occured "+a)}},[]);const y=async()=>{try{const a=await p("/api/customer/"+C.id);c({id:a.id,name:a.name,mobile:a.mobile,discount:a.discount,company_id:a.company_id,show:a.show,address:a.address})}catch(a){t("danger","Error occured "+a)}},d=a=>{const{name:o,value:s}=a.target;c({...r,[o]:s})},f=async a=>{a.preventDefault();const o=a.target;if(!o.checkValidity()){o.classList.add("was-validated");return}let s={...r};try{const i=await _("/api/customer/"+s.id,s);i!=null&&i.id?(t("success","Customer updated successfully"),x("/customer/all")):t("danger","Error occured, please try again later.")}catch(i){t("danger","Error occured "+i)}},v=()=>{c({name:"",mobile:"",discount:0,company_id:r.company_id,show:!0})};return e.jsx(E,{children:e.jsx(F,{xs:12,children:e.jsxs(S,{className:"mb-4",children:[e.jsx(q,{children:e.jsx("strong",{children:e.jsx("b",{children:"Edit Customer Details"})})}),e.jsx(L,{children:e.jsxs(I,{className:"needs-validation",noValidate:!0,onSubmit:f,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(n,{htmlFor:"pname",children:e.jsx("b",{children:"Customer Name"})}),e.jsx(h,{type:"text",id:"pname",placeholder:"Customer Name",name:"name",value:r.name,onChange:d,required:!0,feedbackInvalid:"Please provide name.",feedbackValid:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:"Name is required"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(n,{htmlFor:"plmobile",children:e.jsx("b",{children:"Mobile Number"})}),e.jsx(h,{type:"text",id:"plmobile",placeholder:"Mobile Number",name:"mobile",value:r.mobile,onChange:d,required:!0,feedbackInvalid:"Please provide mobile number.",feedbackValid:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:"Mobile number is required"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(n,{htmlFor:"categoryId",children:e.jsx("b",{children:"Company "})}),e.jsx(P,{"aria-label":"Select Category",name:"company_id",value:r.company_id,options:j,onChange:d,required:!0}),e.jsx("div",{className:"invalid-feedback",children:"Please select a company"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(n,{htmlFor:"address",children:e.jsx("b",{children:"Address"})}),e.jsx(D,{id:"address",rows:2,name:"address",value:r.address,onChange:d})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(b,{color:"success",type:"submit",children:"Submit"}),"Â ",e.jsx(b,{color:"secondary",onClick:v,children:"Clear"})]})]})})]})})})};export{O as default};
