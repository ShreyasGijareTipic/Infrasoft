import{r as t,j as e}from"./index-DQ9cqY-w.js";import{a as m,d as x,b as j}from"./api-CIBCEetx.js";import{a as C,b as f}from"./index.esm-t1uhsutJ.js";import{C as b,a as y}from"./CCardBody-nJ-qIk-T.js";import{C as w}from"./CCardHeader-Dxk59cNM.js";import{C as U,a as u,b as n,c as l,d as g,e as c}from"./CTable-Bg7ZIw-y.js";import{C as k}from"./CFormSwitch-CnzVrgYG.js";import{C as A}from"./CButton-Cv8rOKs_.js";import"./CFormLabel-C-r2uEyX.js";function F(){const[d,i]=t.useState([]);t.useEffect(()=>{(async()=>{try{const r=await m("/api/appUsers");i(r.data)}catch(r){console.error("Error fetching users:",r)}})()},[]);const p=async s=>{if(window.confirm("Are you sure you want to delete this user?"))try{await x(`/api/appUsers/delete/${s}`),i(o=>o.filter(a=>a.id!==s))}catch(o){console.error("Error deleting user:",o),alert("Failed to delete user.")}},h=async s=>{if(s.type!==2){alert("Only users of type 2 (normal users) can be blocked/unblocked.");return}const r={...s,blocked:s.blocked===1?0:1};try{await j("/api/appUsers",r),i(o=>o.map(a=>a.id===s.id?r:a))}catch(o){console.error("Error updating user:",o)}};return e.jsx(C,{children:e.jsx(f,{xs:12,children:e.jsxs(b,{className:"mb-4",children:[e.jsx(w,{children:e.jsx("strong",{children:"All Users"})}),e.jsx(y,{children:e.jsx("div",{className:"table-responsive",children:e.jsxs(U,{children:[e.jsx(u,{children:e.jsxs(n,{children:[e.jsx(l,{scope:"col",children:"Id"}),e.jsx(l,{scope:"col",children:"Name"}),e.jsx(l,{scope:"col",children:"Email"}),e.jsx(l,{scope:"col",children:"Mobile"}),e.jsx(l,{scope:"col",children:"Type"}),e.jsx(l,{scope:"col",children:"Blocked"}),e.jsx(l,{scope:"col",children:"Actions"})]})}),e.jsx(g,{children:d.map((s,r)=>e.jsxs(n,{children:[e.jsx(l,{scope:"row",children:r+1}),e.jsx(c,{children:s.name}),e.jsx(c,{children:s.email}),e.jsx(c,{children:s.mobile}),e.jsxs(c,{children:[" ",s.type===1?"Admin":"User"]}),e.jsx(c,{children:e.jsx(k,{id:`formSwitchCheckDefault${s.id}`,checked:s.blocked===1,onChange:()=>h(s),disabled:s.type!==2})}),e.jsx(c,{children:e.jsx(A,{color:"danger",size:"sm",onClick:()=>p(s.id),children:"Delete"})})]},s.id))})]})})})]})})})}export{F as default};
