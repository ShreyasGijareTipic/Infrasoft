import{r as f,_ as sa,R as J,g as ra,f as na,P as k,m as oa,j as e,b as la}from"./index-ZbBnGUwW.js";import{a as O,b as L}from"./index.esm-CjRd7TO4.js";import{C as ia}from"./index.esm-dL-t0ktw.js";import{e as Fe,g as ca,a as te,p as z,j as da,c as ma}from"./api-CIBCEetx.js";import{u as Be,a as Ce,b as ke,c as Le,d as Ee,e as Ae}from"./DefaultLayout-BIkduJaW.js";import{C as Me,a as De}from"./CCardBody-D3Xtntes.js";import{g as ua}from"./companyPdf-CC94TBF-.js";import{C as se}from"./cil-mobile-Da8wudM0.js";import{C as ue}from"./CForm-CFb5zsUZ.js";import{C}from"./CFormLabel-CK5sZng0.js";import{C as U}from"./CFormSelect-Bt6dv3W8.js";import{C as $}from"./CFormInput-BlwHhfPK.js";import{C as B}from"./CButton-B_ZQUDVk.js";import{C as pa}from"./CFormCheck-CEplw_jQ.js";import"./RawMaterial-BtjEDAbB.js";import"./jspdf.es.min-DDsFKdTF.js";import"./typeof-QjJsDpFa.js";import"./jspdf.plugin.autotable-A3NMwdKN.js";import"./jspdf.es.min-DKK3G4D9.js";import"./TipicConsultech-B6_BeNSe.js";import"./CFormControlWrapper-B0Dgyxun.js";var H=f.forwardRef(function(j,b){var y,E=j.action,A=j.chart,S=j.className,M=j.color,R=j.title,n=j.value,c=sa(j,["action","chart","className","color","title","value"]);return J.createElement(Me,ra({className:na((y={},y["bg-".concat(M)]=M,y["text-white"]=M,y),S)},c,{ref:b}),J.createElement(De,{className:"pb-0 d-flex justify-content-between align-items-start"},J.createElement("div",null,n&&J.createElement("div",{className:"fs-4 fw-semibold"},n),R&&J.createElement("div",null,R)),E),A)});H.propTypes={action:k.node,chart:k.oneOfType([k.string,k.node]),className:k.string,color:oa,title:k.oneOfType([k.string,k.node]),value:k.oneOfType([k.string,k.node,k.number])};H.displayName="CWidgetStatsA";var g=function(j,b){if(!(typeof window>"u")&&!(typeof document>"u")){var y=document.body;return window.getComputedStyle(y,null).getPropertyValue(j).replace(/^\s/,"")}};const qe=j=>{const b=Fe(),{t:y}=Be("global"),E=f.useRef(null),A=f.useRef(null),[S,M]=f.useState({currentSales:0,currentExpense:0,currentPandL:0,currentMonth:""}),n=new Date().getMonth(),c=(w,d=0)=>w==null||isNaN(w)?"0 â‚¹":`${Math.round(Number(w))} â‚¹`;function re(){let w=[],d=[],Z=[];w=j.reportMonth.monthlySales,d=j.reportMonth.monthlyExpense,Z=j.reportMonth.monthlyPandL;let he=w.length;if(n>=0&&n<he){const ne=w[n],h=d[n],D=Z[n],K=["January","February","March","April","May","June","July","August","September","October","November","December"][n];return M(W=>({...W,currentSales:ne,currentExpense:h,currentPandL:D,currentMonth:K})),D}else console.log("Index is out of bounds.")}f.useEffect(()=>{re()},[j.reportMonth]),f.useEffect(()=>{document.documentElement.addEventListener("ColorSchemeChange",()=>{E.current&&setTimeout(()=>{E.current.data.datasets[0].pointBackgroundColor=g("--cui-primary"),E.current.update()}),A.current&&setTimeout(()=>{A.current.data.datasets[0].pointBackgroundColor=g("--cui-info"),A.current.update()})})},[E,A]);const Q=w=>w===0?c(Math.abs(w)):`${c(Math.abs(w))} (${w>0,"Balance"})`,pe=w=>w===0?"info":w>0?"success":"danger";return e.jsx(e.Fragment,{children:(b===0||b===1)&&e.jsxs(O,{className:j.className,xs:{gutter:4},children:[e.jsx(L,{sm:4,xl:4,xxl:4,className:"vh-[40%]",children:e.jsx(H,{className:"pb-3",color:pe(S.currentPandL),value:e.jsx(e.Fragment,{children:e.jsxs("div",{"d-flex":!0,children:[e.jsx("span",{className:"fs-4",style:{color:"white"},children:Q(S.currentPandL)}),e.jsxs("span",{className:"fs-6 fw-normal",style:{color:"white"},children:["Â ",y("LABELS.in")," ",S.currentMonth]})]})}),title:e.jsx("span",{style:{color:"white"},children:"Cash in Hands"})})}),e.jsx(L,{sm:4,xl:4,xxl:4,children:e.jsx(H,{className:"pb-3",style:{backgroundColor:"#7BAE4F"},value:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"fs-4",style:{color:"white"},children:c(S.currentSales)}),e.jsxs("span",{className:"fs-6 fw-normal",style:{color:"white"},children:["Â ",y("LABELS.in")," ",S.currentMonth]})]}),title:e.jsx("span",{style:{color:"white"},children:"Income"})})}),e.jsx(L,{sm:4,xl:4,xxl:4,children:e.jsx(H,{className:"pb-3",style:{backgroundColor:"#D09683"},value:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"fs-4",style:{color:"white"},children:c(S.currentExpense)}),e.jsxs("span",{className:"fs-6 fw-normal",style:{color:"white"},children:["Â ",y("LABELS.in")," ",S.currentMonth]})]}),title:e.jsx("span",{style:{color:"white"},children:y("LABELS.expenses")})})})]})})};qe.propTypes={className:k.string,withCharts:k.bool};const ha=j=>{const b=f.useRef(null),y=n=>Math.round((n+Number.EPSILON)*100)/100;f.useEffect(()=>{document.documentElement.addEventListener("ColorSchemeChange",()=>{b.current&&setTimeout(()=>{b.current.options.scales.x.grid.borderColor=g("--cui-border-color-translucent"),b.current.options.scales.x.grid.color=g("--cui-border-color-translucent"),b.current.options.scales.x.ticks.color=g("--cui-body-color"),b.current.options.scales.y.grid.borderColor=g("--cui-border-color-translucent"),b.current.options.scales.y.grid.color=g("--cui-border-color-translucent"),b.current.options.scales.y.ticks.color=g("--cui-body-color"),b.current.update()})})},[b]);const E=(j.monthlySales||Array(12).fill(0)).map(n=>y(n)),A=(j.monthlyExpense||Array(12).fill(0)).map(n=>y(n)),S=(j.monthlyPandL||Array(12).fill(0)).map(n=>y(n)),M=[...E,...A,...S.map(n=>Math.abs(n))],R=Math.max(...M)+Math.max(...M)*.1;return y(E.reduce((n,c)=>n+(c||0),0)),y(A.reduce((n,c)=>n+(c||0),0)),y(S.reduce((n,c)=>n+(c||0),0)),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px",flexWrap:"wrap",gap:"15px"},children:[e.jsx("div",{style:{flex:"1 1 250px",minWidth:"200px"}}),e.jsxs("div",{style:{display:"flex",gap:"clamp(8px, 2vw, 20px)",flexWrap:"wrap",alignItems:"center",justifyContent:window.innerWidth<768?"flex-start":"flex-end",flex:"1 1 300px",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"clamp(6px, 1.5vw, 8px) clamp(8px, 2vw, 12px)",backgroundColor:g("--cui-body-bg"),borderRadius:"6px",border:`1px solid ${g("--cui-border-color")}`,minWidth:"fit-content"},children:[e.jsx("div",{style:{width:"clamp(10px, 1.5vw, 12px)",height:"clamp(10px, 1.5vw, 12px)",backgroundColor:"#4A90E2",borderRadius:"2px",flexShrink:0}}),e.jsx("span",{style:{fontSize:"clamp(11px, 1.8vw, 13px)",fontWeight:"500",color:g("--cui-body-color"),whiteSpace:"nowrap"},children:"Profit & Loss"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"clamp(6px, 1.5vw, 8px) clamp(8px, 2vw, 12px)",backgroundColor:g("--cui-body-bg"),borderRadius:"6px",border:`1px solid ${g("--cui-border-color")}`,minWidth:"fit-content"},children:[e.jsx("div",{style:{width:"clamp(10px, 1.5vw, 12px)",height:"clamp(10px, 1.5vw, 12px)",backgroundColor:"#2ECC71",borderRadius:"2px",flexShrink:0}}),e.jsx("span",{style:{fontSize:"clamp(11px, 1.8vw, 13px)",fontWeight:"500",color:g("--cui-body-color"),whiteSpace:"nowrap"},children:"Sales"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"clamp(6px, 1.5vw, 8px) clamp(8px, 2vw, 12px)",backgroundColor:g("--cui-body-bg"),borderRadius:"6px",border:`1px solid ${g("--cui-border-color")}`,minWidth:"fit-content"},children:[e.jsx("div",{style:{width:"clamp(10px, 1.5vw, 12px)",height:"clamp(10px, 1.5vw, 12px)",backgroundColor:"#E74C3C",borderRadius:"2px",flexShrink:0}}),e.jsx("span",{style:{fontSize:"clamp(11px, 1.8vw, 13px)",fontWeight:"500",color:g("--cui-body-color"),whiteSpace:"nowrap"},children:"Expense"})]})]})]}),e.jsx("div",{style:{width:"100%",overflow:"hidden"},children:e.jsx(ia,{ref:b,style:{height:"clamp(250px, 40vh, 400px)",marginTop:"clamp(20px, 3vw, 40px)",width:"100%"},data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Profit & Loss",backgroundColor:"#4A90E2",borderColor:"#4A90E2",borderWidth:1,data:S,maxBarThickness:window.innerWidth<768?15:window.innerWidth<1024?25:40},{label:"Sales",backgroundColor:"#2ECC71",borderColor:"#2ECC71",borderWidth:1,data:E,maxBarThickness:window.innerWidth<768?15:window.innerWidth<1024?25:40},{label:"Expense",backgroundColor:"#E74C3C",borderColor:"#E74C3C",borderWidth:1,data:A,maxBarThickness:window.innerWidth<768?15:window.innerWidth<1024?25:40}]},options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(n){const c=y(n.raw);return`${n.dataset.label}: ${c}`}},titleFont:{size:window.innerWidth<768?12:14},bodyFont:{size:window.innerWidth<768?11:13}},datalabels:{display:!1}},scales:{x:{grid:{color:g("--cui-border-color-translucent"),drawOnChartArea:!1},ticks:{color:g("--cui-body-color"),font:{size:window.innerWidth<768?10:12},maxRotation:window.innerWidth<768?45:0,minRotation:0},categoryPercentage:1,barPercentage:1},y:{beginAtZero:!0,border:{color:g("--cui-border-color-translucent")},grid:{color:g("--cui-border-color-translucent")},max:R,ticks:{color:g("--cui-body-color"),maxTicksLimit:window.innerWidth<768?4:5,stepSize:Math.ceil(R/(window.innerWidth<768?4:5)),font:{size:window.innerWidth<768?10:12},callback:function(n){return y(n)+"k"}}}},interaction:{mode:"index",intersect:!1},elements:{bar:{borderRadius:2}},layout:{padding:{top:10,left:window.innerWidth<768?5:10,right:window.innerWidth<768?5:10,bottom:5}},animation:{onComplete:function(n){n&&n.config&&n.config.options&&n.config.options.plugins&&(n.config.options.plugins.datalabels={display:!1})}}}})})]})},Pe=[{value:1,label:"1 Month"},{value:3,label:"3 Months"},{value:6,label:"6 Months"},{value:12,label:"Yearly"}],Ta=j=>{var je,we,_e,Se,Ne;const b=Fe(),[y,E]=f.useState({monthlySales:Array(12).fill(0),monthlyExpense:Array(12).fill(0),monthlyPandL:Array(12).fill(0)}),[A,S]=f.useState([]),[M,R]=f.useState(""),{showToast:n}=la(),[c,re]=f.useState(ca()),[Q,pe]=f.useState(null),w=((je=c==null?void 0:c.company_info)==null?void 0:je.appMode)??"advance",{t:d,i18n:Z}=Be("global");Z.language;const[he,ne]=f.useState({plans:[]}),[h,D]=f.useState({visible:!1,product:null,addedQty:0,maxAddable:0}),[I,K]=f.useState(""),W=f.useRef(!1),Te=a=>{const t=a.target.value,r=h.maxAddable;if(t===""){D(s=>({...s,addedQty:""})),W.current=!1;return}const l=parseInt(t,10);isNaN(l)||l<0?(D(s=>({...s,addedQty:0})),W.current=!1):l>r?(D(s=>({...s,addedQty:r})),W.current||(n("warning",d("MESSAGES.maximum_stock_limit",{max:r})),W.current=!0)):(D(s=>({...s,addedQty:l})),W.current=!1)},Re=async()=>{var a,t;try{const r=h.product.id,l=h.product.product_id,s={size_id:r,added_qty:Number(h.addedQty)},o=await z(`/api/product/${l}/update-quantity`,s);o.success!==!1?(n("success",d("MESSAGES.stock_updated_success")),D({visible:!1,product:null,addedQty:0,maxAddable:0}),ee()):n("danger",d("MESSAGES.update_stock_failed",{error:o.message||"-"}))}catch(r){const l=((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||r.message||"-";n("danger",d("MESSAGES.update_stock_failed",{error:l}))}},[p,P]=f.useState({visible:!1,localNameEdited:!1,formData:{name:"",localName:"",slug:"",categoryId:0,incStep:1,desc:"",multiSize:!1,show:!0,returnable:!0,showOnHome:!0,unit:"",qty:"",stock:"",oPrice:"",media:[],sizes:[]},images:[]}),Ie=()=>{var r,l;const a=((l=(r=c==null?void 0:c.company_info)==null?void 0:r.subscribed_plan_name)==null?void 0:l.toLowerCase())||"";return["monthly business essential (start-up) - credit report","monthly business essential (start-up) - advanced booking","quarterly business essential (start-up) - credit report","quarterly business essential (start-up) - advanced booking","half-yearly business essential (start-up) - credit report","half-yearly business essential (start-up) - advanced booking","annually business essential (start-up) - credit report","annually business essential (start-up) - advanced booking"].includes(a)},[F,q]=f.useState({visible:!1,csvFile:null,isUploading:!1,message:"",isError:!1}),[We,G]=f.useState(!1),[i,ze]=f.useState(null),[X,$e]=f.useState([]),[x,V]=f.useState({plan_id:1,duration:1,validity_date:""}),[Qe,xe]=f.useState(!1),[Ve,oe]=f.useState(!1),le=async()=>{try{if(b===1&&(c!=null&&c.company_id)){xe(!0),console.log("Fetching subscription status for company:",c.company_id);const a=await te(`/api/company/subscription-status/${c.company_id}`);a&&(console.log("Subscription status received:",a),ze(a),a.is_expired||a.is_expiring_soon?(oe(!0),a.is_expired&&G(!0)):oe(!1))}}catch(a){console.error("Error fetching subscription status:",a),n("danger","Failed to fetch subscription status")}finally{xe(!1)}},ie=()=>{P(a=>({...a,visible:!1}))},Y=a=>{const{name:t,value:r}=a.target;if(["qty","stock","incStep"].includes(t)){if(r===""){P(o=>({...o,formData:{...o.formData,[t]:""}}));return}let s=parseFloat(r);if(isNaN(s)||s<0)return;if(t==="stock"){const o=parseFloat(p.formData.qty)||0;if(o>0&&s>o){n("warning",`Stock cannot exceed capacity (${o})`);return}}if(t==="qty"){const o=parseFloat(p.formData.stock)||0;if(o>0&&s<o){n("warning",`Capacity cannot be less than current stock (${o})`);return}}P(o=>({...o,formData:{...o.formData,[t]:s}}));return}if(t==="oPrice"){if(r===""){P(o=>({...o,formData:{...o.formData,[t]:""}}));return}if(!/^\d*\.?\d{0,2}$/.test(r))return;P(o=>({...o,formData:{...o.formData,[t]:r}}));return}P(t==="name"?s=>({...s,formData:{...s.formData,name:r,localName:s.localNameEdited?s.formData.localName:r}}):t==="localName"?s=>({...s,localNameEdited:!0,formData:{...s.formData,localName:r}}):s=>({...s,formData:{...s.formData,[t]:r}}))},Ue=a=>{const{name:t,checked:r}=a.target;P(l=>({...l,formData:{...l.formData,[t]:r}}))},Oe=async a=>{try{if(!p||!Array.isArray(p.images)||p.images.length===0)return console.log("âœ… No images to upload."),{success:!0};const t=p.images.filter(Boolean);if(t.length===0)return console.log("âœ… All images were empty or invalid, skipping upload."),{success:!0};const r=new FormData;t.forEach((s,o)=>{r.append("images[]",s)}),r.append("product_id",a.toString()),console.log("ðŸ“¤ Uploading images for product ID:",a);const l=await ma("/api/product/media/multiple",r);return console.log("âœ… Image upload success:",l),{success:!0,response:l}}catch(t){return console.error("âŒ Image upload failed:",t),{success:!1,error:t}}},Ge=async a=>{a.preventDefault();const t=a.target;if(!t.checkValidity()){t.classList.add("was-validated");return}const r=p.formData.oPrice,l=parseFloat(r);if(isNaN(l)||l<0){n("danger","Please enter a valid selling price");return}const s=parseFloat(p.formData.qty)||0,o=parseFloat(p.formData.stock)||0;if(o>s){n("danger",`Initial stock (${o}) cannot exceed capacity (${s})`);return}let u={...p.formData,sizes:[]};u.slug=u.name.replace(/[^\w]/g,"_"),p.formData.multiSize||(u.sizes.push({name:u.name,localName:u.localName,qty:u.qty,oPrice:r,dPrice:r,stock:u.stock,show:!0,returnable:u.returnable}),delete u.oPrice,delete u.qty,delete u.stock);try{const m=await z("/api/product",u);console.log("âœ… Product creation response:",m),m&&m.id?(n("success","Product added successfully"),console.log("ðŸ“¦ Created product ID:",m.id),console.log("ðŸ–¼ï¸ Images before upload:",p.images),(await Oe(m.id)).success?Array.isArray(p.images)&&p.images.filter(Boolean).length&&n("success","Images uploaded successfully"):n("warning","Product saved, but image upload failed."),ie(),ee()):m&&m.message?n("danger",m.message):n("danger","Unexpected response from server.")}catch(m){if(console.error("âŒ Product creation error:",m),m.response){const v=m.response.status,_=m.response.data;v===422&&_.errors?Object.entries(_.errors).forEach(([xa,aa])=>{aa.forEach(ta=>{n("danger",ta)})}):_.message?n("danger",_.message):n("danger",`Server error (${v}).`)}else m.request?n("danger","Network error. Please check your connection."):n("danger","An unexpected error occurred. Please try again.")}},fe=()=>{q(a=>({...a,visible:!1}))},Ye=a=>{const t=a.target.files[0];q(r=>({...r,csvFile:t,message:"",isError:!1}))},Je=async()=>{var t,r,l;if(!F.csvFile){q(s=>({...s,message:"Please select a CSV file to upload.",isError:!0}));return}if(F.csvFile.type!=="text/csv"&&!F.csvFile.name.endsWith(".csv")){q(s=>({...s,message:"Invalid file type. Please upload a valid CSV file.",isError:!0}));return}const a=new FormData;a.append("csv_file",F.csvFile);try{q(u=>({...u,isUploading:!0}));const s=await da("/api/uploadProducts",a,{headers:{"Content-Type":"multipart/form-data"}}),o=((t=s==null?void 0:s.data)==null?void 0:t.message)||(s==null?void 0:s.message);o?(q(u=>({...u,message:o,isError:!1,csvFile:null})),n("success","Products uploaded successfully!"),await ee()):q(u=>({...u,message:"Upload failed. Check CSV format.",isError:!0}))}catch(s){console.error("Upload error:",s);const o=((l=(r=s.response)==null?void 0:r.data)==null?void 0:l.error)||"Upload failed. Check CSV format.";q(u=>({...u,message:o,isError:!0})),n("danger",o)}finally{q(s=>({...s,isUploading:!1}))}},He=()=>{const a=document.createElement("a");a.href="sample_products_template.csv",a.download="SampleProductTemplate.csv",document.body.appendChild(a),a.click(),document.body.removeChild(a)};f.useEffect(()=>{try{w==="advance"&&(async()=>{const t=await te("/api/monthlyIncomeSummaries");E(t)})()}catch(a){n("danger","Error occurred "+a)}},[]);const ee=async()=>{try{const a=await te("/api/stock");S(a)}catch{n("danger","Error occurred while fetching stock")}};f.useEffect(()=>{ee()},[]),f.useEffect(()=>{(async()=>{await Promise.all([le(),Ze()])})();const t=setInterval(()=>{le()},5*60*1e3);return()=>clearInterval(t)},[c==null?void 0:c.company_id]);const Ze=async()=>{try{const a=await te("/api/detailsForCompany");console.log("Raw response:",a);const t=(a==null?void 0:a.plans)||[];ne(l=>({...l,plans:t}));const r=t.filter(l=>{var o;const s=((o=l.name)==null?void 0:o.toLowerCase())||"";return(s.includes("monthly")||s.includes("annually")||s.includes("quarterly")||s.includes("half-yearly"))&&!s.includes("free trial")});console.log("Filtered Plans:",r),$e(r)}catch(a){console.error("Error fetching plans:",a),n("danger","Failed to fetch subscription plans")}},ye=(a=null)=>{const t=a??x.duration;if(!(i!=null&&i.subscription_validity)){const u=new Date,m=new Date(u);return m.setMonth(m.getMonth()+parseInt(t)),m.toISOString().split("T")[0]}const r=new Date(i.subscription_validity),l=new Date,s=r>l?r:l,o=new Date(s);return o.setMonth(o.getMonth()+parseInt(t)),o.toISOString().split("T")[0]},ge=a=>{var l,s,o,u;const{name:t,value:r}=a.target;if(t==="plan_id"){const m=X.find(_=>_.id===parseInt(r));let v=1;(l=m==null?void 0:m.name)!=null&&l.toLowerCase().includes("annually")?v=12:(s=m==null?void 0:m.name)!=null&&s.toLowerCase().includes("monthly")?v=1:(o=m==null?void 0:m.name)!=null&&o.toLowerCase().includes("quarterly")?v=3:(u=m==null?void 0:m.name)!=null&&u.toLowerCase().includes("half-yearly")&&(v=6),V(_=>({..._,plan_id:r,duration:v,validity_date:ye(v)}))}else V(m=>({...m,[t]:r}))},be=a=>{const t=parseInt(a.target.value);V(r=>({...{...r,duration:t},validity_date:ye()}))};f.useEffect(()=>{if(x.duration&&(i!=null&&i.subscription_validity)){const a=new Date(i.subscription_validity),t=new Date,r=a>t?a:t,l=new Date(r);l.setMonth(l.getMonth()+parseInt(x.duration));const s=l.toISOString().split("T")[0];s!==x.validity_date&&V(o=>({...o,validity_date:s}))}},[x.duration,x.plan_id,i]);const ce=a=>Math.round(a*5)/5,N=()=>X.find(a=>a.id==x.plan_id),de=()=>{const a=N();if(!a)return 0;const r=a.price*x.duration/1.18;return ce(r)},me=()=>{const a=N();if(!a)return 0;const t=a.price*x.duration,r=t/1.18,l=t-r;return ce(l)},T=()=>{const a=N();if(!a)return 0;const t=a.price*x.duration;return ce(t)},Ke=(a,t)=>{var r,l,s,o,u;try{const m={company:{company_name:((r=c==null?void 0:c.company_info)==null?void 0:r.company_name)||(c==null?void 0:c.name)||"N/A",phone_no:(c==null?void 0:c.mobile)||((l=c==null?void 0:c.company_info)==null?void 0:l.phone_no)||"N/A",email_id:(c==null?void 0:c.email)||((s=c==null?void 0:c.company_info)==null?void 0:s.email_id)||"N/A"},plan:{name:((o=N())==null?void 0:o.name)||"Selected Plan",price:((u=N())==null?void 0:u.price)||0},transaction_id:(a==null?void 0:a.razorpay_payment_id)||"N/A",total_amount:de(),gst:me(),payable_amount:T(),valid_till:x.validity_date,created_at:new Date().toISOString(),renewal_duration:x.duration};console.log("Generating PDF with data:",m);const v=ua(m);return console.log("PDF generated successfully:",v),n("success","Receipt downloaded successfully!"),v}catch(m){console.error("Error generating PDF receipt:",m),n("warning","Subscription renewed successfully, but failed to generate receipt PDF")}},Xe=a=>a.is_expired?"expired":a.is_trial?"trial":a.days_remaining<15?"critical":a.days_remaining<=30?"warning":"active",ea=a=>a.is_expired||a.days_remaining<15?"danger":a.is_trial||a.days_remaining<=30?"warning":"success",ve=async()=>{var a;try{if(!x.plan_id||!x.duration){n("danger","Please select a plan and duration");return}if(!window.Razorpay){const l=document.createElement("script");l.src="https://checkout.razorpay.com/v1/checkout.js",await new Promise((s,o)=>{l.onload=s,l.onerror=o,document.body.appendChild(l)})}const t={amount:T()},r=await z("/api/create-order",t);if(r){const l={key:r.key,amount:r.order.amount,currency:r.order.currency,order_id:r.order.id,name:"Subscription Renewal",description:`${(a=N())==null?void 0:a.name} - ${x.duration} months`,handler:async o=>{try{const u=await z("/api/verify-payment",{razorpay_order_id:o.razorpay_order_id,razorpay_payment_id:o.razorpay_payment_id,razorpay_signature:o.razorpay_signature});if(u!=null&&u.success){const m={company_id:c.company_id,plan_id:x.plan_id,total_amount:T(),valid_till:x.validity_date,transaction_id:o.razorpay_payment_id,transaction_status:"success",renewal_type:"extension"},v=await z("/api/company-receipt",m),_=await z("/api/company/update-validity",{company_id:c.company_id,valid_till:x.validity_date,plan_id:x.plan_id});v!=null&&v.success&&(_!=null&&_.success)?(n("success","Subscription renewed successfully!"),setTimeout(()=>{Ke(o,v)},1e3),G(!1),oe(!1),await le()):n("danger","Payment successful but failed to update subscription. Please contact support.")}else n("danger","Payment verification failed")}catch(u){n("danger","Payment successful but failed to update subscription: "+u),console.error("Renewal error:",u)}},prefill:{name:c.name,email:c.email,contact:c.mobile},theme:{color:"#3399cc"}},s=new window.Razorpay(l);s.open(),s.on("payment.failed",async o=>{var u,m,v;console.error("Payment Failed:",o.error),n("danger","Payment failed. Please try again.");try{const _={company_id:c.company_id,plan_id:x.plan_id,user_id:c.id,total_amount:T(),valid_till:x.validity_date,transaction_id:((m=(u=o.error)==null?void 0:u.metadata)==null?void 0:m.payment_id)??"failed",transaction_status:((v=o.error)==null?void 0:v.description)??"Failed",renewal_type:"extension_failed"};await z("/api/company-receipt",_)}catch(_){console.error("Error logging failed payment:",_)}})}}catch(t){console.error("Payment error:",t),n("danger","Something went wrong with payment: "+t.message)}},ae=(a,t)=>{const r=parseInt(a)||0,l=parseInt(t)||1,s=r/l*100;return s<20?{level:"critical",color:"danger",strobe:!0,percentage:s.toFixed(1),description:"Critical - Less than 20% stock remaining"}:s>=20&&s<=50?{level:"low",color:"warning",strobe:!0,percentage:s.toFixed(1),description:"Low - 20-50% stock remaining"}:{level:"good",color:"success",strobe:!1,percentage:s.toFixed(1),description:"Good - More than 50% stock remaining"}};return A.filter(a=>{if(!a.product||!a.product.showOnHome)return!1;const t=(a.name||"").toLowerCase(),r=(a.localName||"").toLowerCase(),l=M.toLowerCase(),s=t.includes(l)||r.includes(l);if(Q){const o=a.stock/a.qty*100;if(Q==="critical"&&o>=20||Q==="low"&&(o<20||o>50)||Q==="good"&&o<=50)return!1}return s}),Qe&&!i?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"200px"},children:e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):i!=null&&i.is_expired&&b===1?e.jsx(e.Fragment,{children:e.jsxs(Ce,{visible:!0,backdrop:"static",keyboard:!1,size:"lg",children:[e.jsx(ke,{closeButton:!1,children:e.jsx(Le,{children:"Subscription Expired"})}),e.jsxs(Ee,{children:[e.jsx(se,{color:"danger",children:e.jsxs("div",{children:[e.jsx("h5",{children:"Your subscription has expired!"}),e.jsxs("p",{children:["Your subscription expired on ",i.validity_date_formatted,"."]}),e.jsx("p",{children:"Please renew your subscription to continue using the service."})]})}),e.jsxs(ue,{children:[e.jsxs(O,{children:[e.jsx(L,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(C,{htmlFor:"billing_type",children:"Billing Type"}),e.jsxs(U,{id:"billing_type",name:"billing_type",value:I,onChange:a=>{K(a.target.value),V(t=>({...t,plan_id:""}))},children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"half-yearly",children:"Half-Yearly"}),e.jsx("option",{value:"annually",children:"Annually"})]})]})}),e.jsx(L,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(C,{htmlFor:"plan_id",children:"Select Plan"}),e.jsx(U,{id:"plan_id",name:"plan_id",value:x.plan_id,onChange:ge,options:[{value:"",label:"Select a plan..."},...X.filter(a=>{var r;const t=((r=a.name)==null?void 0:r.toLowerCase())||"";return I?t.includes(I.toLowerCase()):t.includes("monthly")}).map(a=>({value:a.id,label:`${a.name} (â‚¹${a.price}/month incl. GST)`}))]})]})}),e.jsx(L,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(C,{htmlFor:"duration",children:"Duration"}),e.jsx(U,{id:"duration",name:"duration",value:x.duration,onChange:be,options:Pe,disabled:!0})]})})]}),e.jsx(O,{children:e.jsx(L,{md:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(C,{htmlFor:"validity_date",children:"New Validity Date"}),e.jsx($,{type:"date",id:"validity_date",name:"validity_date",value:x.validity_date,readOnly:!0})]})})}),N()&&e.jsxs(se,{color:"info",children:[e.jsx("h6",{children:"Payment Summary"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsxs("p",{className:"mb-1",children:["Plan: ",(we=N())==null?void 0:we.name]}),e.jsxs("p",{className:"mb-1",children:["Duration: ",x.duration," months"]}),e.jsxs("p",{className:"mb-1",children:["Rate: â‚¹",(_e=N())==null?void 0:_e.price,"/month (incl. GST)"]})]}),e.jsxs("div",{className:"col-6",children:[e.jsxs("p",{className:"mb-1",children:["Base Amount: â‚¹",de()]}),e.jsxs("p",{className:"mb-1",children:["GST (18%): â‚¹",me()]}),e.jsx("p",{className:"mb-1",children:e.jsxs("strong",{children:["Total: â‚¹",T()]})})]})]})]})]})]}),e.jsx(Ae,{children:e.jsxs(B,{color:"primary",onClick:ve,disabled:!N(),size:"lg",children:["Pay â‚¹",T()," & Renew Now"]})})]})}):e.jsxs(e.Fragment,{children:[Ve&&i&&e.jsxs("div",{className:`subscription-banner ${Xe(i)}`,children:[e.jsx("style",{children:`
        @keyframes flicker {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
        
        .subscription-banner {
          border-radius: 5px;
          margin-bottom: 20px;
          animation: flicker 2s infinite;
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 15px;
          flex-wrap: wrap;
        }
        
        /* Expired - Red */
        .subscription-banner.expired {
          background-color: #f8d7da;
          border: 1px solid #f5c6cb;
          color: #721c24;
        }
        
        /* Critical (less than 15 days) - Red */
        .subscription-banner.critical {
          background-color: #f8d7da;
          border: 1px solid #f5c6cb;
          color: #721c24;
        }
        
        /* Warning (1 month or less) - Yellow */
        .subscription-banner.warning {
          background-color: #fff3cd;
          border: 1px solid #ffeaa7;
          color: #856404;
        }
        
        /* Free Trial - Orange */
        .subscription-banner.trial {
          background-color: #ffe8d1;
          border: 1px solid #ffb347;
          color: #8b4513;
        }
        
        /* Active (more than 1 month) - Green */
        .subscription-banner.active {
          background-color: #d4edda;
          border: 1px solid #c3e6cb;
          color: #155724;
        }
        
        .subscription-banner .banner-text {
          font-weight: bold;
          flex: 1;
          min-width: 300px;
          margin-right: 15px;
        }
        
        .subscription-banner .banner-button {
          flex-shrink: 0;
        }
        
        /* Mobile Responsive - Text left, button right like in your image */
        @media (max-width: 767px) {
          .subscription-banner {
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            gap: 10px;
          }
          
          .subscription-banner .banner-text {
            min-width: auto;
            margin-right: 10px;
            font-size: 13px;
            line-height: 1.3;
            text-align: left;
            flex: 1;
          }
          
          .subscription-banner .banner-button {
            flex-shrink: 0;
            width: auto;
          }
        }
        
        /* Small mobile devices */
        @media (max-width: 480px) {
          .subscription-banner {
            padding: 10px;
            gap: 8px;
          }
          
          .subscription-banner .banner-text {
            font-size: 12px;
            line-height: 1.2;
            margin-right: 8px;
          }
        }
        
        /* Very small screens */
        @media (max-width: 360px) {
          .subscription-banner {
            padding: 8px;
            gap: 6px;
          }
          
          .subscription-banner .banner-text {
            font-size: 11px;
            margin-right: 6px;
          }
        }
      `}),e.jsx("div",{className:"banner-text",children:i.is_expired?e.jsxs("span",{children:["Your subscription has expired! Your subscription expired on ",i.validity_date_formatted,". Please renew your subscription to continue using the service."]}):e.jsx("span",{children:i.is_trial?`Free trial expiring in ${Math.abs(i.days_remaining)} days on ${i.validity_date_formatted}. Upgrade now to continue using the service.`:`Subscription expiring in ${Math.abs(i.days_remaining)} days on ${i.validity_date_formatted}. Renew now to avoid service interruption.`})}),e.jsx("div",{className:"banner-button",children:e.jsx(B,{color:ea(i),size:"sm",onClick:()=>G(!0),style:{fontWeight:"bold"},children:i.is_trial?"Upgrade Now":"Renew Now"})})]}),w==="advance"&&e.jsx(qe,{className:"mb-4",reportMonth:y}),e.jsxs(Ce,{visible:We,onClose:i!=null&&i.is_expired?void 0:()=>G(!1),backdrop:i!=null&&i.is_expired?"static":!0,keyboard:!(i!=null&&i.is_expired),size:"lg",children:[e.jsx(ke,{closeButton:!(i!=null&&i.is_expired),children:e.jsx(Le,{children:i!=null&&i.is_expired?"Subscription Expired":"Subscription Expiring Soon"})}),e.jsxs(Ee,{children:[e.jsx(se,{color:i!=null&&i.is_expired?"danger":"warning",children:i!=null&&i.is_expired?e.jsxs("div",{children:[e.jsx("h5",{children:"Your subscription has expired!"}),e.jsxs("p",{children:["Your subscription expired ",Math.abs(i.days_remaining)," days ago on ",i.validity_date_formatted,"."]}),e.jsx("p",{children:"Please renew your subscription to continue using the service."})]}):e.jsxs("div",{children:[e.jsx("h5",{children:"Subscription Expiring Soon!"}),e.jsxs("p",{children:["Your subscription will expire in ",i==null?void 0:i.days_remaining," days on ",i==null?void 0:i.validity_date_formatted,"."]}),e.jsx("p",{children:"Renew now to avoid service interruption."})]})}),e.jsxs(ue,{children:[e.jsxs(O,{children:[e.jsx(L,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(C,{htmlFor:"billing_type",children:"Billing Type"}),e.jsxs(U,{id:"billing_type",name:"billing_type",value:I,onChange:a=>{K(a.target.value),V(t=>({...t,plan_id:""}))},children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"half-yearly",children:"Half-Yearly"}),e.jsx("option",{value:"annually",children:"Annually"})]})]})}),e.jsx(L,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(C,{htmlFor:"plan_id",children:"Select Plan"}),e.jsx(U,{id:"plan_id",name:"plan_id",value:x.plan_id,onChange:ge,options:[{value:"",label:"Select a plan..."},...X.filter(a=>{var r;const t=((r=a.name)==null?void 0:r.toLowerCase())||"";return I?t.includes(I.toLowerCase()):t.includes("monthly")}).map(a=>({value:a.id,label:`${a.name} (â‚¹${a.price}/month incl. GST)`}))]})]})}),e.jsx(L,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(C,{htmlFor:"duration",children:"Duration"}),e.jsx(U,{id:"duration",name:"duration",value:x.duration,onChange:be,options:Pe,disabled:!0})]})})]}),e.jsx(O,{children:e.jsx(L,{md:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(C,{htmlFor:"validity_date",children:"New Validity Date"}),e.jsx($,{type:"date",id:"validity_date",name:"validity_date",value:x.validity_date,readOnly:!0})]})})}),N()&&e.jsxs(se,{color:"info",children:[e.jsx("h6",{children:"Payment Summary"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsxs("p",{className:"mb-1",children:["Plan: ",(Se=N())==null?void 0:Se.name]}),e.jsxs("p",{className:"mb-1",children:["Duration: ",x.duration," months"]}),e.jsxs("p",{className:"mb-1",children:["Rate: â‚¹",(Ne=N())==null?void 0:Ne.price,"/month (incl. GST)"]})]}),e.jsxs("div",{className:"col-6",children:[e.jsxs("p",{className:"mb-1",children:["Base Amount: â‚¹",de()]}),e.jsxs("p",{className:"mb-1",children:["GST (18%): â‚¹",me()]}),e.jsx("p",{className:"mb-1",children:e.jsxs("strong",{children:["Total: â‚¹",T()]})})]})]})]})]})]}),e.jsxs(Ae,{children:[!(i!=null&&i.is_expired)&&e.jsx(B,{color:"secondary",onClick:()=>G(!1),children:"Later"}),e.jsxs(B,{color:"primary",onClick:ve,disabled:!N(),children:["Pay â‚¹",T()," & Renew"]})]})]}),p.visible&&e.jsx("div",{className:"modal d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",style:{margin:"0.5rem auto",maxWidth:"min(600px, calc(100vw - 1rem))",width:"100%"},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:d("LABELS.create_new_product")}),e.jsx("button",{type:"button",className:"btn-close",onClick:ie})]}),e.jsx("div",{className:"modal-body",children:e.jsxs(ue,{className:"needs-validation",noValidate:!0,onSubmit:Ge,children:[e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-12 col-sm-6 mb-3 mb-sm-0",children:[e.jsx(C,{htmlFor:"pname",children:e.jsx("b",{children:d("LABELS.product_name")})}),e.jsx($,{type:"text",id:"pname",placeholder:d("LABELS.product_name"),name:"name",value:p.formData.name,onChange:Y,required:!0,feedbackInvalid:d("LABELS.please_provide_name"),feedbackValid:d("LABELS.looks_good")}),e.jsx("div",{className:"invalid-feedback",children:d("LABELS.product_name_required")})]}),e.jsxs("div",{className:"col-12 col-sm-6",children:[e.jsx(C,{htmlFor:"plname",children:e.jsx("b",{children:d("LABELS.local_name")})}),e.jsx($,{type:"text",id:"plname",placeholder:d("LABELS.local_name"),name:"localName",value:p.formData.localName,onChange:Y}),e.jsx("div",{className:"invalid-feedback",children:d("LABELS.local_name_required")})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-12 col-sm-4 mb-3 mb-sm-0",children:[e.jsx(C,{htmlFor:"qty",children:e.jsx("b",{children:d("LABELS.capacity")})}),e.jsx($,{type:"number",id:"qty",placeholder:"0",min:"0",onWheel:a=>a.target.blur(),name:"qty",value:p.formData.qty,onChange:Y,required:!0}),e.jsx("div",{className:"invalid-feedback",children:d("LABELS.quantity_required")})]}),e.jsxs("div",{className:"col-12 col-sm-4 mb-3 mb-sm-0",children:[e.jsx(C,{htmlFor:"stock",children:e.jsx("b",{children:d("LABELS.initial_stock")})}),e.jsx($,{type:"number",id:"stock",placeholder:"0",min:"0",onWheel:a=>a.target.blur(),max:p.formData.qty||void 0,name:"stock",value:p.formData.stock,onChange:Y,required:!0}),e.jsx("div",{className:"invalid-feedback",children:d("LABELS.initial_stock_required")}),p.formData.qty&&p.formData.stock>p.formData.qty&&e.jsxs("div",{className:"text-danger small mt-1",children:["Stock cannot exceed capacity (",p.formData.qty,")"]})]}),e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx(C,{htmlFor:"oPrice",children:e.jsx("b",{children:d("LABELS.selling_price")})}),e.jsx($,{type:"text",id:"oPrice",placeholder:"0.00",name:"oPrice",onWheel:a=>a.target.blur(),value:p.formData.oPrice,onChange:Y,onBlur:a=>{const t=a.target.value;if(t&&!isNaN(parseFloat(t))){const r=parseFloat(t).toFixed(2);P(l=>({...l,formData:{...l.formData,oPrice:r}}))}},pattern:"^\\d*\\.?\\d{0,2}$",title:"Please enter a valid price (up to 2 decimal places)",required:!0}),e.jsx("div",{className:"invalid-feedback",children:d("LABELS.selling_price_required")})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(C,{children:e.jsx("b",{children:"Upload Images"})}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"form-control",onChange:a=>{P(t=>({...t,images:[...a.target.files]}))}})]}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-12",children:e.jsx(pa,{id:"show",label:d("LABELS.show_for_invoicing"),name:"show",checked:p.formData.show,onChange:Ue})})}),e.jsxs("div",{className:"modal-footer d-flex gap-2",children:[e.jsx(B,{color:"secondary",onClick:ie,className:"flex-fill flex-sm-grow-0",children:d("LABELS.cancel")}),e.jsx(B,{color:"success",type:"submit",className:"flex-fill flex-sm-grow-0",disabled:p.formData.stock>p.formData.qty||!p.formData.name||!p.formData.qty||!p.formData.oPrice,children:d("LABELS.create_product")})]})]})})]})})}),F.visible&&e.jsx("div",{className:"modal d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:d("LABELS.upload_product_csv")}),e.jsx("button",{type:"button",className:"btn-close",onClick:fe})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"mb-3 d-flex align-items-center",children:[e.jsx("strong",{className:"me-2",children:d("LABELS.sample_csv_template")}),e.jsxs(B,{color:"success",variant:"outline",size:"sm",title:d("LABELS.download_sample_template"),onClick:He,children:["ðŸ“¥ ",d("LABELS.download")]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"csvFile",className:"form-label",children:e.jsx("strong",{children:d("LABELS.select_csv_file")})}),e.jsx("input",{type:"file",id:"csvFile",className:"form-control",accept:".csv",onChange:Ye})]}),F.message&&e.jsx("div",{className:`alert ${F.isError?"alert-danger":"alert-success"}`,role:"alert",children:F.message})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx(B,{color:"secondary",onClick:fe,children:d("LABELS.cancel")}),e.jsx(B,{color:"success",onClick:Je,disabled:F.isUploading||!F.csvFile,children:F.isUploading?d("LABELS.uploading"):d("LABELS.upload_csv")})]})]})})}),h.visible&&e.jsx("div",{className:"modal d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[d("LABELS.add_stock")," - ",h.product.name]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>D({visible:!1,product:null,addedQty:0,maxAddable:0})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-6",children:e.jsxs("p",{className:"mb-1",children:[e.jsxs("b",{children:[d("LABELS.total_quantity"),":"]})," ",e.jsx("span",{className:"badge bg-primary",children:h.product.qty??0})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("p",{className:"mb-1",children:[e.jsxs("b",{children:[d("LABELS.current_stock"),":"]})," ",e.jsx("span",{className:`badge ${ae(h.product.stock??0,h.product.qty||1).color==="danger"?"bg-danger":ae(h.product.stock??0,h.product.qty||1).color==="warning"?"bg-warning text-dark":"bg-success"}`,style:{animation:ae(h.product.stock??0,h.product.qty||1).strobe?"stockStrobe 1.5s infinite":"none"},children:h.product.stock??0})]})})]}),e.jsx("div",{className:"alert alert-info",children:e.jsxs("small",{children:[e.jsxs("strong",{children:[d("LABELS.stock_percentage"),":"]})," ",ae(h.product.stock??0,h.product.qty||1).percentage,"% ",d("LABELS.of_total_quantity")]})}),h.maxAddable>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:[e.jsxs("b",{children:[d("LABELS.stock_to_add"),":"]}),e.jsxs("small",{className:"text-muted ms-2",children:["(",d("LABELS.max"),": ",h.maxAddable,")"]})]}),e.jsx("input",{type:"number",min:"1",max:h.maxAddable,onWheel:a=>a.target.blur(),className:"form-control custom-placeholder",placeholder:`${d("LABELS.enter_stock_to_add")} (${d("LABELS.max")}: ${h.maxAddable})`,value:h.addedQty,onChange:Te})]}),e.jsx("div",{className:"alert alert-success",children:e.jsxs("small",{children:[e.jsxs("strong",{children:[d("LABELS.after_adding"),":"]})," ",d("LABELS.stock_will_be")," ",(h.product.stock??0)+(parseInt(h.addedQty)||0)," / ",h.product.qty??0]})})]}):e.jsxs("div",{className:"alert alert-warning",children:[e.jsxs("strong",{children:[d("LABELS.stock_is_full"),"!"]})," ",d("LABELS.stock_full_message")]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx(B,{color:"secondary",onClick:()=>D({visible:!1,product:null,addedQty:0,maxAddable:0}),children:d("LABELS.cancel")}),e.jsx(B,{color:"primary",onClick:Re,disabled:!h.addedQty||parseInt(h.addedQty)<1||h.maxAddable<=0,children:d("LABELS.add_stock")})]})]})})}),(b===0||b===1)&&w==="advance"&&!Ie()&&e.jsx(Me,{className:"mt-4 mb-4",children:e.jsxs(De,{children:[e.jsxs(O,{children:[e.jsxs(L,{sm:5,children:[e.jsx("h4",{id:"traffic",className:"card-title mb-0",children:"P&L (In Thousands)"}),e.jsx("div",{className:"small text-body-secondary",children:"January - December"})]}),e.jsx(L,{sm:7,className:"d-none d-md-block"})]}),e.jsx(ha,{monthlyPandL:y.monthlyPandL,monthlySales:y.monthlySales,monthlyExpense:y.monthlyExpense})]})})]})};export{Ta as default};
