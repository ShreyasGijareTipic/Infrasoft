import{r as u,j as e,C as ue,b as pt}from"./index-2dn3aAPo.js";import{a as $,b as v,c as z}from"./index.esm-BqU7uZM5.js";import{h as ut,e as xt,a as ae,c as yt,b as jt,p as ft,d as _t}from"./api-CIBCEetx.js";import{C as gt}from"./ConfirmationModal-WXCcOBrD.js";import{P as bt}from"./ProjectSelectionModal-ClSiYrmp.js";import{r as Ft,p as vt}from"./Feilds-BHjWXeSc.js";import{a as re,b as ne,c as ie,d as se,f as wt,g as Te,h as De,i as Ct,j as Ae,e as le,C as pe,n as Pt}from"./DefaultLayout-iLQNBb61.js";import{C as Le}from"./CForm-BXgIXJvs.js";import{C as S}from"./CFormLabel-DZUJOBB2.js";import{C as Be}from"./CFormSelect-B9c0-O3a.js";import{C as A}from"./CFormInput-DgsDA3z5.js";import{C as xe}from"./cil-mobile-Mmz4KEyA.js";import{C as k}from"./CButton-BUp8JCLl.js";import{c as qe}from"./cil-file-CeQgYs_D.js";import{C as Ie,a as $e}from"./CCardBody-HQDdpy5u.js";import{C as Ee}from"./CCardHeader-CSgV6VVv.js";import{C as ze,a as We,b as oe,c as N,d as Re,e as T}from"./CTable-CvasYDPA.js";import{E as ye}from"./jspdf.es.min-BAUA2m52.js";import"./jspdf.plugin.autotable-FyMJQhvl.js";import{utils as q,writeFile as je}from"./xlsx-B6sNpj_1.js";import{C as St}from"./CInputGroup-BlJhRiG_.js";import{c as kt}from"./cil-search-CDkY_4k-.js";import{c as Nt}from"./cil-x-0440B5Ce.js";import{c as Me}from"./cil-plus-D8mtC-W5.js";import"./RawMaterial-BtjEDAbB.js";import"./CFormControlWrapper-DrysVgi4.js";import"./typeof-QjJsDpFa.js";import"./jspdf.es.min-0IUj0dBU.js";var Tt=["512 512","<rect width='264' height='32' x='208' y='80' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M40,96a64,64,0,1,0,64-64A64.072,64.072,0,0,0,40,96Zm64-32A32,32,0,1,1,72,96,32.036,32.036,0,0,1,104,64Z' class='ci-primary'/><rect width='264' height='32' x='208' y='240' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M104,320a64,64,0,1,0-64-64A64.072,64.072,0,0,0,104,320Zm0-96a32,32,0,1,1-32,32A32.036,32.036,0,0,1,104,224Z' class='ci-primary'/><rect width='264' height='32' x='208' y='400' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M104,480a64,64,0,1,0-64-64A64.072,64.072,0,0,0,104,480Zm0-96a32,32,0,1,1-32,32A32.036,32.036,0,0,1,104,384Z' class='ci-primary'/>"],Ue=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M16,64V456H496V64ZM464,424H48V96H464Z' class='ci-primary'/><rect width='88' height='32' x='88' y='136' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='88' height='32' x='88' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='88' height='32' x='88' y='280' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='88' height='32' x='88' y='352' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='136' height='32' x='288' y='136' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='136' height='32' x='288' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='136' height='32' x='288' y='280' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='136' height='32' x='288' y='352' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='216' y='136' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='216' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='216' y='280' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='216' y='352' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/>"];const Dt=({visible:r,onClose:n,payForm:a={},payError:m,payLoading:h,onChange:s,onSubmit:p,selectedVendorPayment:l})=>{var g,C,P,b;const[o,j]=u.useState("upload"),w=()=>{if(!a.payment_file)return null;const x=a.payment_file,F=x.type.startsWith("image/"),M=x.type==="application/pdf";return e.jsxs("div",{className:"mt-3 p-3 border rounded bg-light",children:[e.jsx("strong",{children:"Selected file:"})," ",x.name," (",(x.size/1024).toFixed(2)," KB)",F&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:URL.createObjectURL(x),alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",objectFit:"contain"}})}),M&&e.jsx("div",{className:"mt-2 text-primary",children:e.jsx("strong",{children:"PDF file selected"})})]})},d=["imps","neft","rtgs"].includes((g=a.payment_type)==null?void 0:g.toLowerCase()),f=((C=a.payment_type)==null?void 0:C.toLowerCase())==="upi",c=x=>{x&&x.preventDefault(),p(o)};return e.jsxs(re,{visible:r,onClose:n,backdrop:"static",size:"xl",children:[e.jsx(ne,{onClose:n,children:e.jsx(ie,{children:"Make Payment"})}),e.jsx(se,{children:e.jsxs(Le,{onSubmit:c,children:[e.jsxs($,{className:"g-3 mb-4",children:[e.jsxs(v,{md:6,children:[e.jsx(S,{children:"Vendor Name"}),e.jsx("div",{className:"form-control bg-light",children:((b=(P=l==null?void 0:l.purchase)==null?void 0:P.vendor)==null?void 0:b.name)||"—"})]}),e.jsxs(v,{md:6,children:[e.jsx(S,{children:"Remaining Balance"}),e.jsxs("div",{className:"form-control text-danger fw-bold",children:["₹",parseFloat((l==null?void 0:l.balance_amount)||0).toFixed(2)]})]})]}),e.jsxs($,{className:"g-3 mb-4",children:[e.jsxs(v,{md:6,children:[e.jsx(S,{children:"Paid By *"}),e.jsxs(Be,{name:"paid_by",value:a.paid_by||"",onChange:s,required:!0,children:[e.jsx("option",{value:"",children:"Select Paid By"}),Ft.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))]})]}),e.jsxs(v,{md:6,children:[e.jsx(S,{children:"Payment Type *"}),e.jsxs(Be,{name:"payment_type",value:a.payment_type||"",onChange:s,required:!0,children:[e.jsx("option",{value:"",children:"Select Payment Type"}),vt.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))]})]})]}),e.jsxs($,{className:"g-3 mb-4",children:[e.jsxs(v,{md:6,children:[e.jsx(S,{children:"Amount *"}),e.jsx(A,{type:"number",name:"amount",value:a.amount||"",onChange:s,step:"0.01",min:"0.01",placeholder:"0.00",required:!0})]}),e.jsxs(v,{md:6,children:[e.jsx(S,{children:"Payment Date *"}),e.jsx(A,{type:"date",name:"payment_date",value:a.payment_date||"",onChange:s,max:new Date().toISOString().split("T")[0],required:!0})]})]}),d&&e.jsxs("div",{className:"border rounded p-4 mb-4 bg-light",children:[e.jsx("h6",{className:"mb-3 text-primary",children:"Bank Transfer Details"}),e.jsxs($,{className:"g-3",children:[e.jsxs(v,{md:6,lg:3,children:[e.jsx(S,{htmlFor:"bank_name",children:"Bank Name *"}),e.jsx(A,{type:"text",id:"bank_name",name:"bank_name",placeholder:"Enter bank name",value:a.bank_name||"",onChange:s,required:!0})]}),e.jsxs(v,{md:6,lg:3,children:[e.jsx(S,{htmlFor:"acc_number",children:"Account Number *"}),e.jsx(A,{type:"text",id:"acc_number",name:"acc_number",placeholder:"Enter account number",value:a.acc_number||"",onChange:s,required:!0})]}),e.jsxs(v,{md:6,lg:3,children:[e.jsx(S,{htmlFor:"ifsc",children:"IFSC Code *"}),e.jsx(A,{type:"text",id:"ifsc",name:"ifsc",placeholder:"Enter IFSC code",value:a.ifsc||"",onChange:s,required:!0})]}),e.jsxs(v,{md:6,lg:3,children:[e.jsx(S,{htmlFor:"transaction_id",children:"Transaction ID / UTR *"}),e.jsx(A,{type:"text",id:"transaction_id",name:"transaction_id",placeholder:"Enter transaction ID",value:a.transaction_id||"",onChange:s,required:!0})]})]})]}),f&&e.jsxs("div",{className:"border rounded p-4 mb-4 bg-light",children:[e.jsx("h6",{className:"mb-3 text-primary",children:"UPI Details"}),e.jsx($,{className:"g-3",children:e.jsxs(v,{md:6,lg:4,children:[e.jsx(S,{htmlFor:"transaction_id",children:"UPI Transaction ID *"}),e.jsx(A,{type:"text",id:"transaction_id",name:"transaction_id",placeholder:"Enter UPI transaction ID",value:a.transaction_id||"",onChange:s,required:!0})]})})]}),e.jsx($,{className:"mb-4",children:e.jsxs(v,{children:[e.jsx(S,{children:"Description (optional)"}),e.jsx(A,{name:"description",value:a.description||"",onChange:s,placeholder:"e.g. Payment for material delivery"})]})}),e.jsxs(wt,{variant:"pills",className:"mb-3",children:[e.jsx(Te,{children:e.jsx(De,{active:o==="upload",onClick:()=>j("upload"),style:{cursor:"pointer"},children:"Upload Photo / File"})}),e.jsx(Te,{children:e.jsx(De,{active:o==="remark",onClick:()=>j("remark"),style:{cursor:"pointer"},children:"Remark"})})]}),e.jsxs(Ct,{children:[e.jsxs(Ae,{visible:o==="upload",children:[e.jsxs(S,{children:["Upload Photo / File",e.jsx("span",{className:"text-danger",children:" *"})]}),e.jsx(A,{type:"file",name:"payment_file",accept:"image/png,image/jpeg,image/jpg,application/pdf",onChange:s}),e.jsx("small",{className:"text-muted d-block mt-1",children:"Payment photo/file is required when on Upload tab. Accepted formats: JPG, PNG, PDF (Max 5MB)"}),w()]}),e.jsxs(Ae,{visible:o==="remark",children:[e.jsxs(S,{children:["Remark ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("textarea",{className:"form-control",name:"remark",rows:"4",value:a.remark||"",onChange:s,placeholder:"Enter any remark..."}),e.jsx("small",{className:"text-muted d-block mt-1",children:"Payment remark is required when on Remark tab"})]})]}),m&&e.jsx(xe,{color:"danger",className:"mt-3",children:m})]})}),e.jsxs(le,{children:[e.jsx(k,{color:"secondary",onClick:n,disabled:h,children:"Cancel"}),e.jsx(k,{color:"primary",onClick:c,disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(ue,{size:"sm",className:"me-2"}),"Processing..."]}):"Submit Payment"})]})]})},At=({visible:r,onClose:n,isEdit:a=!1,form:m={},vendors:h=[],onChange:s,onSubmit:p,error:l})=>!m||!h?null:e.jsxs(re,{visible:r,onClose:n,size:"lg",backdrop:"static",children:[e.jsx(ne,{onClose:n,children:e.jsxs(ie,{children:[a?"Edit":"Add"," Material"]})}),e.jsx(se,{children:e.jsxs(Le,{children:[e.jsxs($,{className:"g-3",children:[e.jsxs(v,{md:6,children:[e.jsx(S,{children:"Vendor *"}),e.jsxs("select",{className:"form-select",name:"vendor_id",value:m.vendor_id||"",onChange:s,children:[e.jsx("option",{value:"",children:"Select Vendor"}),h.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]}),e.jsxs(v,{md:6,children:[e.jsx(S,{children:"Material Name *"}),e.jsx(A,{name:"material_name",value:m.material_name||"",onChange:s,placeholder:"e.g. Cement, Bricks"})]})]}),e.jsx($,{className:"g-3 mt-3",children:e.jsxs(v,{children:[e.jsx(S,{children:"About (optional)"}),e.jsx(A,{name:"about",value:m.about||"",onChange:s,placeholder:"Any additional details"})]})}),e.jsxs($,{className:"g-3 mt-3 align-items-end",children:[e.jsxs(v,{md:3,children:[e.jsx(S,{children:"Qty *"}),e.jsx(A,{type:"number",name:"qty",value:m.qty||"",onChange:s,min:"0.01",step:"0.01"})]}),e.jsxs(v,{md:3,children:[e.jsx(S,{children:"Price/Unit *"}),e.jsx(A,{type:"number",name:"price",value:m.price||"",onChange:s,min:"0",step:"0.01"})]}),e.jsxs(v,{md:3,children:[e.jsx(S,{children:"Total"}),e.jsx(A,{value:m.qty&&m.price?(m.qty*m.price).toFixed(2):"0.00",readOnly:!0,className:"bg-light"})]}),e.jsxs(v,{md:3,children:[e.jsx(S,{children:"Date *"}),e.jsx(A,{type:"date",name:"date",value:m.date||"",onChange:s,max:new Date().toISOString().split("T")[0]})]})]}),l&&e.jsx(xe,{color:"danger",className:"mt-3",children:l})]})}),e.jsxs(le,{children:[e.jsx(k,{color:"secondary",onClick:n,children:"Cancel"}),e.jsx(k,{color:"primary",onClick:p,children:a?"Update":"Save"})]})]}),Bt=({visible:r,onClose:n,logsData:a,loading:m,onDownloadPDF:h,onDownloadExcel:s})=>{var o,j,w,d,f;const[p,l]=u.useState(null);return e.jsxs(e.Fragment,{children:[e.jsxs(re,{visible:r,onClose:n,size:"xl",backdrop:"static",children:[e.jsx(ne,{onClose:n,children:e.jsx(ie,{children:"Payment Logs"})}),e.jsx(se,{children:m?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(ue,{}),e.jsx("p",{children:"Loading..."})]}):a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex justify-content-end gap-2 mb-3",children:[e.jsxs(k,{color:"primary",onClick:h,children:[e.jsx(z,{icon:qe})," PDF"]}),e.jsxs(k,{color:"success",onClick:s,children:[e.jsx(z,{icon:Ue})," Excel"]})]}),e.jsxs(Ie,{className:"mb-4",children:[e.jsx(Ee,{children:"Summary"}),e.jsx($e,{children:e.jsxs($,{children:[e.jsxs(v,{children:[e.jsx("strong",{children:"Vendor:"})," ",(o=a.vendor_details)==null?void 0:o.vendor_name]}),e.jsxs(v,{children:[e.jsx("strong",{children:"Total:"})," ₹",parseFloat(((j=a.payment_master)==null?void 0:j.total_amount)||0).toFixed(2)]}),e.jsxs(v,{children:[e.jsx("strong",{children:"Paid:"})," ₹",parseFloat(((w=a.payment_master)==null?void 0:w.paid_amount)||0).toFixed(2)]}),e.jsxs(v,{children:[e.jsx("strong",{children:"Balance:"})," ₹",parseFloat(((d=a.payment_master)==null?void 0:d.balance_amount)||0).toFixed(2)]})]})})]}),e.jsxs(ze,{striped:!0,bordered:!0,hover:!0,children:[e.jsx(We,{color:"dark",children:e.jsxs(oe,{children:[e.jsx(N,{children:"#"}),e.jsx(N,{children:"Paid By"}),e.jsx(N,{children:"Type"}),e.jsx(N,{children:"Amount"}),e.jsx(N,{children:"Date"}),e.jsx(N,{children:"Description"}),e.jsx(N,{children:"Bank Name"}),e.jsx(N,{children:"A/C No"}),e.jsx(N,{children:"IFSC"}),e.jsx(N,{children:"Transaction ID / UTR"}),e.jsx(N,{children:"File"})]})}),e.jsx(Re,{children:(f=a.payment_logs)==null?void 0:f.map((c,g)=>e.jsxs(oe,{children:[e.jsx(T,{children:g+1}),e.jsx(T,{children:c.paid_by}),e.jsx(T,{children:e.jsx(pe,{color:c.payment_type==="Cash"?"success":"info",children:c.payment_type})}),e.jsxs(T,{children:["₹",parseFloat(c.amount).toFixed(2)]}),e.jsx(T,{children:new Date(c.payment_date).toLocaleDateString()}),e.jsx(T,{children:c.description||"-"}),e.jsx(T,{children:c.bank_name||"-"}),e.jsx(T,{children:c.acc_number||"-"}),e.jsx(T,{children:c.ifsc||"-"}),e.jsx(T,{children:c.transaction_id||"-"}),e.jsx(T,{children:c.payment_file?e.jsx(k,{size:"sm",color:"info",onClick:()=>l(c.payment_file),children:"View"}):e.jsx(pe,{color:"secondary",children:"No File"})})]},c.id))})]})]}):e.jsx(xe,{color:"info",children:"No payment logs found."})}),e.jsx(le,{children:e.jsx(k,{color:"secondary",onClick:n,children:"Close"})})]}),e.jsxs(re,{visible:!!p,onClose:()=>l(null),size:"lg",children:[e.jsx(ne,{children:e.jsx(ie,{children:"View File"})}),e.jsx(se,{children:p?(()=>{const c=p.split("/").pop(),g=p.startsWith("img/")?p:"img/"+p,C=ut+g,P=c.split(".").pop().toLowerCase();return P==="pdf"?e.jsx("iframe",{src:C,title:"PDF Preview",style:{width:"100%",height:"70vh",border:"none"}}):["jpg","jpeg","png"].includes(P)?e.jsx("img",{src:C,alt:"File",style:{maxWidth:"100%",maxHeight:"70vh",display:"block",margin:"auto",borderRadius:"10px"}}):e.jsx("p",{style:{color:"red",textAlign:"center"},children:"Unsupported file type"})})():e.jsx("p",{style:{color:"red",textAlign:"center"},children:"File not available"})}),e.jsx(le,{children:e.jsx(k,{color:"secondary",onClick:()=>l(null),children:"Close"})})]})]})},Mt=(r,n)=>{const a=new ye("landscape");a.setFontSize(22).setFont(void 0,"bold").text("Purchase Vendor Payments Report",14,20),a.setFontSize(14).setFont(void 0,"normal").text(`Project: ${n}`,14,32),a.setFontSize(12).text(`Generated on: ${new Date().toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}`,14,42);const m=["Vendor Name","Material","Qty","Price/Unit","Total","Paid","Balance","Status","Created"],h=[];let s=0,p=0,l=0;r.forEach(o=>{var P,b,x,F,M;const j=parseFloat(o.amount),w=parseFloat(o.paid_amount),d=parseFloat(o.balance_amount),f=parseFloat(((P=o==null?void 0:o.purchase)==null?void 0:P.qty)||0),c=parseFloat(((b=o==null?void 0:o.purchase)==null?void 0:b.price_per_unit)||0),g=w/j,C=g===0?"Unpaid":g===1?"Paid":"Partial";s+=j,p+=w,l+=d,h.push([((F=(x=o==null?void 0:o.purchase)==null?void 0:x.vendor)==null?void 0:F.name)||"-",((M=o==null?void 0:o.purchase)==null?void 0:M.material_name)||"-",f.toFixed(2),c.toFixed(2),j.toFixed(2),w.toFixed(2),d.toFixed(2),C,new Date(o.created_at).toLocaleDateString("en-GB")])}),h.push(["Total:","","","",s.toFixed(2),p.toFixed(2),l.toFixed(2),"",""]),a.autoTable({head:[m],body:h,startY:52,theme:"grid",styles:{fontSize:9,cellPadding:3,lineColor:[44,62,80],lineWidth:.1},headStyles:{fillColor:[52,152,219],textColor:[255,255,255],fontStyle:"bold",halign:"center",fontSize:10},columnStyles:{0:{cellWidth:35,halign:"left"},1:{cellWidth:30,halign:"left"},2:{cellWidth:20,halign:"right"},3:{cellWidth:24,halign:"right"},4:{cellWidth:24,halign:"right"},5:{cellWidth:24,halign:"right"},6:{cellWidth:24,halign:"right"},7:{cellWidth:22,halign:"center"},8:{cellWidth:26,halign:"center"}},alternateRowStyles:{fillColor:[245,245,245]},didParseCell:o=>{o.row.index===h.length-1&&(o.cell.styles.fontStyle="bold",o.cell.styles.fillColor=[220,230,241])}}),a.save(`vendor-payments-${n.replace(/\s+/g,"-")}-${Date.now()}.pdf`)},Lt=(r,n)=>{let a=0,m=0,h=0;const s=r.map(d=>{var F,M,R,U,W;const f=parseFloat(d.amount),c=parseFloat(d.paid_amount),g=parseFloat(d.balance_amount),C=parseFloat(((F=d==null?void 0:d.purchase)==null?void 0:F.qty)||0),P=parseFloat(((M=d==null?void 0:d.purchase)==null?void 0:M.price_per_unit)||0),b=c/f,x=b===0?"Unpaid":b===1?"Paid":"Partial";return a+=f,m+=c,h+=g,{"Vendor Name":((U=(R=d==null?void 0:d.purchase)==null?void 0:R.vendor)==null?void 0:U.name)||"-",Material:((W=d==null?void 0:d.purchase)==null?void 0:W.material_name)||"-",Qty:C.toFixed(2),"Price/Unit":P.toFixed(2),Total:f.toFixed(2),Paid:c.toFixed(2),Balance:g.toFixed(2),Status:x,Created:new Date(d.created_at).toLocaleDateString("en-GB")}});s.push({"Vendor Name":"Total:",Material:"",Qty:"","Price/Unit":"",Total:a.toFixed(2),Paid:m.toFixed(2),Balance:h.toFixed(2),Status:"",Created:""});const p=q.book_new(),l=q.aoa_to_sheet([]),o=new Date().toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});q.sheet_add_aoa(l,[["Purchase Vendor Payments Report"],[`Project: ${n}`],[`Generated on: ${o}`],[]],{origin:"A1"}),q.sheet_add_json(l,s,{origin:"A5",skipHeader:!1});const j=["A","B","C","D","E","F","G","H","I"];j.forEach(d=>{const f=`${d}5`;l[f]&&(l[f].s={font:{bold:!0,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"3498DB"}},alignment:{horizontal:"center"}})});const w=4+s.length+1;j.forEach(d=>{const f=l[`${d}${w}`];f&&(f.s={font:{bold:!0},fill:{fgColor:{rgb:"DCE6F1"}},alignment:{horizontal:d==="A"?"left":"right"}})}),l["!cols"]=[{wch:25},{wch:25},{wch:12},{wch:15},{wch:15},{wch:15},{wch:15},{wch:12},{wch:18}],l["!merges"]=[{s:{r:0,c:0},e:{r:0,c:8}},{s:{r:1,c:0},e:{r:1,c:8}},{s:{r:2,c:0},e:{r:2,c:8}}],q.book_append_sheet(p,l,"Payments"),je(p,`vendor-payments-${n.replace(/\s+/g,"-")}-${Date.now()}.xlsx`)},qt=(r,n)=>{const a=new ye("landscape");a.setFontSize(18).setFont("helvetica","bold").text("All Vendor Payment Logs",14,15),a.setFontSize(12).setFont("helvetica","normal").text(`Project: ${n}`,14,23),a.setFontSize(10).text(`Generated: ${new Date().toLocaleString("en-GB")}`,14,30);const m=[];let h=0,s=0,p=0;r.forEach(l=>{var c,g,C,P;const o=((g=(c=l.purchase)==null?void 0:c.vendor)==null?void 0:g.name)||"Unknown",j=((C=l.purchase)==null?void 0:C.material_name)||"-",w=parseFloat(l.amount),d=parseFloat(l.paid_amount),f=parseFloat(l.balance_amount);h+=w,s+=d,p+=f,m.push([{content:`Vendor: ${o} | Material: ${j}`,colSpan:6,styles:{fontStyle:"bold",fillColor:[230,240,255],fontSize:10,textColor:[20,40,90]}},{content:w.toFixed(2),styles:{fontStyle:"bold",halign:"right"}},{content:d.toFixed(2),styles:{fontStyle:"bold",halign:"right"}},{content:f.toFixed(2),styles:{fontStyle:"bold",halign:"right",fillColor:f===0?[220,255,220]:[255,230,230]}}]),((P=l.logs)==null?void 0:P.length)>0?l.logs.forEach((b,x)=>{var F;m.push([x+1,b.paid_by||"-",b.payment_type||"-",parseFloat(b.amount).toFixed(2),new Date(b.payment_date).toLocaleDateString("en-GB"),(b.description||"-").substring(0,40)+(((F=b.description)==null?void 0:F.length)>40?"...":""),"","",""])}):m.push([{content:"No payments yet",colSpan:6,styles:{fontStyle:"italic",textColor:[150,150,150]}},"","",""]),m.push(["","","","","","","","",""])}),m.push([{content:"GRAND TOTAL",colSpan:6,styles:{fontStyle:"bold",fillColor:[200,230,200],fontSize:11}},{content:h.toFixed(2),styles:{fontStyle:"bold",halign:"right"}},{content:s.toFixed(2),styles:{fontStyle:"bold",halign:"right"}},{content:p.toFixed(2),styles:{fontStyle:"bold",halign:"right",fillColor:p===0?[180,255,180]:[255,180,180]}}]),a.autoTable({head:[["No.","Paid By","Type","Amount","Date","Description","Total","Paid","Balance"]],body:m,startY:35,theme:"grid",styles:{fontSize:8.5,cellPadding:2.5,lineColor:[180,180,180],lineWidth:.1},headStyles:{fillColor:[30,100,180],textColor:255,fontStyle:"bold",fontSize:9},columnStyles:{0:{cellWidth:12},1:{cellWidth:35},2:{cellWidth:25},3:{cellWidth:28},4:{cellWidth:28},5:{cellWidth:85},6:{cellWidth:30,halign:"right"},7:{cellWidth:30,halign:"right"},8:{cellWidth:30,halign:"right"}},margin:{top:35,left:8,right:8}}),a.save(`All_Logs_${n.replace(/[^a-zA-Z0-9]/g,"_")}_${Date.now()}.pdf`)},It=(r,n)=>{const a=[];let m=0,h=0,s=0;r.forEach(j=>{var C,P,b,x;const w=((P=(C=j.purchase)==null?void 0:C.vendor)==null?void 0:P.name)||"Unknown",d=((b=j.purchase)==null?void 0:b.material_name)||"-",f=parseFloat(j.amount),c=parseFloat(j.paid_amount),g=parseFloat(j.balance_amount);m+=f,h+=c,s+=g,a.push({"Vendor → Material":`${w} → ${d}`,"#":"","Paid By":"",Type:"",Amount:"","Payment Date":"",Description:"",Total:f.toFixed(2),Paid:c.toFixed(2),Balance:g.toFixed(2)}),((x=j.logs)==null?void 0:x.length)>0?j.logs.forEach((F,M)=>{a.push({"Vendor → Material":"","#":M+1,"Paid By":F.paid_by||"-",Type:F.payment_type||"-",Amount:parseFloat(F.amount).toFixed(2),"Payment Date":new Date(F.payment_date).toLocaleDateString("en-GB"),Description:F.description||"-",Total:"",Paid:"",Balance:""})}):a.push({"Vendor → Material":"","#":"","Paid By":"No payments yet",Total:"",Paid:"",Balance:""}),a.push({})}),a.push({"Vendor → Material":"GRAND TOTAL",Total:m.toFixed(2),Paid:h.toFixed(2),Balance:s.toFixed(2)});const p=q.book_new(),l=q.aoa_to_sheet([]),o=new Date().toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});q.sheet_add_aoa(l,[["All Vendor Payment Logs (Detailed)"],[`Project: ${n}`],[`Generated on: ${o}`],[]],{origin:"A1"}),q.sheet_add_json(l,a,{origin:"A5",skipHeader:!1}),l["!cols"]=[{wch:40},{wch:8},{wch:25},{wch:15},{wch:15},{wch:18},{wch:35},{wch:15},{wch:15},{wch:15}],l["!merges"]=[{s:{r:0,c:0},e:{r:0,c:9}},{s:{r:1,c:0},e:{r:1,c:9}},{s:{r:2,c:0},e:{r:2,c:9}}],q.book_append_sheet(p,l,"All Payment Logs"),je(p,`all-payment-logs-${n.replace(/\s+/g,"-")}-${Date.now()}.xlsx`)},$t=r=>{var c,g,C,P,b,x,F,M,R,U,W,E;const n=new ye("landscape");n.setFontSize(20),n.setFont(void 0,"bold"),n.text("Vendor Payment Report",14,18),n.setFontSize(13),n.setFont(void 0,"normal"),n.text(`Project: ${((g=(c=r.vendor_details)==null?void 0:c.project)==null?void 0:g.project_name)||"N/A"}`,14,28);const a=new Date().toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});n.setFontSize(11),n.text(`Generated: ${a}`,14,36);const m=((C=r.vendor_details)==null?void 0:C.vendor_name)||"N/A",h=((P=r.vendor_details)==null?void 0:P.material_name)||"N/A",s=parseFloat(((b=r.purchase)==null?void 0:b.qty)||((x=r.vendor_details)==null?void 0:x.qty)||0).toFixed(2),p=parseFloat(((F=r.purchase)==null?void 0:F.price_per_unit)||((M=r.vendor_details)==null?void 0:M.price_per_unit)||0).toFixed(2),l=parseFloat(((R=r.payment_master)==null?void 0:R.total_amount)||0).toFixed(2),o=parseFloat(((U=r.payment_master)==null?void 0:U.paid_amount)||0).toFixed(2),j=parseFloat(((W=r.payment_master)==null?void 0:W.balance_amount)||0).toFixed(2),w=[["Vendor:",m,"Material:",h],["Qty:",s,"Price/Unit:",`Rs ${p}`],["Total:",`Rs ${l}`,"Paid:",`Rs ${o}`],["Balance:",`Rs ${j}`,"",""]];n.autoTable({body:w,startY:44,theme:"grid",styles:{fontSize:11,cellPadding:4,lineColor:[200,200,200],lineWidth:.1},columnStyles:{0:{cellWidth:35,fontStyle:"bold",fillColor:[240,240,240]},1:{cellWidth:65},2:{cellWidth:35,fontStyle:"bold",fillColor:[240,240,240]},3:{cellWidth:65}}});const d=((E=r.payment_logs)==null?void 0:E.map((V,Z)=>[Z+1,V.paid_by||"-",V.payment_type||"-",`Rs ${Number(V.amount||0).toFixed(2)}`,new Date(V.payment_date).toLocaleDateString("en-GB"),V.description||"-"]))||[];n.autoTable({head:[["No.","Paid By","Type","Amount","Date","Description"]],body:d,startY:n.lastAutoTable.finalY+8,theme:"grid",headStyles:{fillColor:[52,152,219],textColor:255,fontSize:11,fontStyle:"bold",halign:"center"},bodyStyles:{fontSize:10},styles:{lineColor:[200,200,200],lineWidth:.1},columnStyles:{0:{cellWidth:15,halign:"center"},1:{cellWidth:45},2:{cellWidth:30,halign:"center"},3:{cellWidth:35,halign:"right"},4:{cellWidth:30,halign:"center"},5:{cellWidth:85}},alternateRowStyles:{fillColor:[245,245,245]}});const f=`Vendor_Payment_${m.replace(/[^a-zA-Z0-9]/g,"_")}.pdf`;n.save(f)},Et=r=>{const n=[],a=parseFloat(r.vendor_details.qty||0),m=parseFloat(r.vendor_details.price_per_unit||0);n.push(["Vendor Payment Report"],[],[`Project: ${r.vendor_details.project.project_name}`],[`Generated: ${new Date().toLocaleString()}`],[]),n.push([`Vendor: ${r.vendor_details.vendor_name}`,`Material: ${r.vendor_details.material_name}`,`Qty: ${a.toFixed(2)}`,`Price/Unit: ₹${m.toFixed(2)}`,`Total: ₹${r.payment_master.total_amount}`,`Paid: ₹${r.payment_master.paid_amount}`,`Balance: ₹${r.payment_master.balance_amount}`]),n.push([],["No.","Paid By","Type","Amount","Date","Description"]),r.payment_logs.forEach((p,l)=>{n.push([l+1,p.paid_by,p.payment_type,Number(p.amount).toFixed(2),new Date(p.payment_date).toLocaleDateString("en-GB"),p.description||"-"])});const h=q.aoa_to_sheet(n);h["!cols"]=[{wch:8},{wch:20},{wch:15},{wch:15},{wch:15},{wch:40}];const s=q.book_new();q.book_append_sheet(s,h,"Vendor Logs"),je(s,`Vendor_Payment_${r.vendor_details.vendor_name.replace(/\s+/g,"_")}.xlsx`)},xa=()=>{const[r,n]=u.useState(""),[a,m]=u.useState(""),[h,s]=u.useState([]),[p,l]=u.useState([]),[o,j]=u.useState(!1),[w,d]=u.useState([]),[f,c]=u.useState(!1),g=u.useRef(null),C=u.useRef(null),[P,b]=u.useState(!1),[x,F]=u.useState(!1),[M,R]=u.useState(!1),[U,W]=u.useState(!1),[E,V]=u.useState(null),[Z,fe]=u.useState(null),[Ve,_e]=u.useState(!1),[ce,ge]=u.useState(!1),[zt,be]=u.useState(null),[D,de]=u.useState({vendor_id:"",material_name:"",about:"",qty:"",price:"",total:0,date:"",project_id:"",payment_id:null}),[Ge,ee]=u.useState(""),[y,te]=u.useState({purches_vendor_id:"",paid_by:"Admin",payment_type:"Cash",amount:"",payment_date:new Date().toISOString().split("T")[0],description:"",remark:"",payment_file:null,bank_name:"",acc_number:"",ifsc:"",transaction_id:""}),[He,B]=u.useState(""),[Oe,Fe]=u.useState(!1),[Ze,me]=u.useState(!1),[ve,Qe]=u.useState(null),{showToast:G}=pt(),Ye=xt(),Je=async()=>{try{const t=await ae("/api/getPurchesVendor");l(t||[])}catch{G("danger","Failed to load vendors")}},Q=async()=>{if(r){j(!0);try{const t=await ae(`/api/getPurchesVedorPayment?project_id=${r}`);t&&t.success&&Array.isArray(t.data)?s(t.data):s([])}catch{G("danger","Failed to load payments"),s([])}finally{j(!1)}}},Ke=async t=>{_e(!0);try{const i=await ae(`/api/getVendorPaymentDetails/${t}`);fe(i)}catch{G("danger","Failed to load payment logs"),fe(null)}finally{_e(!1)}},Xe=async t=>{var L,H,O,Y,J,K,X,Se,ke,Ne;if(B(""),!y.paid_by.trim())return B("Paid by is required");if(!y.payment_type.trim())return B("Payment type is required");if(!y.amount||y.amount<=0)return B("Amount must be > 0");if(!y.payment_date)return B("Payment date is required");if(Number(y.amount)>Number(E==null?void 0:E.balance_amount))return B(`Amount cannot be more than pending balance ₹${E==null?void 0:E.balance_amount}`);const i=["imps","neft","rtgs"].includes(y.payment_type.toLowerCase()),I=y.payment_type.toLowerCase()==="upi";if(i){if(!((L=y.bank_name)!=null&&L.trim()))return B("Bank name is required");if(!((H=y.acc_number)!=null&&H.trim()))return B("Account number is required");if(!((O=y.ifsc)!=null&&O.trim()))return B("IFSC code is required");if(!((Y=y.transaction_id)!=null&&Y.trim()))return B("Transaction ID is required")}if(I&&!((J=y.transaction_id)!=null&&J.trim()))return B("UPI Transaction ID is required");if(t==="upload"&&!y.payment_file)return B("Payment : Photo/file is required");if(t==="remark"&&!((K=y.remark)!=null&&K.trim()))return B("Payment : Remark is required");const _=new FormData;_.append("purches_vendor_id",y.purches_vendor_id),_.append("paid_by",y.paid_by),_.append("payment_type",y.payment_type),_.append("amount",parseFloat(y.amount)),_.append("payment_date",y.payment_date),(X=y.description)!=null&&X.trim()&&_.append("description",y.description),(Se=y.remark)!=null&&Se.trim()&&_.append("remark",y.remark),y.payment_file&&_.append("payment_file",y.payment_file),_.append("bank_name",y.bank_name||""),_.append("acc_number",y.acc_number||""),_.append("ifsc",y.ifsc||""),_.append("transaction_id",y.transaction_id||""),Fe(!0);try{const he=await yt("/api/addVendorPayment",_);G("success",he.message||"Payment added successfully!"),b(!1),ct(),Q()}catch(he){const ht=((Ne=(ke=he.response)==null?void 0:ke.data)==null?void 0:Ne.message)||"Payment failed";B(ht)}finally{Fe(!1)}},we=u.useCallback(async t=>{if(!t.trim()){d([]),c(!1);return}try{const i=await ae(`/api/projects?searchQuery=${t}`);d(i||[]),i&&i.length>0?c(!0):c(!1)}catch{d([]),c(!1)}},[]);u.useEffect(()=>{const t=setTimeout(()=>{a.length>2&&!r?we(a):a.length<=2&&(d([]),c(!1))},300);return()=>clearTimeout(t)},[a,we,r]),u.useEffect(()=>{const t=i=>{g.current&&!g.current.contains(i.target)&&c(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),u.useEffect(()=>{r?Q():s([])},[r]);const Ce=t=>{m(t.project_name),n(t.id),d([]),c(!1),C.current&&C.current.blur()},et=t=>{const i=t.target.value;m(i),r&&i!==a&&n(""),w.length>0&&i.length>2&&c(!0)},tt=()=>{w.length>0&&a.length>2&&c(!0)},Pe=()=>{ge(!1),be(null),de({vendor_id:"",material_name:"",about:"",qty:"",price:"",total:0,date:new Date().toISOString().split("T")[0],project_id:r,payment_id:null}),ee(""),F(!0)},at=t=>{ge(!0),be(t.id);const i=t.purchase||{};de({vendor_id:i.vendor_id||"",material_name:i.material_name||"",about:i.about||"",qty:parseFloat(i.qty)||"",price:parseFloat(i.price_per_unit)||"",total:parseFloat(i.total)||0,date:i.date||new Date().toISOString().split("T")[0],project_id:r,payment_id:t.id}),ee(""),F(!0)},rt=t=>{const{name:i,value:I}=t.target;de(_=>{const L={..._,[i]:I};if(i==="qty"||i==="price"){const H=i==="qty"?parseFloat(I)||0:parseFloat(_.qty)||0,O=i==="price"?parseFloat(I)||0:parseFloat(_.price)||0;L.total=(H*O).toFixed(2)}return L})},nt=()=>D.vendor_id?D.material_name.trim()?!D.qty||D.qty<=0?"Qty must be > 0":!D.price||D.price<=0?"Price must be > 0":D.date?"":"Date is required":"Material name is required":"Vendor is required",it=async()=>{var I,_;const t=nt();if(t)return ee(t);const i={project_id:parseInt(r),vendor_id:parseInt(D.vendor_id),material_name:D.material_name,about:D.about||null,price_per_unit:parseFloat(D.price),qty:parseFloat(D.qty),total:parseFloat(D.total),date:D.date};try{ce?await jt("/api/updatePurchesVendorPayment",{...i,payment_id:D.payment_id}):await ft("/api/purchesVendor",i),G("success",ce?"Updated successfully!":"Added successfully!"),F(!1),Q()}catch(L){ee(((_=(I=L.response)==null?void 0:I.data)==null?void 0:_.message)||"Operation failed")}},st=async()=>{if(ve)try{const t=await _t(`/api/purchesVendorById/${ve}`);G("success",t.message||"Deleted successfully"),me(!1),Q()}catch{G("danger","Failed to delete")}},lt=t=>{Qe(t),me(!0)},ot=t=>{V(t),te({purches_vendor_id:t.purches_vendor_id,paid_by:"",payment_type:"",amount:"",payment_date:new Date().toISOString().split("T")[0],description:"",remark:"",payment_file:null,bank_name:"",acc_number:"",ifsc:"",transaction_id:""}),B(""),b(!0)},ct=()=>{te({purches_vendor_id:"",paid_by:"Admin",payment_type:"Cash",amount:"",payment_date:new Date().toISOString().split("T")[0],description:"",remark:"",payment_file:null,bank_name:"",acc_number:"",ifsc:"",transaction_id:""})},dt=t=>{const{name:i,value:I,files:_}=t.target;i==="payment_file"&&_&&_[0]?te(L=>({...L,payment_file:_[0]})):te(L=>({...L,[i]:I}))},mt=async t=>{R(!0),await Ke(t)};return u.useEffect(()=>{Je()},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Ie,{className:"mb-4",children:[e.jsxs(Ee,{className:"bg-primary text-white d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-0",children:"Purchase Vendor Payments"}),e.jsxs("div",{children:[r&&h.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(k,{size:"sm",color:"light",className:"me-2",onClick:()=>Mt(h,a),children:[e.jsx(z,{icon:qe})," PDF"]}),e.jsxs(k,{size:"sm",color:"light",className:"me-2",onClick:()=>Lt(h,a),children:[e.jsx(z,{icon:Ue})," Excel"]})]}),h.some(t=>{var i;return((i=t.logs)==null?void 0:i.length)>0})&&e.jsxs(e.Fragment,{children:[e.jsx(k,{size:"sm",color:"light",className:"me-2",onClick:()=>qt(h,a),children:"All Logs PDF"}),e.jsx(k,{size:"sm",color:"light",onClick:()=>It(h,a),children:"All Logs Excel"})]})]})]}),e.jsxs($e,{children:[e.jsx($,{className:"mb-4",children:e.jsx(v,{md:12,children:e.jsxs("div",{className:"position-relative",ref:g,children:[e.jsxs(St,{children:[e.jsx(A,{ref:C,type:"text",placeholder:"Search and select project...",value:a,onChange:et,onFocus:tt,autoComplete:"off"}),r?e.jsx(k,{color:"danger",variant:"outline",onClick:()=>{m(""),n(""),s([])},children:e.jsx(z,{icon:Nt})}):e.jsx(k,{color:"primary",variant:"outline",onClick:()=>W(!0),children:e.jsx(z,{icon:kt})})]}),f&&w.length>0&&e.jsx("div",{className:"border bg-white shadow-sm rounded",style:{position:"absolute",top:"100%",left:0,right:0,maxHeight:"200px",overflowY:"auto",zIndex:1e3,marginTop:"2px"},children:w.map(t=>e.jsx("div",{className:"px-3 py-2 hover-bg-light cursor-pointer",style:{cursor:"pointer"},onClick:()=>Ce(t),onMouseEnter:i=>i.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:i=>i.currentTarget.style.backgroundColor="white",children:t.project_name},t.id))}),r&&e.jsxs("small",{className:"text-success d-block mt-1",children:["Selected: ",e.jsx("strong",{children:a})]})]})})}),o?e.jsx("div",{className:"text-center py-4",children:e.jsx(ue,{})}):h.length>0?e.jsx("div",{className:"table-responsive",children:e.jsxs(ze,{striped:!0,hover:!0,children:[e.jsx(We,{color:"light",children:e.jsxs(oe,{children:[e.jsx(N,{children:"Vendor Name"}),e.jsx(N,{children:"Material"}),e.jsx(N,{children:"Qty"}),e.jsx(N,{children:"Price/Unit"}),e.jsx(N,{children:"Total"}),e.jsx(N,{children:"Paid"}),e.jsx(N,{children:"Balance"}),e.jsx(N,{children:"Status"}),e.jsx(N,{children:"Created"}),e.jsx(N,{children:"Actions"})]})}),e.jsx(Re,{children:h.map(t=>{var H,O,Y,J,K,X;const i=parseFloat(t.paid_amount)/parseFloat(t.amount)*100,I=i===0?"danger":i===100?"success":"warning",_=i===0?"Unpaid":i===100?"Paid":"Partial",L=parseFloat(t.balance_amount)>0;return e.jsxs(oe,{children:[e.jsx(T,{children:((O=(H=t==null?void 0:t.purchase)==null?void 0:H.vendor)==null?void 0:O.name)||"-"}),e.jsx(T,{children:((Y=t==null?void 0:t.purchase)==null?void 0:Y.material_name)||"-"}),e.jsx(T,{children:parseFloat(((J=t==null?void 0:t.purchase)==null?void 0:J.qty)||0).toFixed(2)}),e.jsxs(T,{children:["₹",parseFloat(((K=t==null?void 0:t.purchase)==null?void 0:K.price_per_unit)||0).toFixed(2)]}),e.jsxs(T,{children:["₹",parseFloat(t.amount).toFixed(2)]}),e.jsxs(T,{children:["₹",parseFloat(t.paid_amount).toFixed(2)]}),e.jsxs(T,{children:["₹",parseFloat(t.balance_amount).toFixed(2)]}),e.jsx(T,{children:e.jsx(pe,{color:I,children:_})}),e.jsx(T,{children:new Date(t.created_at).toLocaleDateString()}),e.jsx(T,{children:e.jsxs("div",{className:"d-flex gap-1 align-items-center",children:[e.jsx(k,{color:"info",size:"sm",onClick:()=>mt(t.purches_vendor_id),disabled:!t.logs||t.logs.length===0,title:`Logs (${((X=t.logs)==null?void 0:X.length)||0})`,children:e.jsx(z,{icon:Tt})}),e.jsx(k,{color:"success",size:"sm",onClick:()=>ot(t),disabled:!L,title:L?"Make Payment":"Fully Paid",children:e.jsx(z,{icon:Pt})}),e.jsx(k,{color:"warning",size:"sm",onClick:()=>at(t),children:"Edit"}),Ye===1&&e.jsx(k,{color:"danger",size:"sm",onClick:()=>lt(t.purches_vendor_id),children:"Delete"})]})})]},t.id)})})]})}):r?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("h5",{className:"text-muted",children:"No payments yet"}),e.jsxs(k,{color:"primary",onClick:Pe,children:[e.jsx(z,{icon:Me,className:"me-1"}),"Add First Material"]})]}):e.jsx("div",{className:"text-center py-5",children:e.jsx("h5",{className:"text-muted",children:"Select a project to view payments"})}),r&&!o&&e.jsx("div",{className:"mt-3",children:e.jsxs(k,{color:"success",onClick:Pe,children:[e.jsx(z,{icon:Me,className:"me-1"}),"Add Material"]})})]})]}),e.jsx(Dt,{visible:P,onClose:()=>b(!1),payForm:y,payError:He,payLoading:Oe,onChange:dt,onSubmit:Xe,selectedVendorPayment:E}),e.jsx(At,{visible:x,onClose:()=>F(!1),isEdit:ce,form:D,vendors:p,onChange:rt,onSubmit:it,error:Ge}),e.jsx(Bt,{visible:M,onClose:()=>R(!1),logsData:Z,loading:Ve,onDownloadPDF:()=>$t(Z),onDownloadExcel:()=>Et(Z),onRefresh:Q}),e.jsx(bt,{visible:U,onClose:()=>W(!1),onSelectProject:t=>{Ce(t),W(!1)}}),e.jsx(gt,{visible:Ze,setVisible:me,resource:"Purchase Record",onYes:st})]})};export{xa as default};
