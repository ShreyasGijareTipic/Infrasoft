import{u as gt,b as xt,r as c,j as e,C as Re}from"./index-RpBzfmRP.js";import{c as ge,a as Ke,b as Ee}from"./index.esm-DUetlGrP.js";import{e as jt,a as De,d as ft,b as yt}from"./api-CIBCEetx.js";import{C as _t}from"./ConfirmationModal-CcMGRpGQ.js";import{E as Ct}from"./EditExpense-Db36o9-_.js";import{E as bt}from"./jspdf.es.min-BUj3JTgq.js";import"./jspdf.plugin.autotable-D15hp-lf.js";import{utils as F,writeFile as St}from"./xlsx-B6sNpj_1.js";import{u as wt,a as $e,b as Le,c as Me,d as Ie,e as Be,C as Y}from"./DefaultLayout-8YNBKV_4.js";import{C as I}from"./CButton-L7dQWiht.js";import{C as qe,a as He}from"./CCardBody-CXkOMOvY.js";import{c as et}from"./cil-cloud-upload-Ca9_6_ej.js";import{c as tt}from"./cil-cloud-download-CPU_poQw.js";import{C as Tt}from"./CCardHeader-eGsVFHQg.js";import{C as vt}from"./CForm-HJD6m-Ck.js";import{C as be}from"./CFormLabel-CbpozHkd.js";import{C as Ve}from"./CFormSelect-C4Gr2yJD.js";import{C as st}from"./CFormInput-DA1SntO8.js";import{C as Nt,a as Ft,b as We,c as _,d as Et,e as y}from"./CTable-CQX9REJw.js";import"./Feilds-BHjWXeSc.js";import"./cil-trash-CBbKHhHb.js";import"./typeof-QjJsDpFa.js";import"./jspdf.es.min-CXwopnVh.js";import"./RawMaterial-BtjEDAbB.js";import"./cil-mobile-BmZiFZXB.js";import"./CFormControlWrapper-D2DOCb2Z.js";var kt=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M327.086,496.89l-142.6-142.6-11.258-11.15-85.6-85.6.054-.054,11.259-11.367,85.5-85.5.054.054,142.6-142.595L424,114.989,281.506,257.483,424,399.978ZM184.64,309.3l11.266,11.159,131.18,131.181,51.658-51.658L236.251,257.483,378.744,114.989,327.086,63.331,184.694,205.725l-.054-.054-51.813,51.812Z' class='ci-primary'/>"],Pt=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M183.505,496,86.237,398.73,229.412,255.556,86.237,112.38l97.268-97.27L326.732,158.338l11.316,11.209,85.9,85.9,0,0,.051.05-11.311,11.419-85.9,85.9-.055-.054Zm-52.013-97.27,52.013,52.014L326.629,307.62l.055.054L378.8,255.556l-52.127-52.128-11.308-11.2L183.505,60.366,131.492,112.38,274.667,255.556Z' class='ci-primary'/>"];const Gt=(u,xe,O,R,$,Z,m,Se,X,J,K,ee,te,we)=>{const d=new bt({orientation:"landscape",unit:"pt",format:"a4"}),f=d.internal.pageSize.getWidth(),E=d.internal.pageSize.getHeight(),T=40,C=b=>{d.setFontSize(18),d.setFont(void 0,"bold"),d.text("EXPENSE REPORT",f/2,30,{align:"center"}),d.setFontSize(10),d.setFont(void 0,"normal");const k=u.start_date||"All",S=u.end_date||"All",z=new Date().toLocaleDateString("en-GB");return d.text(`Period: ${k} to ${S}`,f/2,48,{align:"center"}),d.text(`Generated on: ${z}`,f/2,62,{align:"center"}),d.setLineWidth(1),d.line(T,70,f-T,70),80};let v=C(),A=1;const n=xe.find(b=>b.id===parseInt(u.project_id));O.find(b=>b.id===parseInt(u.expense_type_id));const H=J+K+ee;v>E-100&&(d.addPage(),A++,v=C()),d.setFillColor(231,76,60),d.setDrawColor(192,57,43),d.setLineWidth(2),d.rect(T,v,f-T*2,35,"FD"),d.setFontSize(10),d.setFont(void 0,"bold"),d.setTextColor(255,255,255);const V=`Grand Total of Expenses :   Amount: Rs ${m(R)} | GST: Rs ${m(H)} | CGST: Rs ${m(J)} | SGST: Rs ${m(K)} | IGST: Rs ${m(ee)}`;d.text(V,f/2,v+23,{align:"center"}),v+=45;let D={};n?D[n.project_name]=$:$.forEach(b=>{var S;const k=((S=b.project)==null?void 0:S.project_name)||"No Project";D[k]||(D[k]=[]),D[k].push(b)}),Object.keys(D).forEach((b,k)=>{const S=D[b];v>E-200&&(d.addPage(),A++,v=C()),d.setFillColor(41,128,185),d.rect(T,v,f-T*2,20,"F"),d.setFontSize(11),d.setFont(void 0,"bold"),d.setTextColor(255,255,255),d.text(`Project: ${b}`,T+10,v+14),v+=25;const z=["Sr","Date","Expense Type","Category","Qty","Price","Base Amount","GST Rs","CGST Rs","SGST Rs","IGST Rs","Total","Payment By","Payment Type","Contact","Bank","Account","IFSC","Txn ID","About"],se=S.map((r,h)=>{var N,w;return[h+1,Se(r.expense_date),((N=r.expense_type)==null?void 0:N.name)||Z[r.expense_id]||"-",((w=r.expense_type)==null?void 0:w.expense_category)||"-",r.qty||"-",m(r.price||0),m((r.qty||0)*(r.price||0)),r.isGst?m(r.gst||0):"-",r.isGst?m(r.cgst||0):"-",r.isGst?m(r.sgst||0):"-",r.isGst?m(r.igst||0):"-",m(r.total_price||0),r.payment_by||"-",r.payment_type||"-",r.contact||"-",r.bank_name||"-",r.account_number||"-",r.ifsc_code||"-",r.transaction_id||"-",r.name||"-"]}),de=S.reduce((r,h)=>r+parseFloat(h.total_price||0),0),W=S.reduce((r,h)=>r+parseFloat(h.qty||0),0),B=S.reduce((r,h)=>r+(h.qty||0)*(h.price||0),0),je=S.reduce((r,h)=>r+parseFloat(h.gst||0),0),s=S.reduce((r,h)=>r+parseFloat(h.cgst||0),0),a=S.reduce((r,h)=>r+parseFloat(h.sgst||0),0),g=S.reduce((r,h)=>r+parseFloat(h.igst||0),0);se.push([{content:"Total:",colSpan:4,styles:{fontStyle:"bold",halign:"right"}},W,"-",m(B),m(je),m(s),m(a),m(g),m(de),"","","","","","",""]),d.autoTable({head:[z],body:se,startY:v,theme:"grid",styles:{fontSize:7,cellPadding:3,halign:"center",valign:"middle",lineWidth:.5,lineColor:[200,200,200]},headStyles:{fillColor:[52,73,94],textColor:255,fontStyle:"bold",fontSize:7,halign:"center"},footStyles:{fillColor:[236,240,241],textColor:[0,0,0],fontStyle:"bold"},margin:{left:T,right:T},tableWidth:f-T*2,alternateRowStyles:{fillColor:[249,249,249]},didDrawPage:r=>{d.setFontSize(8),d.setTextColor(128,128,128),d.text(`Page ${A}`,f/2,E-20,{align:"center"})}}),v=d.lastAutoTable.finalY+20}),d.setFontSize(8),d.setTextColor(128,128,128),d.text(`Expense Report | Period: ${u.start_date||"All"} to ${u.end_date||"All"} | Generated: ${new Date().toLocaleDateString("en-GB")}`,f/2,E-20,{align:"center"});const L=`Expense_Report_${u.start_date||"All"}_to_${u.end_date||"All"}_${new Date().toISOString().split("T")[0]}.pdf`;d.save(L),X("success","PDF file downloaded successfully!")},At=(u,xe,O,R,$,Z,m,Se,X,J,K,ee,te,we,d)=>{X("info","Preparing Excel file with images...");try{const f=F.book_new(),E=$.reduce((s,a)=>{const g=a.photos&&Array.isArray(a.photos)?a.photos.length:a.photo_url&&a.photo_url!=="NA"?1:0;return Math.max(s,g)},0),T=$.map((s,a)=>{var j,ve,ae;const g=parseFloat(s.price||0),r=parseFloat(s.qty||0),h=g*r,N=parseFloat(s.gst||0),w=parseFloat(s.cgst||0),oe=parseFloat(s.sgst||0),U=parseFloat(s.igst||0),re=s.isGst?h*w/100:0,le=s.isGst?h*oe/100:0,Te=s.isGst?h*U/100:0,ne=re+le+Te,P={"Sr No":a+1,Date:Se(s.expense_date),Project:((j=s.project)==null?void 0:j.project_name)||"-","Expense Type":((ve=s.expense_type)==null?void 0:ve.name)||Z[s.expense_id]||"-","Expense Category":((ae=s.expense_type)==null?void 0:ae.expense_category)||"-",Qty:s.qty||"-",Price:s.price?m(s.price):"-","Base Amount":m(h),"Payment By":s.payment_by||"-","Payment Type":s.payment_type||"-",Contact:s.contact||"-","Bank Name":s.bank_name||"-","Account Number":s.account_number||"-","IFSC Code":s.ifsc_code||"-","Transaction ID":s.transaction_id||"-",About:s.name||"-",Notes:s.photo_remark||"-"};for(let G=1;G<=E;G++){let q="-",ce="-";if(s.photos&&s.photos[G-1]){const Q=s.photos[G-1];q=Q.remark||`Photo ${G}`,ce=Q.remark||"-"}else G===1&&s.photo_url&&s.photo_url!=="NA"&&(q=s.photo_url.split("/").pop(),ce=s.photo_remark||"-");P[`Photo ${G}`]=q,P[`Photo ${G} Remark`]=ce}return P["GST (%)"]=s.isGst&&N||"-",P["CGST (%)"]=s.isGst&&w||"-",P["CGST Amount"]=s.isGst?m(re):"-",P["SGST (%)"]=s.isGst&&oe||"-",P["SGST Amount"]=s.isGst?m(le):"-",P["IGST (%)"]=s.isGst&&U||"-",P["IGST Amount"]=s.isGst?m(Te):"-",P["Total GST"]=s.isGst?m(ne):"-",P["Total Amount"]=m(s.total_price||h+ne),P}),C={"Sr No":"",Date:"",Project:"","Expense Type":"","Expense Category":"Total",Qty:we,Price:"","Base Amount":m(d),"Payment By":"","Payment Type":"",Contact:"","Bank Name":"","Account Number":"","IFSC Code":"","Transaction ID":"",About:"",Notes:""};for(let s=1;s<=E;s++)C[`Photo ${s}`]="",C[`Photo ${s} Remark`]="";C["GST (%)"]="",C["CGST (%)"]="",C["CGST Amount"]=m(K),C["SGST (%)"]="",C["SGST Amount"]=m(ee),C["IGST (%)"]="",C["IGST Amount"]=m(te),C["Total GST"]=m(K+ee+te),C["Total Amount"]=m(R),T.push(C);const v=[["EXPENSE REPORT"],[`Period: ${u.start_date||"All"} to ${u.end_date||"All"}`],[`Generated on: ${new Date().toLocaleDateString("en-GB")}`],[""]],A=["Sr No","Date","Project","Expense Type","Expense Category","Qty","Price","Base Amount","Payment By","Payment Type","Contact","Bank Name","Account Number","IFSC Code","Transaction ID","About","Notes"];for(let s=1;s<=E;s++)A.push(`Photo ${s}`),A.push(`Photo ${s} Remark`);A.push("GST (%)","CGST (%)","CGST Amount","SGST (%)","SGST Amount","IGST (%)","IGST Amount","Total GST","Total Amount");const n=F.aoa_to_sheet([]);F.sheet_add_aoa(n,v,{origin:"A1"}),F.sheet_add_aoa(n,[A],{origin:"A5"}),F.sheet_add_json(n,T,{origin:"A6",skipHeader:!0});const H=[{wch:6},{wch:12},{wch:20},{wch:20},{wch:18},{wch:8},{wch:12},{wch:14},{wch:15},{wch:15},{wch:15},{wch:18},{wch:18},{wch:14},{wch:16},{wch:20},{wch:20}];for(let s=1;s<=E;s++)H.push({wch:30}),H.push({wch:25});H.push({wch:10},{wch:10},{wch:12},{wch:10},{wch:12},{wch:10},{wch:12},{wch:12},{wch:14}),n["!cols"]=H;const V=F.decode_range(n["!ref"]),D=n.A1;D&&(D.s={font:{bold:!0,sz:18,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"2980B9"}},alignment:{horizontal:"center",vertical:"center"}}),n["!merges"]||(n["!merges"]=[]),n["!merges"].push({s:{r:0,c:0},e:{r:0,c:26}});for(let s=1;s<=2;s++){const a=n[F.encode_cell({r:s,c:0})];a&&(a.s={font:{bold:!0,sz:11,color:{rgb:"34495E"}},alignment:{horizontal:"center"}}),n["!merges"].push({s:{r:s,c:0},e:{r:s,c:26}})}const L=4;for(let s=0;s<A.length;s++){const a=n[F.encode_cell({r:L,c:s})];a&&(a.s={font:{bold:!0,sz:11,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"2C3E50"}},alignment:{horizontal:"center",vertical:"center",wrapText:!0},border:{top:{style:"medium",color:{rgb:"000000"}},bottom:{style:"medium",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}}}})}const b=5,k=b+T.length-1;for(let s=b;s<=k;s++){const a=s===k,g=a?"E74C3C":(s-b)%2===0?"FFFFFF":"ECF0F1",r=a?"FFFFFF":"000000";for(let h=0;h<A.length;h++){const N=n[F.encode_cell({r:s,c:h})];N&&(N.s={font:{sz:10,bold:a,color:{rgb:r}},fill:{fgColor:{rgb:g}},alignment:{horizontal:h===0||h>=5&&h<=7||h>=18?"right":"left",vertical:"center",wrapText:!0},border:{top:{style:a?"medium":"thin",color:{rgb:a?"000000":"BDC3C7"}},bottom:{style:a?"medium":"thin",color:{rgb:a?"000000":"BDC3C7"}},left:{style:"thin",color:{rgb:a?"000000":"BDC3C7"}},right:{style:"thin",color:{rgb:a?"000000":"BDC3C7"}}}})}}const S=b;for(let s=0;s<$.length;s++){const a=$[s];for(let g=1;g<=E;g++){const r=A.indexOf(`Photo ${g}`),h=F.encode_cell({r:S+s,c:r});let N=null,w="-";if(a.photos&&a.photos[g-1]){const oe=a.photos[g-1];N=`${J}/${oe.photo_url.replace(/\\/g,"/")}`,w=oe.remark||`Photo ${g}`}else g===1&&a.photo_url&&a.photo_url!=="NA"&&(N=`${J}/${a.photo_url.replace(/\\/g,"/")}`,w=a.photo_url.split("/").pop());N?n[h]={t:"s",v:w,l:{Target:N,Tooltip:"Click to view photo"},s:{font:{color:{rgb:"0563C1"},underline:!0,sz:10},alignment:{horizontal:"left",vertical:"center",wrapText:!0}}}:n[h]={t:"s",v:"-",s:{font:{color:{rgb:"000000"},sz:10},alignment:{horizontal:"center",vertical:"center"}}}}}const z=k+2,se=xe.find(s=>s.id===parseInt(u.project_id)),de=O.find(s=>s.id===parseInt(u.expense_type_id)),W=[["FILTERS APPLIED"],[""],["Total Records",$.length]];se&&W.push(["Project",se.project_name]),de&&W.push(["Expense Type",de.name]),F.sheet_add_aoa(n,W,{origin:F.encode_cell({r:z,c:0})});const B=n[F.encode_cell({r:z,c:0})];B&&(B.s={font:{bold:!0,sz:14,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"16A085"}},alignment:{horizontal:"center",vertical:"center"}}),n["!merges"].push({s:{r:z,c:0},e:{r:z,c:7}});for(let s=2;s<W.length;s++){const a=z+s,g=n[F.encode_cell({r:a,c:0})],r=n[F.encode_cell({r:a,c:1})];g&&(g.s={font:{bold:!0,sz:10},fill:{fgColor:{rgb:"F0F8FF"}},alignment:{horizontal:"left",vertical:"center"}}),r&&(r.s={font:{sz:10},fill:{fgColor:{rgb:"F0F8FF"}},alignment:{horizontal:"left",vertical:"center"}}),n["!merges"].push({s:{r:a,c:1},e:{r:a,c:7}})}n["!rows"]=[],n["!rows"][0]={hpt:30},n["!rows"][L]={hpt:25},n["!rows"][z]={hpt:25},n["!rows"][k]={hpt:30},F.book_append_sheet(f,n,"Expense Report");const je=`Expense_Report_${u.start_date||"All"}_to_${u.end_date||"All"}_${new Date().toISOString().split("T")[0]}.xlsx`;St(f,je,{cellStyles:!0}),X("success",`Excel file downloaded successfully! Each photo is in a separate column. Total photos columns: ${E>0?E:"none"}.`)}catch(f){console.error("Error generating Excel:",f),X("danger","Error generating Excel file: "+f.message)}},ns=()=>{gt();const{showToast:u}=xt(),{t:xe}=wt("global"),O=jt(),[R,$]=c.useState({}),[Z,m]=c.useState([]),[Se,X]=c.useState(0),[J,K]=c.useState(null),[ee,te]=c.useState(!1),[we,d]=c.useState(!1),[f,E]=c.useState("");c.useState("");const[T,C]=c.useState(!1),[v,A]=c.useState(null),[n,H]=c.useState({key:null,direction:"asc"}),[V,D]=c.useState(!1),[L,b]=c.useState(!1),[k,S]=c.useState(null),[z,se]=c.useState(!1),[de,W]=c.useState(window.innerWidth<=768),[B,je]=c.useState(""),[s,a]=c.useState(!1),[g,r]=c.useState(""),[h,N]=c.useState(!1),[w,oe]=c.useState([]),[U,re]=c.useState(0),[le,Te]=c.useState([]),[ne,P]=c.useState([]),[j,ve]=c.useState({start_date:"",end_date:"",project_id:"",expense_type_id:""}),ae=c.useRef(null),G=c.useRef(null),q=c.useRef(null),ce=c.useRef(0),Q=c.useRef(!1),ot=async()=>{try{const t=await De("/api/projects");Te(t||[])}catch(t){u("danger","Error fetching projects: "+t)}},rt=async()=>{try{const t=await De("/api/expenseType");P(t||[]);const o=t.reduce((l,i)=>(l[i.id]=i.name,l),{});$(o)}catch(t){u("danger","Error fetching expense types: "+t)}},Ne=t=>{const{name:o,value:l}=t.target;ve({...j,[o]:l})},fe=async(t=!0)=>{if((!j.start_date||!j.end_date)&&!j.project_id&&!j.expense_type_id){u("warning","Please select dates or at least one filter (Project or Expense Type)");return}t?(D(!0),Q.current=!1):b(!0);try{let o="/api/expense?";const l=[];j.start_date&&j.end_date&&(l.push(`startDate=${j.start_date}`),l.push(`endDate=${j.end_date}`)),j.project_id&&l.push(`customerId=${j.project_id}`),j.expense_type_id&&l.push(`expenseTypeId=${j.expense_type_id}`),k&&!t&&l.push(`cursor=${k}`),o+=l.join("&");const i=await De(o);if(i.error)u("danger",i.error);else{const p=t?i.data:[...Z,...i.data];m(p),X(i.totalExpense||0),S(i.next_cursor||null),se(i.has_more_pages),Q.current&&!t&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{ae.current&&(ae.current.scrollTop=ce.current),Q.current=!1})})}}catch(o){u("danger","Error occurred: "+o)}finally{D(!1),b(!1)}},lt=async t=>{try{const o=t.currentTarget;t.preventDefault(),t.stopPropagation(),d(!0),o.checkValidity()&&(Q.current=!1,ce.current=0,S(null),await fe(!0))}catch(o){u("danger","Error occurred: "+o)}},nt=c.useCallback(()=>{q.current&&clearTimeout(q.current),q.current=setTimeout(()=>{const t=ae.current;if(!t)return;const{scrollTop:o,scrollHeight:l,clientHeight:i}=t,p=100;ce.current=o,o+i>=l-p&&z&&!L&&!V&&(Q.current=!0,fe(!1))},100)},[z,L,V]);c.useCallback(t=>{G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{E(t)},300)},[]);const Ue=t=>{K(t),te(!0)},at=async()=>{try{await ft("/api/expense/"+J.id),te(!1),fe(!0),u("success",xe("MSG.expense_deleted_successfully")||"Expense deleted successfully")}catch(t){u("danger","Error occurred: "+t)}},Qe=async t=>{try{await yt("/api/expense/"+t.id,{...t,show:!t.show}),fe(!0)}catch(o){u("danger","Error occurred: "+o)}},ke=t=>{A(t),C(!0)},ct=()=>{fe(!0)},Ye=t=>{t.photos&&Array.isArray(t.photos)&&t.photos.length>0?(oe(t.photos),re(0),N(!0)):t.photo_url&&t.photo_url!=="NA"?(r(t.photo_url||""),a(!0)):u("info","No photos available for this expense")},Oe=(t,o)=>{const l=t.split("/").pop(),i=document.createElement("a");i.href=`/${t}`,i.download=l,document.body.appendChild(i),i.click(),document.body.removeChild(i)},he=t=>{let o="asc";n.key===t&&n.direction==="asc"&&(o="desc"),H({key:t,direction:o})},me=t=>n.key===t?n.direction==="asc"?"â†‘":"â†“":"â†•",pe=t=>({marginLeft:"8px",fontSize:"14px",opacity:n.key===t?1:.5,color:n.key===t?"#0d6efd":"#6c757d",transition:"all 0.2s ease"}),ye=t=>{const o=parseFloat(t)||0;if(isNaN(o))return"0.00";const[l,i="00"]=o.toFixed(2).split("."),p=l.slice(-3),M=l.slice(0,-3);return`${M.length>0?M.replace(/\B(?=(\d{2})+(?!\d))/g,",")+","+p:p}.${i}`},ie=t=>`Rs ${ye(t)}`,Fe=t=>{const o={day:"numeric",month:"short",year:"numeric"},i=new Date(t).toLocaleDateString("en-US",o).replace(",",""),[p,M]=i.split(" ");return`${M} ${p}`},it=()=>{Gt(j,le,ne,Pe,x,R,ye,Fe,u,Ge,Ae,ze)},dt=()=>{At(j,le,ne,Pe,x,R,ye,Fe,u,window.location.origin,Ge,Ae,ze,ht,mt)},x=c.useMemo(()=>{let t=Z.map((o,l)=>({...o,sr_no:l+1}));if(f.trim()){const o=f.toLowerCase();t=t.filter(l=>{var i,p,M,ue,_e,Ce,Ze,Xe,Je;return((i=R[l.expense_id])==null?void 0:i.toLowerCase().includes(o))||((p=l.expense_date)==null?void 0:p.toLowerCase().includes(o))||((M=l.total_price)==null?void 0:M.toString().includes(f))||((ue=l.contact)==null?void 0:ue.toLowerCase().includes(o))||((_e=l.desc)==null?void 0:_e.toLowerCase().includes(o))||((Ce=l.payment_by)==null?void 0:Ce.toLowerCase().includes(o))||((Ze=l.payment_type)==null?void 0:Ze.toLowerCase().includes(o))||((Je=(Xe=l.project)==null?void 0:Xe.project_name)==null?void 0:Je.toLowerCase().includes(o))})}return B==="gst"?t=t.filter(o=>o.isGst===1||o.isGst===!0):B==="non-gst"&&(t=t.filter(o=>o.isGst===0||o.isGst===!1)),n.key?[...t].sort((o,l)=>{var M,ue,_e,Ce;let i=o[n.key],p=l[n.key];return n.key==="expense_type"?(i=R[o.expense_id]||"",p=R[l.expense_id]||""):n.key==="customer_name"?(i=((M=o.project)==null?void 0:M.project_name)||"",p=((ue=l.project)==null?void 0:ue.project_name)||""):n.key==="category"&&(i=((_e=o.expense_type)==null?void 0:_e.expense_category)||"",p=((Ce=l.expense_type)==null?void 0:Ce.expense_category)||""),typeof i=="string"&&(i=i.toLowerCase()),typeof p=="string"&&(p=p.toLowerCase()),i<p?n.direction==="asc"?-1:1:i>p?n.direction==="asc"?1:-1:0}):t},[Z,f,n,R,B]),Pe=c.useMemo(()=>x.reduce((t,o)=>t+parseFloat(o.total_price||0),0),[x]),ht=c.useMemo(()=>x.reduce((t,o)=>t+parseFloat(o.qty||0),0),[x]);c.useMemo(()=>x.reduce((t,o)=>t+parseFloat(o.price||0),0),[x]);const mt=c.useMemo(()=>x.reduce((t,o)=>{const l=parseFloat(o.qty||0),i=parseFloat(o.price||0);return t+l*i},0),[x]),Ge=c.useMemo(()=>x.reduce((t,o)=>t+parseFloat(o.cgst||0),0),[x]),Ae=c.useMemo(()=>x.reduce((t,o)=>t+parseFloat(o.sgst||0),0),[x]),ze=c.useMemo(()=>x.reduce((t,o)=>t+parseFloat(o.igst||0),0),[x]),pt=c.useMemo(()=>x.reduce((t,o)=>t+parseFloat(o.gst||0),0),[x]);c.useEffect(()=>{ot(),rt()},[]),c.useEffect(()=>{const t=()=>{W(window.innerWidth<=768)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),c.useEffect(()=>()=>{G.current&&clearTimeout(G.current),q.current&&clearTimeout(q.current)},[]);const ut=t=>{var o,l;return e.jsx(qe,{className:"mb-3 expense-card",children:e.jsxs(He,{children:[e.jsxs("div",{className:"card-row-1",children:[e.jsxs("div",{className:"expense-name-section",children:[e.jsx("div",{className:"expense-name",children:R[t.expense_id]||"N/A"}),e.jsx("div",{className:"expense-type",children:e.jsx("span",{className:"category-text",children:t.sr_no})})]}),e.jsxs("div",{className:"expense-total",children:[e.jsx("div",{className:"total-amount",children:ie(t.total_price)}),e.jsx("div",{className:"total-label",children:"Amount"})]})]}),e.jsxs("div",{className:"card-row-2",children:[e.jsxs("div",{className:"expense-date",children:["ðŸ“… ",Fe(t.expense_date)]}),e.jsx("div",{className:"expense-details",children:e.jsx("span",{className:"detail-item",children:((o=t.project)==null?void 0:o.project_name)||"-"})})]}),e.jsx("div",{className:"card-row-2",children:e.jsxs("div",{className:"expense-details",children:[e.jsxs("span",{className:"detail-item",children:["Category: ",((l=t.expense_type)==null?void 0:l.expense_category)||"-"]}),e.jsxs("span",{className:"detail-item",children:["Qty: ",t.qty||"-"]})]})}),e.jsx("div",{className:"card-row-2",children:e.jsxs("div",{className:"expense-details",children:[e.jsxs("span",{className:"detail-item",children:["Price: Rs ",ye(t.price||0)]}),e.jsx("span",{className:"detail-item",children:t.isGst?e.jsxs(e.Fragment,{children:["GST: ",t.gst||0,"Rs | CGST: ",t.cgst||0,"Rs | SGST: ",t.sgst||0,"Rs | IGST: ",t.igst||0,"Rs"]}):"Non-GST"})]})}),e.jsx("div",{className:"card-row-2",children:e.jsxs("div",{className:"expense-details",children:[e.jsx("span",{className:"detail-item",children:t.contact||"-"}),e.jsx("span",{className:"detail-item",children:t.payment_by||"-"})]})}),e.jsx("div",{className:"card-row-2",children:e.jsxs("div",{className:"expense-details",children:[e.jsx("span",{className:"detail-item",children:t.payment_type||"-"}),e.jsx("span",{className:"detail-item",children:t.bank_name||"-"})]})}),e.jsx("div",{className:"card-row-3",children:e.jsx("div",{className:"expense-details",children:e.jsxs("span",{className:"detail-item",children:["Acc: ",t.account_number||"-"," IFSC: ",t.ifsc_code||"-"," Trans: ",t.transaction_id||"-"]})})}),e.jsx("div",{className:"card-row-3",children:e.jsx("div",{className:"expense-details",children:e.jsx("span",{className:"detail-item",children:t.name||"-"})})}),e.jsx("div",{className:"card-row-3",children:e.jsx("div",{className:"expense-details",children:e.jsx("span",{className:"detail-item",children:t.photo_remark||"-"})})}),e.jsx("div",{className:"card-row-3",children:e.jsxs("div",{className:"action-buttons-mobile",children:[O===1&&e.jsx("button",{className:"badge bg-info",onClick:()=>Qe(t),role:"button",children:t.show?"Valid":"Invalid"}),e.jsx("button",{className:"badge bg-primary",onClick:()=>ke(t),role:"button",children:"Edit"}),O===1&&e.jsx("button",{className:"badge bg-danger",onClick:()=>Ue(t),role:"button",children:"Delete"}),(t.photos&&t.photos.length>0||t.photo_url&&t.photo_url!=="NA")&&e.jsxs("button",{className:"badge bg-secondary",onClick:()=>Ye(t),role:"button",children:["View ",t.photos&&t.photos.length>1?`(${t.photos.length})`:""]})]})})]})},t.id)};return V&&!L?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(Re,{color:"primary",size:"lg"}),e.jsx("p",{className:"mt-3 text-muted",children:"Loading expenses..."})]})}):(le.find(t=>t.id===parseInt(j.project_id)),ne.find(t=>t.id===parseInt(j.expense_type_id)),e.jsxs(e.Fragment,{children:[e.jsx("style",{jsx:!0,global:!0,children:`
        .expense-card {
          border: 1px solid #dee2e6;
          border-radius: 8px;
          box-shadow: 0 1px 4px rgba(0,0,0,0.1);
          transition: all 0.3s ease;
        }
        .expense-card:hover {
          transform: translateY(-1px);
          box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        .expense-card .card-body {
          padding: 12px !important;
        }
        .card-row-1 {
          display: flex;
          justify-content: space-between;
          margin-bottom: 8px;
        }
        .expense-name {
          font-weight: 600;
          font-size: 1em;
          color: #333;
        }
        .expense-total {
          text-align: right;
        }
        .total-amount {
          font-weight: 600;
          font-size: 1.1em;
          color: #d32f2f;
        }
        .card-row-2, .card-row-3 {
          margin-bottom: 8px;
          padding: 4px 0;
          border-top: 1px solid #f0f0f0;
        }
        .action-buttons-mobile {
          display: flex;
          gap: 8px;
          flex-wrap: wrap;
        }
        .action-buttons-mobile .badge {
          font-size: 0.85em;
          padding: 6px 12px;
          border-radius: 16px;
          cursor: pointer;
        }
        .table-container {
          height: 350px;
          overflow-y: auto;
          border: 1px solid #dee2e6;
          border-radius: 0.375rem;
        }
        .expenses-table thead th {
          position: sticky;
          top: 0;
          z-index: 10;
          background-color: #f8f9fa;
          border-bottom: 2px solid #dee2e6;
        }
        .search-container {
          position: relative;
        }
        .search-input {
          padding-left: 40px;
        }
        .search-icon {
          position: absolute;
          left: 12px;
          top: 50%;
          transform: translateY(-50%);
          color: #6c757d;
        }
        .clear-search {
          position: absolute;
          right: 12px;
          top: 50%;
          transform: translateY(-50%);
          background: none;
          border: none;
          color: #6c757d;
          cursor: pointer;
        }
        .summary-container {
          margin-bottom: 20px;
          padding: 10px;
          background-color: #f8f9fa;
          border: 1px solid #dee2e6;
          border-radius: 0.375rem;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        .summary-item {
          flex: 1;
          text-align: center;
          font-weight: 500;
        }
        .summary-item strong {
          display: block;
          font-size: 0.9em;
          color: #555;
        }
      `}),e.jsx(Ct,{visible:T,onClose:()=>C(!1),expense:v,onExpenseUpdated:ct}),e.jsxs($e,{visible:s,onClose:()=>a(!1),children:[e.jsx(Le,{children:e.jsx(Me,{children:"View File"})}),e.jsx(Ie,{children:g?(()=>{const t=g.split("/").pop(),o=`/${g}`,l=t.split(".").pop().toLowerCase();return l==="pdf"?e.jsx("iframe",{src:o,title:"PDF Preview",style:{width:"100%",height:"70vh",border:"none"}}):["jpg","jpeg","png"].includes(l)?e.jsx("img",{src:o,alt:"Expense",style:{maxWidth:"100%",maxHeight:"70vh",display:"block",margin:"auto"}}):e.jsx("p",{style:{color:"red",textAlign:"center"},children:"Unsupported file type"})})():e.jsx("p",{style:{color:"red",textAlign:"center"},children:"File not available"})}),e.jsx(Be,{children:e.jsx(I,{color:"secondary",onClick:()=>a(!1),children:"Close"})})]}),e.jsxs($e,{visible:h,onClose:()=>N(!1),size:"lg",scrollable:!0,children:[e.jsx(Le,{style:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:e.jsxs(Me,{children:[e.jsx("strong",{children:"Expense Photos"}),e.jsx(Y,{color:"primary",className:"ms-2",children:w.length})]})}),e.jsx(Ie,{style:{padding:"20px",backgroundColor:"#fff"},children:w.length>0?e.jsx("div",{className:"row g-3",children:w.map((t,o)=>{t.photo_url.split("/").pop().split(".")[0];const l=t.photo_url.split(".").pop(),i=t.remark?t.remark:`Photo ${o+1}`;return e.jsx("div",{className:"col-6 col-md-4",children:e.jsxs(qe,{className:"h-100",style:{transition:"all 0.2s",cursor:"pointer",border:"1px solid #dee2e6"},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-4px)",p.currentTarget.style.boxShadow="0 8px 16px rgba(0,0,0,0.1)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="none"},children:[e.jsxs("div",{style:{height:"160px",backgroundColor:"#f8f9fa",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",borderBottom:"1px solid #dee2e6",position:"relative"},onClick:()=>{re(o),a(!0),r(t.photo_url)},children:[t.photo_type==="pdf"?e.jsxs("div",{className:"text-center p-3",children:[e.jsx(ge,{icon:et,size:"3xl",style:{color:"#dc3545"}}),e.jsx("div",{className:"mt-2",children:e.jsx(Y,{color:"danger",style:{fontSize:"0.7rem"},children:"PDF"})})]}):e.jsx("img",{src:`/${t.photo_url}`,alt:i,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}}),e.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100",style:{backgroundColor:"rgba(0,0,0,0)",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="rgba(0,0,0,0.5)",p.currentTarget.querySelector(".preview-icon").style.opacity="1"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="rgba(0,0,0,0)",p.currentTarget.querySelector(".preview-icon").style.opacity="0"},children:e.jsx("div",{className:"preview-icon",style:{opacity:0,transition:"opacity 0.2s",color:"white",fontSize:"1.5rem",fontWeight:"bold"},children:"ðŸ‘ï¸ View"})})]}),e.jsxs(He,{style:{padding:"12px"},children:[e.jsx("div",{className:"text-truncate mb-2",style:{fontSize:"0.875rem",fontWeight:"600",color:"#212529"},title:i,children:i}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx("small",{className:"text-muted",style:{fontSize:"0.75rem"},children:t.file_size?`${t.file_size} KB`:l.toUpperCase()}),e.jsx(Y,{color:"light",style:{fontSize:"0.65rem",color:"#6c757d",border:"1px solid #dee2e6"},children:l.toUpperCase()})]}),e.jsxs(I,{color:"primary",size:"sm",className:"w-100",onClick:p=>{p.stopPropagation(),Oe(t.photo_url)},style:{fontSize:"0.75rem",padding:"6px"},children:[e.jsx(ge,{icon:tt,size:"sm"})," Download"]}),t.remark&&t.remark!==i&&e.jsx("div",{className:"mt-2 p-2",style:{backgroundColor:"#f8f9fa",borderRadius:"4px",fontSize:"0.7rem",color:"#6c757d",borderLeft:"2px solid #0d6efd"},children:e.jsx("div",{className:"text-truncate",title:t.remark,children:t.remark})})]})]})},t.id)})}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx(ge,{icon:et,size:"4xl",className:"text-muted mb-3"}),e.jsx("h6",{className:"text-muted",children:"No photos available"}),e.jsx("p",{className:"text-muted small",children:"This expense has no photos attached."})]})}),e.jsx(Be,{style:{backgroundColor:"#f8f9fa",borderTop:"2px solid #dee2e6"},children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center w-100",children:[e.jsx("small",{className:"text-muted",children:"Click on any photo to view full size"}),e.jsx(I,{color:"secondary",onClick:()=>N(!1),children:"Close"})]})})]}),e.jsxs($e,{visible:s&&g&&h===!1,onClose:()=>{a(!1),r("")},size:"xl",children:[e.jsx(Le,{children:e.jsxs(Me,{children:["Photo ",U+1," of ",w.length]})}),e.jsx(Ie,{style:{backgroundColor:"#000",padding:0},children:g&&e.jsxs("div",{className:"d-flex align-items-center justify-content-center position-relative",style:{minHeight:"70vh"},children:[U>0&&e.jsx(I,{color:"light",className:"position-absolute start-0 ms-3",onClick:()=>{const t=U-1;re(t),r(w[t].photo_url)},style:{zIndex:10},children:e.jsx(ge,{icon:kt,size:"lg"})}),(()=>{const t=g.split(".").pop().toLowerCase(),o=`/${g}`;return t==="pdf"?e.jsx("iframe",{src:o,title:"PDF Preview",style:{width:"100%",height:"70vh",border:"none"}}):e.jsx("img",{src:o,alt:"Full size",style:{maxWidth:"100%",maxHeight:"70vh",objectFit:"contain"}})})(),U<w.length-1&&e.jsx(I,{color:"light",className:"position-absolute end-0 me-3",onClick:()=>{const t=U+1;re(t),r(w[t].photo_url)},style:{zIndex:10},children:e.jsx(ge,{icon:Pt,size:"lg"})})]})}),e.jsxs(Be,{children:[e.jsxs(I,{color:"primary",onClick:()=>Oe(g),children:[e.jsx(ge,{icon:tt})," Download"]}),e.jsx(I,{color:"secondary",onClick:()=>{a(!1),r("")},children:"Close"})]})]}),e.jsxs(Ke,{children:[e.jsx(_t,{visible:ee,setVisible:te,onYes:at,resource:"Delete expense"}),e.jsx(Ee,{xs:12,children:e.jsxs(qe,{className:"mb-4",children:[e.jsxs(Tt,{children:[e.jsx("strong",{children:"Expense Report"}),e.jsxs("span",{className:"ms-2 text-muted",children:["Total ",x.length," expenses"]})]}),e.jsxs(He,{children:[e.jsx(vt,{noValidate:!0,validated:we,onSubmit:lt,children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(be,{htmlFor:"project_id",children:"Project"}),e.jsxs(Ve,{id:"project_id",name:"project_id",value:j.project_id,onChange:Ne,children:[e.jsx("option",{value:"",children:"All Projects"}),le.map(t=>e.jsx("option",{value:t.id,children:t.project_name},t.id))]})]})}),e.jsx("div",{className:"col-sm-2",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(be,{htmlFor:"start_date",children:"Start Date"}),e.jsx(st,{type:"date",id:"start_date",name:"start_date",value:j.start_date,onChange:Ne})]})}),e.jsx("div",{className:"col-sm-2",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(be,{htmlFor:"end_date",children:"End Date"}),e.jsx(st,{type:"date",id:"end_date",name:"end_date",value:j.end_date,onChange:Ne})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(be,{htmlFor:"expense_type_id",children:"Expense Type"}),e.jsxs(Ve,{id:"expense_type_id",name:"expense_type_id",value:j.expense_type_id,onChange:Ne,children:[e.jsx("option",{value:"",children:"All Expense Types"}),ne.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})}),e.jsx("div",{className:"col-sm-2",children:e.jsx("div",{className:"mb-1 mt-4",children:e.jsx(I,{color:"success",type:"submit",disabled:V,className:"w-100",children:V?"Loading...":"Submit"})})})]})}),e.jsx("hr",{}),e.jsxs(Ke,{className:"mb-3",children:[e.jsx(Ee,{xs:12,md:6,lg:3,children:e.jsxs("div",{className:"mb-1",children:[e.jsx(be,{htmlFor:"gstFilter",children:"GST/Non-GST"}),e.jsxs(Ve,{id:"gstFilter",value:B,onChange:t=>je(t.target.value),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"gst",children:"GST"}),e.jsx("option",{value:"non-gst",children:"Non-GST"})]})]})}),e.jsx(Ee,{xs:12,md:6,lg:3,children:e.jsxs("div",{className:"d-flex gap-2 mt-4",children:[e.jsx(I,{color:"primary",onClick:dt,disabled:!x.length,children:"Download Excel"}),e.jsx(I,{color:"warning",onClick:it,disabled:!x.length,children:"Download PDF"})]})}),f&&e.jsx(Ee,{xs:12,className:"mt-2",children:e.jsxs("small",{className:"text-muted",children:[x.length,' expenses found for "',f,'"']})})]}),de?e.jsxs("div",{className:"mobile-cards-container",children:[x.length===0?e.jsx("div",{className:"text-center text-muted py-4",children:e.jsx("p",{children:"No expenses found"})}):x.map(ut),L&&e.jsxs("div",{className:"loading-more",children:[e.jsx(Re,{color:"primary",size:"sm"}),e.jsx("span",{className:"ms-2 text-muted",children:"Loading more..."})]})]}):e.jsxs(e.Fragment,{children:[x.length>0&&e.jsxs("div",{className:"summary-container",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"Total Amount"}),ie(Pe)]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"GST"}),ie(pt)]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"CGST"}),ie(Ge)]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"SGST"}),ie(Ae)]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"IGST"}),ie(ze)]})]}),e.jsxs("div",{className:"table-container",ref:ae,onScroll:nt,children:[e.jsx("div",{className:"table-responsive",children:e.jsxs(Nt,{className:"expenses-table",children:[e.jsx(Ft,{children:e.jsxs(We,{children:[e.jsxs(_,{onClick:()=>he("sr_no"),style:{cursor:"pointer"},children:["Sr No ",e.jsx("span",{style:pe("sr_no"),children:me("sr_no")})]}),e.jsxs(_,{onClick:()=>he("expense_date"),style:{cursor:"pointer"},children:["Date ",e.jsx("span",{style:pe("expense_date"),children:me("expense_date")})]}),e.jsxs(_,{onClick:()=>he("customer_name"),style:{cursor:"pointer"},children:["Project ",e.jsx("span",{style:pe("customer_name"),children:me("customer_name")})]}),e.jsxs(_,{onClick:()=>he("expense_type"),style:{cursor:"pointer"},children:["Expense Type ",e.jsx("span",{style:pe("expense_type"),children:me("expense_type")})]}),e.jsx(_,{children:"Category"}),e.jsx(_,{children:"Qty"}),e.jsxs(_,{onClick:()=>he("price"),style:{cursor:"pointer"},children:["Price ",e.jsx("span",{style:pe("price"),children:me("price")})]}),e.jsxs(_,{onClick:()=>he("total_price"),style:{cursor:"pointer"},children:["Total ",e.jsx("span",{style:pe("total_price"),children:me("total_price")})]}),e.jsx(_,{children:"GST Rs"}),e.jsx(_,{children:"CGST Rs"}),e.jsx(_,{children:"SGST Rs"}),e.jsx(_,{children:"IGST Rs"}),e.jsx(_,{children:"Payment By"}),e.jsx(_,{children:"Payment Type"}),e.jsx(_,{children:"Contact"}),e.jsx(_,{children:"Bank Name"}),e.jsx(_,{children:"Account Number"}),e.jsx(_,{children:"IFSC"}),e.jsx(_,{children:"Transaction ID"}),e.jsx(_,{children:"About"}),e.jsx(_,{children:"Notes"}),e.jsx(_,{children:"Actions"})]})}),e.jsx(Et,{children:x.length===0?e.jsx(We,{children:e.jsx(y,{colSpan:22,className:"text-center py-4",children:e.jsx("p",{children:"No expenses found"})})}):x.map(t=>{var o,l;return e.jsxs(We,{children:[e.jsx(y,{children:t.sr_no}),e.jsx(y,{children:Fe(t.expense_date)}),e.jsx(y,{children:((o=t.project)==null?void 0:o.project_name)||"-"}),e.jsx(y,{children:R[t.expense_id]||"-"}),e.jsx(y,{children:((l=t.expense_type)==null?void 0:l.expense_category)||"-"}),e.jsx(y,{children:t.qty||"-"}),e.jsx(y,{children:t.price?ye(t.price):"-"}),e.jsx(y,{children:e.jsx("span",{style:{fontWeight:"500",color:"#dc3545"},children:ie(t.total_price)})}),e.jsx(y,{children:t.isGst&&t.gst!==null?`${t.gst}Rs`:"-"}),e.jsx(y,{children:t.isGst&&t.cgst!==null?`${t.cgst}Rs`:"-"}),e.jsx(y,{children:t.isGst&&t.sgst!==null?`${t.sgst}Rs`:"-"}),e.jsx(y,{children:t.isGst&&t.igst!==null?`${t.igst}Rs`:"-"}),e.jsx(y,{children:t.payment_by||"-"}),e.jsx(y,{children:t.payment_type||"-"}),e.jsx(y,{children:t.contact||"-"}),e.jsx(y,{children:t.bank_name||"-"}),e.jsx(y,{children:t.acc_number||"-"}),e.jsx(y,{children:t.ifsc||"-"}),e.jsx(y,{children:t.transaction_id||"-"}),e.jsx(y,{children:t.name||"-"}),e.jsx(y,{children:t.photo_remark||"-"}),e.jsx(y,{children:e.jsxs("div",{className:"action-buttons",children:[O===1?e.jsxs(e.Fragment,{children:[e.jsx(Y,{role:"button",color:t.show?"success":"danger",onClick:()=>Qe(t),style:{cursor:"pointer",fontSize:"0.75em"},children:t.show?"Valid":"Invalid"}),e.jsx(Y,{role:"button",color:"primary",onClick:()=>ke(t),style:{cursor:"pointer",fontSize:"0.75em"},children:"Edit"}),e.jsx(Y,{role:"button",color:"danger",onClick:()=>Ue(t),style:{cursor:"pointer",fontSize:"0.75em"},children:"Delete"})]}):e.jsx(Y,{role:"button",color:"primary",onClick:()=>ke(t),style:{cursor:"pointer",fontSize:"0.75em"},children:"Edit"}),(t.photos&&t.photos.length>0||t.photo_url&&t.photo_url!=="NA")&&e.jsxs(Y,{role:"button",color:"secondary",onClick:()=>Ye(t),style:{cursor:"pointer",fontSize:"0.75em"},children:["View ",t.photos&&t.photos.length>1?`(${t.photos.length})`:""]})]})})]},t.id)})})]})}),L&&e.jsxs("div",{className:"loading-more",children:[e.jsx(Re,{color:"primary",size:"sm"}),e.jsx("span",{className:"ms-2 text-muted",children:"Loading more..."})]})]})]})]})]})})]})]}))};export{ns as default};
