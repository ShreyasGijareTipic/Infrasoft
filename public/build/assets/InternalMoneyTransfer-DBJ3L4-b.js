import{r as a,j as e,C as X}from"./index-RpBzfmRP.js";import{c as T,a as z,b as j}from"./index.esm-DUetlGrP.js";import{a as ke,b as Ft,p as _t,d as At}from"./api-CIBCEetx.js";import{r as $}from"./Feilds-BHjWXeSc.js";import{E as Pt}from"./jspdf.es.min-BUj3JTgq.js";import"./jspdf.plugin.autotable-D15hp-lf.js";import{C as It,a as Et}from"./CCardBody-CXkOMOvY.js";import{C as zt}from"./CCardHeader-eGsVFHQg.js";import{C as i}from"./CButton-L7dQWiht.js";import{c as Mt}from"./cil-plus-D8mtC-W5.js";import{c as Rt}from"./cil-cloud-download-CPU_poQw.js";import{C as st}from"./cil-mobile-BmZiFZXB.js";import{C as f}from"./CFormLabel-CbpozHkd.js";import{C as _}from"./CFormInput-DA1SntO8.js";import{C as K}from"./CFormSelect-C4Gr2yJD.js";import{C as Lt,a as kt,b as nt,c as M,d as Ot,e as R}from"./CTable-CQX9REJw.js";import{C as Ie,a as Ee,b as ze,c as Me,d as Re,e as Le}from"./DefaultLayout-8YNBKV_4.js";import{c as Yt}from"./cil-pencil-m516yCOw.js";import{c as Wt}from"./cil-trash-CBbKHhHb.js";import{C as $t}from"./CInputGroup-zC7AuBYL.js";import{C as Ht}from"./CInputGroupText-CmPlvCyb.js";import{c as Gt}from"./cil-search-CDkY_4k-.js";import{c as at}from"./cil-x-0440B5Ce.js";import{C as Qt}from"./CFormTextarea-CN7028pX.js";import{c as Ut}from"./cil-calendar-B69zOQSH.js";import{c as Bt}from"./cil-file-CeQgYs_D.js";import"./typeof-QjJsDpFa.js";import"./jspdf.es.min-CXwopnVh.js";import"./CFormControlWrapper-D2DOCb2Z.js";import"./RawMaterial-BtjEDAbB.js";var qt=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='364.118 67.313 433.373 136.568 160 136.568 160 168.568 433.373 168.568 364.118 237.823 386.745 260.45 494.628 152.568 386.745 44.687 364.118 67.313' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='147.882 267.882 125.255 245.255 17.373 353.137 125.255 461.02 147.882 438.393 78.627 369.137 352 369.137 352 337.137 78.627 337.137 147.882 267.882' class='ci-primary'/>"];const Jt=c=>new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(c),he=c=>`Rs ${Jt(c)}`,A=c=>c?new Date(c).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",Xt=async(c,C,b=null)=>{try{const h=new URLSearchParams;c&&h.append("start_date",c),C&&h.append("end_date",C),b&&b!=="all"&&h.append("account",b);const D=await ke(`/api/internal-money-transfers?${h.toString()}`);return D&&D.length>0?{transfers:D,total_amount:D.reduce((H,s)=>H+parseFloat(s.amount),0),total_transfers:D.length}:{transfers:[],total_amount:0,total_transfers:0}}catch(h){throw console.error("Error fetching transfer data:",h),new Error("Failed to fetch transfer data from server")}},Kt=async(c,C,b="all")=>{if(!c||!C)throw new Error("Please select date range");const{transfers:h,total_amount:D,total_transfers:H}=await Xt(c,C,b);if(!h||h.length===0)throw new Error("No transfer records found for the selected date range");const s=new Pt("l","mm","a4"),v=s.internal.pageSize.getWidth(),L=s.internal.pageSize.getHeight(),d=10,F=v-2*d;let r=15;s.setFontSize(20),s.setFont("helvetica","bold"),s.setTextColor(41,128,185),s.text("INTERNAL MONEY TRANSFER LOG",v/2,r,{align:"center"}),r+=7,s.setFontSize(10),s.setFont("helvetica","normal"),s.setTextColor(0,0,0),s.text(`Period: ${A(c)} to ${A(C)}`,v/2,r,{align:"center"}),b!=="all"&&(r+=5,s.text(`Account Filter: ${b}`,v/2,r,{align:"center"})),r+=5,s.setFontSize(8),s.setTextColor(100,100,100),s.text(`Generated on: ${A(new Date)}`,v/2,r,{align:"center"}),r+=8,r>L-100&&(s.addPage(),r=15),s.setFillColor(52,152,219),s.setDrawColor(41,128,185),s.setLineWidth(.2),s.rect(d,r,F,8,"FD"),s.setTextColor(255,255,255),s.setFontSize(10),s.setFont("helvetica","bold"),s.text("TRANSFER DETAILS",d+2,r+5.5),r+=10,s.setTextColor(0,0,0);const k=h.map(l=>{var x;return[A(l.transfer_date),((x=l.project)==null?void 0:x.project_name)||"-",l.from_account||"N/A",l.to_account||"N/A",he(parseFloat(l.amount||0)),l.reference_number||"N/A",l.description||"N/A"]}),Z=h.reduce((l,x)=>l+parseFloat(x.amount||0),0);s.autoTable({startY:r,head:[["Transfer Date","Project","From Account","To Account","Amount (Rs)","Reference Number","Description"]],body:k,foot:[[`Total Records: ${H}`,"","","",he(Z),"",""]],theme:"striped",styles:{fontSize:7,cellPadding:2.5,overflow:"linebreak",halign:"left",valign:"middle",lineColor:[200,200,200],lineWidth:.1},headStyles:{fillColor:[46,204,113],textColor:255,fontStyle:"bold",halign:"center",fontSize:7},footStyles:{fillColor:[236,240,241],textColor:[52,73,94],fontStyle:"bold",halign:"left",fontSize:7},columnStyles:{0:{cellWidth:25,halign:"center"},1:{cellWidth:35,halign:"left"},2:{cellWidth:40,halign:"left"},3:{cellWidth:40,halign:"left"},4:{cellWidth:30,halign:"right"},5:{cellWidth:30,halign:"left"},6:{cellWidth:67,halign:"left"}},margin:{left:d,right:d},didDrawPage:function(l){s.setFontSize(7),s.setTextColor(128,128,128),s.text(`Page ${s.internal.getCurrentPageInfo().pageNumber}`,v-d-15,L-5)}}),r=s.lastAutoTable.finalY+6;const p={};let G=!1;if(h.forEach(l=>{if(l.project_id&&l.project){G=!0;const x=l.project.project_name;p[x]||(p[x]={count:0,total:0}),p[x].count++,p[x].total+=parseFloat(l.amount)}}),G&&Object.keys(p).length>0){r>L-60?(s.addPage(),r=15):r+=5,s.setFillColor(149,165,166),s.setDrawColor(127,140,141),s.setLineWidth(.2),s.rect(d,r,F,8,"FD"),s.setTextColor(255,255,255),s.setFontSize(10),s.setFont("helvetica","bold"),s.text("PROJECT-WISE SUMMARY",d+2,r+5.5),r+=10;const l=Object.entries(p).map(([x,ee])=>[x,ee.count.toString(),he(ee.total)]);s.autoTable({startY:r,head:[["Project Name","Transfer Count","Total Amount (Rs)"]],body:l,theme:"striped",styles:{fontSize:8,cellPadding:3,overflow:"linebreak",halign:"left",valign:"middle",lineColor:[200,200,200],lineWidth:.1},headStyles:{fillColor:[52,152,219],textColor:255,fontStyle:"bold",halign:"center",fontSize:8},columnStyles:{0:{cellWidth:"auto",halign:"left"},1:{cellWidth:40,halign:"center"},2:{cellWidth:50,halign:"right"}},margin:{left:d,right:d}}),r=s.lastAutoTable.finalY+6}r>L-30?(s.addPage(),r=15):r+=5,s.setFillColor(41,128,185),s.setDrawColor(52,73,94),s.setLineWidth(.5),s.rect(d,r,F,12,"FD"),s.setTextColor(255,255,255),s.setFontSize(11),s.setFont("helvetica","bold"),s.text("GRAND TOTAL TRANSFERRED AMOUNT:",d+3,r+8),s.setFontSize(12),s.text(he(D),v-d-3,r+8,{align:"right"}),s.setTextColor(0,0,0);const O=s.internal.getNumberOfPages();for(let l=1;l<=O;l++)s.setPage(l),s.setFontSize(7),s.setFont("helvetica","normal"),s.setTextColor(128,128,128),s.text(`Internal Money Transfer Log | Period: ${A(c)} to ${A(C)} | Generated: ${A(new Date)}`,v/2,L-5,{align:"center"});new Date().toISOString().split("T")[0];const Q=A(c).replace(/\s/g,"_"),V=A(C).replace(/\s/g,"_");let U=`Internal_Transfer_Log_${Q}_to_${V}.pdf`;b!=="all"&&(U=`Internal_Transfer_Log_${b.replace(/\s/g,"_")}_${Q}_to_${V}.pdf`),s.save(U)},_s=()=>{const[c,C]=a.useState([]),[b,h]=a.useState(!1),[D,H]=a.useState(""),[s,v]=a.useState(""),[L,d]=a.useState(!1),[F,r]=a.useState(""),[k,Z]=a.useState(""),[p,G]=a.useState(""),[O,Q]=a.useState(""),[V,U]=a.useState(!1),[l,x]=a.useState(null),[ee,te]=a.useState(""),[xe,se]=a.useState(""),[Y,je]=a.useState(""),[fe,B]=a.useState(""),[ne,pe]=a.useState(""),[ge,Ce]=a.useState(new Date().toISOString().split("T")[0]),[Oe,be]=a.useState(""),[Ye,we]=a.useState(""),[Se,ae]=a.useState(!1),[We,re]=a.useState(""),[$e,He]=a.useState(!1),[ve,Ne]=a.useState([]),[ye,q]=a.useState(""),[Te,W]=a.useState(!1),[rt,Ge]=a.useState(!1),De=a.useRef(null),Fe=a.useRef(null),[ot,Qe]=a.useState(!1),[N,Ue]=a.useState(null),[Be,qe]=a.useState(!1),[lt,Je]=a.useState(!1),[m,_e]=a.useState("all"),[P,w]=a.useState(""),[I,S]=a.useState(""),[Xe,u]=a.useState(""),[Ke,Ze]=a.useState(!1);a.useEffect(()=>{Ae()},[F,k,p,O]),a.useEffect(()=>{Te&&ve.length===0&&Ve()},[Te]),a.useEffect(()=>{const t=n=>{De.current&&!De.current.contains(n.target)&&Fe.current&&!Fe.current.contains(n.target)&&W(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const g=(t,n)=>{H(t),v(n),d(!0),setTimeout(()=>d(!1),5e3)},Ve=async()=>{Ge(!0);try{const t=await ke("/api/projects");Ne(t||[])}catch(t){console.error("Error fetching projects:",t),Ne([]),g("Failed to load projects","warning")}finally{Ge(!1)}},Ae=async()=>{h(!0);try{const t=new URLSearchParams;F&&t.append("start_date",F),k&&t.append("end_date",k),p&&t.append("account",p),O&&t.append("project_id",O);const n=await ke(`/api/internal-money-transfers?${t.toString()}`);C(n||[])}catch(t){console.error("Error fetching transfers:",t),g("Failed to fetch internal money transfers","danger"),C([])}finally{h(!1)}};(()=>{const t={};return c.forEach(n=>{t[n.from_account]||(t[n.from_account]={account:n.from_account,total_out:0,total_in:0,net:0}),t[n.from_account].total_out+=parseFloat(n.amount),t[n.to_account]||(t[n.to_account]={account:n.to_account,total_out:0,total_in:0,net:0}),t[n.to_account].total_in+=parseFloat(n.amount)}),Object.values(t).forEach(n=>{n.net=n.total_in-n.total_out}),{summary:Object.values(t),total_transfers:c.length,total_amount:c.reduce((n,o)=>n+parseFloat(o.amount),0)}})();const et=(t=null)=>{var n,o;if(t){x(t),te(t.project_id||""),se(((n=t.project)==null?void 0:n.project_name)||""),q(((o=t.project)==null?void 0:o.project_name)||""),je(t.from_account),B(t.to_account),pe(t.amount.toString()),Ce(t.transfer_date.split("T")[0]),be(t.description||""),we(t.reference_number||"");const y=!$.some(E=>E.value===t.to_account);ae(y),y&&re(t.to_account)}else x(null),te(""),se(""),q(""),je(""),B(""),pe(""),Ce(new Date().toISOString().split("T")[0]),be(""),we(""),ae(!1),re("");U(!0),W(!1)},oe=()=>{U(!1),x(null),W(!1),Ne([])},ct=t=>{te(t.id),se(t.project_name),q(t.project_name),W(!1)},it=()=>{te(""),se(""),q(""),W(!1)},dt=()=>{W(!0),ve.length===0&&Ve()},mt=t=>{je(t),t===fe&&B("")},ut=t=>{t==="custom"?(ae(!0),B("")):(ae(!1),re(""),B(t))},ht=()=>Y?$.filter(t=>t.value!==Y):[],xt=async()=>{var o,y,E,ue;const t=Se?We:fe;if(!Y||!t||!ne||!ge){g("Please fill all required fields","danger");return}if(Y===t){g("From and To accounts must be different","danger");return}if(parseFloat(ne)<=0){g("Amount must be greater than 0","danger");return}He(!0);const n={project_id:ee||null,from_account:Y,to_account:t,amount:parseFloat(ne),transfer_date:ge,description:Oe||null,reference_number:Ye||null};try{l?(await Ft(`/api/internal-money-transfers/${l.id}`,n),g("Transfer updated successfully!","success")):(await _t("/api/internal-money-transfers",n),g("Transfer recorded successfully!","success")),oe(),Ae()}catch(Pe){console.error("Transfer error:",Pe);const Dt=((y=(o=Pe.response)==null?void 0:o.data)==null?void 0:y.error)||((ue=(E=Pe.response)==null?void 0:E.data)==null?void 0:ue.message)||"Failed to save transfer";g(Dt,"danger")}finally{He(!1)}},jt=t=>{Ue(t),Qe(!0)},le=()=>{Qe(!1),Ue(null)},ft=async()=>{var t,n,o,y;if(N){qe(!0);try{await At(`/api/internal-money-transfers/${N.id}`),g("Transfer deleted successfully!","success"),le(),Ae()}catch(E){console.error("Delete error:",E);const ue=((n=(t=E.response)==null?void 0:t.data)==null?void 0:n.error)||((y=(o=E.response)==null?void 0:o.data)==null?void 0:y.message)||"Failed to delete transfer";g(ue,"danger")}finally{qe(!1)}}},pt=()=>{_e("all"),w(""),S(""),u(""),Je(!0)},ce=()=>{Je(!1),_e("all"),w(""),S(""),u("")},gt=t=>{_e(t),w(""),S(""),u("")},Ct=async()=>{if(!P||!I){u("Please select both start and end dates");return}if(new Date(P)>new Date(I)){u("Start date cannot be after end date");return}u(""),Ze(!0);try{await Kt(P,I,m),g("PDF report downloaded successfully!","success"),ce()}catch(t){console.error("Download error:",t),u(t.message||"Failed to generate PDF report"),g("Failed to generate PDF report","danger")}finally{Ze(!1)}},ie=t=>{const n=new Date,o=new Date;o.setDate(o.getDate()-t),w(o.toISOString().split("T")[0]),S(n.toISOString().split("T")[0]),u("")},bt=()=>{const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),1),o=new Date(t.getFullYear(),t.getMonth()+1,0);w(n.toISOString().split("T")[0]),S(o.toISOString().split("T")[0]),u("")},wt=()=>{const t=new Date,n=new Date(t.getFullYear(),t.getMonth()-1,1),o=new Date(t.getFullYear(),t.getMonth(),0);w(n.toISOString().split("T")[0]),S(o.toISOString().split("T")[0]),u("")},St=()=>{const t=new Date,n=new Date(t.getFullYear(),0,1),o=new Date(t.getFullYear(),11,31);w(n.toISOString().split("T")[0]),S(o.toISOString().split("T")[0]),u("")},vt=()=>{const t=new Date,n=new Date(t.getFullYear()-1,0,1),o=new Date(t.getFullYear()-1,11,31);w(n.toISOString().split("T")[0]),S(o.toISOString().split("T")[0]),u("")},Nt=()=>{const t=new Date,n=Math.floor(t.getMonth()/3),o=new Date(t.getFullYear(),n*3,1),y=new Date(t.getFullYear(),n*3+3,0);w(o.toISOString().split("T")[0]),S(y.toISOString().split("T")[0]),u("")},yt=()=>{const t=new Date,n=new Date;n.setFullYear(n.getFullYear()-5),w(n.toISOString().split("T")[0]),S(t.toISOString().split("T")[0]),u("")},J=t=>{const n=$.find(o=>o.value===t);return n?n.label:t},tt=t=>`Rs${parseFloat(t||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,de=t=>new Date(t).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),Tt=()=>{const t=new Map;return c.forEach(n=>{n.project_id&&n.project&&t.set(n.project_id,n.project.project_name)}),Array.from(t.entries()).map(([n,o])=>({id:n,name:o}))},me=(ve||[]).filter(t=>((t==null?void 0:t.project_name)||"").toLowerCase().includes(ye.toLowerCase()));return e.jsx("div",{className:"container-fluid py-2",children:e.jsxs(It,{children:[e.jsxs(zt,{className:"bg-primary text-white d-flex justify-content-between align-items-center flex-column flex-md-row gap-2 pb-3 pt-3",children:[e.jsx("h5",{className:"mb-0",children:"Internal Money Transfer Management"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(i,{color:"success",size:"sm",onClick:()=>et(),children:[e.jsx(T,{icon:Mt,className:"me-1"}),"New Transfer"]}),e.jsxs(i,{color:"light",size:"sm",onClick:pt,children:[e.jsx(T,{icon:Rt,className:"me-1"}),"Download Report"]})]})]}),e.jsxs(Et,{children:[L&&e.jsx(st,{color:s,dismissible:!0,onClose:()=>d(!1),children:D}),e.jsxs(z,{className:"mb-4",children:[e.jsxs(j,{xs:12,md:3,children:[e.jsx(f,{children:"Start Date"}),e.jsx(_,{type:"date",value:F,onChange:t=>r(t.target.value)})]}),e.jsxs(j,{xs:12,md:3,children:[e.jsx(f,{children:"End Date"}),e.jsx(_,{type:"date",value:k,onChange:t=>Z(t.target.value)})]}),e.jsxs(j,{xs:12,md:2,children:[e.jsx(f,{children:"Filter by Account"}),e.jsxs(K,{value:p,onChange:t=>G(t.target.value),children:[e.jsx("option",{value:"",children:"All Accounts"}),$.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]}),e.jsxs(j,{xs:12,md:2,children:[e.jsx(f,{children:"Filter by Project"}),e.jsxs(K,{value:O,onChange:t=>Q(t.target.value),children:[e.jsx("option",{value:"",children:"All Projects"}),Tt().map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsx(j,{xs:12,md:2,className:"d-flex align-items-end",children:e.jsx(i,{color:"secondary",className:"w-100",onClick:()=>{r(""),Z(""),G(""),Q("")},children:"Clear Filters"})})]}),b?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(X,{}),e.jsx("p",{className:"mt-2",children:"Loading transfers..."})]}):c.length>0?e.jsx("div",{className:"table-responsive",children:e.jsxs(Lt,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(kt,{color:"primary",children:e.jsxs(nt,{children:[e.jsx(M,{children:"Date"}),e.jsx(M,{children:"Project"}),e.jsx(M,{children:"From Account"}),e.jsx(M,{children:"To Account"}),e.jsx(M,{children:"Amount"}),e.jsx(M,{children:"Reference Number"}),e.jsx(M,{children:"Description"}),e.jsx(M,{children:"Actions"})]})}),e.jsx(Ot,{children:c.map(t=>e.jsxs(nt,{children:[e.jsx(R,{children:de(t.transfer_date)}),e.jsx(R,{children:t.project?e.jsx(Ie,{color:"primary",children:t.project.project_name}):e.jsx("span",{className:"text-muted",children:"-"})}),e.jsx(R,{children:e.jsx(Ie,{color:"info",children:J(t.from_account)})}),e.jsx(R,{children:e.jsx(Ie,{color:"success",children:J(t.to_account)})}),e.jsx(R,{className:"fw-bold",children:tt(t.amount)}),e.jsx(R,{children:t.reference_number||"-"}),e.jsx(R,{children:t.description||"-"}),e.jsx(R,{children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(i,{color:"warning",size:"sm",onClick:()=>et(t),children:e.jsx(T,{icon:Yt})}),e.jsx(i,{color:"danger",size:"sm",onClick:()=>jt(t),children:e.jsx(T,{icon:Wt})})]})})]},t.id))})]})}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx(T,{icon:qt,size:"3xl",className:"text-muted mb-3"}),e.jsx("h5",{className:"text-muted",children:"No transfers found"}),e.jsx("p",{className:"text-muted",children:F||k||p||O?"Try adjusting your filters":'Click "New Transfer" to record your first transfer'})]}),e.jsxs(Ee,{visible:V,onClose:oe,backdrop:"static",size:"lg",scrollable:!0,children:[e.jsx(ze,{onClose:oe,children:e.jsx(Me,{children:l?"Edit Transfer":"New Transfer"})}),e.jsxs(Re,{children:[e.jsx(z,{children:e.jsx(j,{xs:12,children:e.jsxs("div",{className:"mb-3",style:{position:"relative"},children:[e.jsx(f,{children:"Project"}),e.jsxs($t,{children:[e.jsx(Ht,{children:e.jsx(T,{icon:Gt})}),e.jsx(_,{ref:Fe,type:"text",value:ye,onChange:t=>q(t.target.value),onFocus:dt,placeholder:"Click to select or search projects...",autoComplete:"off"}),xe&&e.jsx(i,{type:"button",color:"danger",variant:"outline",onClick:it,children:e.jsx(T,{icon:at})})]}),Te&&e.jsx("div",{ref:De,className:"border rounded bg-white mt-1 shadow",style:{maxHeight:"300px",overflowY:"auto",position:"absolute",zIndex:1050,width:"100%",top:"100%"},children:rt?e.jsxs("div",{className:"p-3 text-center",children:[e.jsx(X,{size:"sm",className:"me-2"}),e.jsx("span",{children:"Loading projects..."})]}):me.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-2 bg-light border-bottom sticky-top",children:e.jsxs("small",{className:"text-muted fw-bold",children:[me.length," project",me.length!==1?"s":""," found"]})}),me.map(t=>e.jsxs("div",{className:"p-3 border-bottom cursor-pointer",style:{cursor:"pointer"},onClick:()=>ct(t),onMouseEnter:n=>n.currentTarget.style.backgroundColor="#f8f9fa",onMouseLeave:n=>n.currentTarget.style.backgroundColor="white",children:[e.jsx("div",{className:"fw-medium text-primary",children:t.project_name}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-1",children:[t.project_cost&&e.jsxs("small",{className:"text-muted",children:["Cost: â‚¹",parseFloat(t.project_cost).toLocaleString("en-IN")]}),t.client_name&&e.jsxs("small",{className:"text-muted",children:["Client: ",t.client_name]})]})]},t.id))]}):e.jsx("div",{className:"p-3 text-center text-muted",children:ye?"No projects found matching your search":"No projects available"})}),xe&&e.jsxs("div",{className:"mt-2 p-2 bg-light border rounded",children:[e.jsx("small",{className:"text-success fw-bold",children:"âœ“ Selected Project:"}),e.jsx("div",{className:"fw-medium",children:xe})]})]})})}),e.jsxs(z,{children:[e.jsx(j,{xs:12,md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsxs(f,{children:["From Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(K,{value:Y,onChange:t=>mt(t.target.value),children:[e.jsx("option",{value:"",children:"Select Account"}),$.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]})}),e.jsx(j,{xs:12,md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsxs(f,{children:["To Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(K,{value:Se?"custom":fe,onChange:t=>ut(t.target.value),disabled:!Y,children:[e.jsx("option",{value:"",children:"Select Account"}),ht().map(t=>e.jsx("option",{value:t.value,children:t.label},t.value)),e.jsx("option",{value:"custom",children:"Custom Account"})]})]})})]}),Se&&e.jsx(z,{children:e.jsx(j,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsxs(f,{children:["Custom Account Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{type:"text",value:We,onChange:t=>re(t.target.value),placeholder:"Enter custom account name"})]})})}),e.jsxs(z,{children:[e.jsx(j,{xs:12,md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsxs(f,{children:["Amount ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{type:"number",value:ne,onChange:t=>pe(t.target.value),placeholder:"Enter amount",step:"0.01",min:"0.01"})]})}),e.jsx(j,{xs:12,md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsxs(f,{children:["Transfer Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{type:"date",value:ge,onChange:t=>Ce(t.target.value)})]})})]}),e.jsx(z,{children:e.jsx(j,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(f,{children:"Reference Number"}),e.jsx(_,{type:"text",value:Ye,onChange:t=>we(t.target.value),placeholder:"Enter reference/transaction number"})]})})}),e.jsx(z,{children:e.jsx(j,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(f,{children:"Description"}),e.jsx(Qt,{rows:"3",value:Oe,onChange:t=>be(t.target.value),placeholder:"Enter transfer description (optional)"})]})})})]}),e.jsxs(Le,{className:"d-flex justify-content-between",children:[e.jsx(i,{color:"secondary",onClick:oe,children:"Cancel"}),e.jsx(i,{color:"primary",disabled:$e,onClick:xt,children:$e?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:"sm",className:"me-2"}),"Saving..."]}):l?"Update Transfer":"Record Transfer"})]})]}),e.jsxs(Ee,{visible:lt,onClose:ce,backdrop:"static",size:"lg",scrollable:!0,children:[e.jsx(ze,{onClose:ce,children:e.jsxs(Me,{children:[e.jsx(T,{icon:Ut,className:"me-2"}),"Select Date Range for Transfer Report"]})}),e.jsxs(Re,{children:[Xe&&e.jsx(st,{color:"danger",dismissible:!0,onClose:()=>u(""),children:Xe}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(f,{className:"fw-bold",children:["Select Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(K,{value:m,onChange:t=>gt(t.target.value),children:[e.jsx("option",{value:"all",children:"All Accounts"}),$.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"mb-3",children:"ðŸ“… Custom Date Range"}),e.jsxs(z,{children:[e.jsxs(j,{xs:12,md:6,className:"mb-3 mb-md-0",children:[e.jsxs(f,{htmlFor:"downloadStartDate",className:"fw-bold",children:["Start Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{type:"date",id:"downloadStartDate",value:P,onChange:t=>{w(t.target.value),u("")},max:I||void 0,disabled:m===""})]}),e.jsxs(j,{xs:12,md:6,children:[e.jsxs(f,{htmlFor:"downloadEndDate",className:"fw-bold",children:["End Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{type:"date",id:"downloadEndDate",value:I,onChange:t=>{S(t.target.value),u("")},min:P||void 0,disabled:m===""})]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"mb-3",children:"âš¡ Quick Select:"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted d-block mb-2 fw-bold",children:"Days:"}),e.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[e.jsx(i,{size:"sm",color:"secondary",variant:"outline",onClick:()=>ie(7),disabled:m==="",children:"Last 7 Days"}),e.jsx(i,{size:"sm",color:"secondary",variant:"outline",onClick:()=>ie(15),disabled:m==="",children:"Last 15 Days"}),e.jsx(i,{size:"sm",color:"secondary",variant:"outline",onClick:()=>ie(30),disabled:m==="",children:"Last 30 Days"}),e.jsx(i,{size:"sm",color:"secondary",variant:"outline",onClick:()=>ie(90),disabled:m==="",children:"Last 90 Days"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted d-block mb-2 fw-bold",children:"Months:"}),e.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[e.jsx(i,{size:"sm",color:"info",variant:"outline",onClick:bt,disabled:m==="",children:"Current Month"}),e.jsx(i,{size:"sm",color:"info",variant:"outline",onClick:wt,disabled:m==="",children:"Last Month"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted d-block mb-2 fw-bold",children:"Quarters & Years:"}),e.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[e.jsx(i,{size:"sm",color:"warning",variant:"outline",onClick:Nt,disabled:m==="",children:"Current Quarter"}),e.jsx(i,{size:"sm",color:"warning",variant:"outline",onClick:St,disabled:m==="",children:"Current Year"}),e.jsx(i,{size:"sm",color:"warning",variant:"outline",onClick:vt,disabled:m==="",children:"Last Year"})]})]}),e.jsxs("div",{children:[e.jsx("small",{className:"text-muted d-block mb-2 fw-bold",children:"All Time:"}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:e.jsx(i,{size:"sm",color:"dark",variant:"outline",onClick:yt,disabled:m==="",children:"All Time (Last 5 Years)"})})]})]}),P&&I&&e.jsxs("div",{className:"alert alert-success mb-0",children:[e.jsx("strong",{children:"âœ“ Selected Range:"})," ",de(P)," to ",de(I),m!=="all"&&e.jsxs("div",{className:"mt-1",children:[e.jsx("strong",{children:"Account:"})," ",J(m)]})]})]}),e.jsxs(Le,{className:"d-flex justify-content-between",children:[e.jsxs(i,{color:"secondary",onClick:ce,children:[e.jsx(T,{icon:at,className:"me-1"}),"Cancel"]}),e.jsx(i,{color:"success",onClick:Ct,disabled:Ke||!P||!I||m==="",children:Ke?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:"sm",className:"me-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{icon:Bt,className:"me-1"}),"Download Transfer Report"]})})]})]}),e.jsxs(Ee,{visible:ot,onClose:le,backdrop:"static",children:[e.jsx(ze,{onClose:le,children:e.jsx(Me,{children:"Confirm Delete"})}),e.jsx(Re,{children:N&&e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"Are you sure you want to delete this transfer?"})}),e.jsxs("div",{className:"p-3 bg-light rounded",children:[e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Date:"})," ",de(N.transfer_date)]}),N.project&&e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Project:"})," ",N.project.project_name]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"From:"})," ",J(N.from_account)]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"To:"})," ",J(N.to_account)]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Amount:"})," ",tt(N.amount)]}),e.jsxs("p",{className:"mb-0",children:[e.jsx("strong",{children:"Reference:"})," ",N.reference_number||"N/A"]})]}),e.jsx("div",{className:"alert alert-warning mt-3 mb-0",children:e.jsxs("small",{children:[e.jsx("strong",{children:"Warning:"})," This action cannot be undone."]})})]})}),e.jsxs(Le,{className:"d-flex justify-content-between",children:[e.jsx(i,{color:"secondary",onClick:le,children:"Cancel"}),e.jsx(i,{color:"danger",disabled:Be,onClick:ft,children:Be?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:"sm",className:"me-2"}),"Deleting..."]}):"Delete Transfer"})]})]})]})]})})};export{_s as default};
