import{r,a as k,u as v,j as e}from"./index-95D3pMM8.js";import{p as P}from"./api-CIBCEetx.js";const C=()=>{const[n,f]=r.useState(""),[c,x]=r.useState(""),[i,o]=r.useState(""),[u,p]=r.useState(!1),[a,w]=r.useState(!1),[h]=k(),d=v(),l=h.get("token");r.useEffect(()=>{l||(o("Invalid or missing token. Redirecting..."),setTimeout(()=>d("/error"),3e3))},[l,d]);const m=async t=>{if(t.preventDefault(),n!==c){o("Passwords do not match.");return}p(!0),o("");try{const b=await P("/api/newPassword",{token:l,newPassword:n});if(b.message==="Password updated successfully")o("Password updated successfully!"),window.alert("Password updated successfully!"),d("/login");else{const s=await b.json();switch(s.status){case"invalid_token":o(s.message||"Invalid or expired token."),window.alert(s.message||"Invalid or expired token.");break;case"user_not_found":o(s.message||"User not found."),window.alert(s.message||"User not found.");break;case"validation_failed":o(s.message||"Validation failed. Please check your input."),window.alert(s.message||"Validation failed. Please check your input.");break;case"update_failed":case"processing_error":o(s.message||"An error occurred while processing your request."),window.alert(s.message||"An error occurred while processing your request.");break;default:o(s.message||"An unknown error occurred. Please try again later."),window.alert(s.message||"An unknown error occurred. Please try again later.");break}}}catch{o("Invalid or expired token.")}finally{p(!1)}},g=()=>{w(!a)};return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#f8f9fa",padding:"20px"},children:e.jsxs("div",{style:{width:"100%",maxWidth:"400px",backgroundColor:"#fff",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",borderRadius:"10px",padding:"20px"},children:[e.jsx("h2",{style:{textAlign:"center",marginBottom:"20px",color:"#333",fontFamily:"Arial, sans-serif"},children:"Reset Password"}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold",color:"#555"},children:"New Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:a?"text":"password",value:n,onChange:t=>f(t.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"5px",border:"1px solid #ccc",boxSizing:"border-box"}}),e.jsx("button",{type:"button",onClick:g,style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#007bff",fontWeight:"bold"},children:a?"Hide":"Show"})]})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold",color:"#555"},children:"Confirm Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:a?"text":"password",value:c,onChange:t=>x(t.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"5px",border:"1px solid #ccc",boxSizing:"border-box"}}),e.jsx("button",{type:"button",onClick:g,style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#007bff",fontWeight:"bold"},children:a?"Hide":"Show"})]})]}),e.jsx("button",{type:"submit",style:{width:"100%",padding:"10px",border:"none",borderRadius:"5px",backgroundColor:"#007bff",color:"#fff",fontWeight:"bold",cursor:"pointer",fontSize:"16px",transition:"background-color 0.3s"},disabled:u,onMouseEnter:t=>t.target.style.backgroundColor="#0056b3",onMouseLeave:t=>t.target.style.backgroundColor="#007bff",children:u?"Updating...":"Reset Password"})]}),i&&e.jsx("p",{style:{marginTop:"15px",color:i.includes("successfully")?"#28a745":"#dc3545",textAlign:"center"},children:i})]})})};export{C as default};
