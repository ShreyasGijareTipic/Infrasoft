import{r as x,b as _,u as y,j as e}from"./index-BjGmA7Bo.js";import{p as b}from"./api-CIBCEetx.js";import{u as v}from"./DefaultLayout-B3RBETEZ.js";import{a as L,b as S}from"./index.esm-Dt7Qe3Av.js";import{C as E,a as w}from"./CCardBody-C0Yq84MQ.js";import{C as N}from"./CCardHeader-AnyY50zi.js";import{C as B}from"./CForm-vzVfQCWh.js";import{C as c}from"./CFormLabel-B_oLSbD9.js";import{C as h}from"./CFormInput-DF8ie22K.js";import{C as k}from"./CFormSelect-CFPHA-xf.js";import{C as F}from"./CFormTextarea-mg6q-B3W.js";import{C as A}from"./CFormCheck-Cjogn_rm.js";import{C as u}from"./CButton-CC7WAWlS.js";import"./RawMaterial-BtjEDAbB.js";import"./cil-mobile-D36DLDwv.js";import"./CFormControlWrapper-BkxhhPL_.js";const W=()=>{const[C,m]=x.useState(!1),{showToast:i}=_(),{t:a}=v("global"),j=y(),[s,d]=x.useState({name:"",slug:"",localName:"",expense_category:"",desc:"",show:!0}),l=r=>{const{name:n,value:t}=r.target;d({...s,[n]:t})},g=r=>{const{name:n,checked:t}=r.target;d({...s,[n]:t})},f=async r=>{const n=r.currentTarget;if(r.preventDefault(),r.stopPropagation(),m(!0),n.checkValidity()!==!0)return;let t={...s};t.slug=t.name.replace(/[^\w]/g,"_");try{const o=await b("/api/expenseType",t);o!=null&&o.id?(i("success",a("MSG.expense_type_added_successfully_msg")),j("/expense/new")):i("danger",a("MSG.failed_to_add_expense_type_msg")),p()}catch(o){i("danger","Error occured "+o)}},p=async()=>{d({name:"",slug:"",expense_category:"",localName:"",desc:"",show:!0}),m(!1)};return e.jsx(L,{children:e.jsx(S,{xs:12,children:e.jsxs(E,{className:"mb-4",children:[e.jsx(N,{children:e.jsx("strong",{children:a("LABELS.create_new_expense_type")})}),e.jsx(w,{children:e.jsxs(B,{noValidate:!0,validated:C,onSubmit:f,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"pname",children:e.jsx("b",{children:a("LABELS.expense_type_name")})}),e.jsx(h,{type:"text",id:"pname",placeholder:"",name:"name",value:s.name,onChange:l,required:!0,feedbackInvalid:"Please provide name."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"pname",children:e.jsx("b",{children:a("LABELS.expense_type_local_name")})}),e.jsx(h,{type:"text",id:"plname",placeholder:"",name:"localName",value:s.localName,onChange:l,required:!0,feedbackInvalid:"Please provide local name."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"expense_category",children:e.jsx("b",{children:a("LABELS.expense_category")})}),e.jsxs(k,{id:"expense_category",name:"expense_category",value:s.expense_category,onChange:l,required:!0,feedbackInvalid:"Please select an expense category.",children:[e.jsx("option",{value:"",children:"-- Select Category --"}),e.jsx("option",{value:"Operational Expense",children:"Operational Expense"}),e.jsx("option",{value:"Capital Expense",children:"Capital Expense"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"desc",children:e.jsx("b",{children:a("LABELS.short_description")})}),e.jsx(F,{id:"desc",rows:3,name:"desc",value:s.desc,onChange:l,required:!0,feedbackInvalid:"Please provide description."})]}),e.jsx("div",{className:"mb-3",children:e.jsx(A,{id:"flexCheckDefault",label:a("LABELS.show_for_expense_records"),name:"show",checked:s.show,onChange:g})}),e.jsxs("div",{className:"mb-3",children:[e.jsx(u,{color:"success",type:"submit",children:a("LABELS.submit")}),"Â ",e.jsx(u,{color:"secondary",onClick:p,children:a("LABELS.clear")})]})]})})]})})})};export{W as default};
