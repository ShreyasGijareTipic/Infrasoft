import{r as l,j as o}from"./index-2dn3aAPo.js";import{c as y}from"./api-CIBCEetx.js";import{a as v,b as S}from"./index.esm-BqU7uZM5.js";import{C as j}from"./CButton-BUp8JCLl.js";const k="sample_products_template.csv",I=()=>{const[n,p]=l.useState(null),[u,a]=l.useState(""),[h,s]=l.useState(!1),[d,m]=l.useState(!1),c=l.useRef(null),C=e=>{p(e.target.files[0])},b=async()=>{var f,g,x;if(!n){a("Please select a CSV file to upload."),s(!0);return}if(n.type!=="text/csv"&&!n.name.endsWith(".csv")){a("Invalid file type. Please upload a valid CSV file."),s(!0);return}const e=new FormData;e.append("csv_file",n);try{m(!0);const t=await y("/api/uploadProducts",e,{headers:{"Content-Type":"multipart/form-data"}});console.log("Response from backend:",t);const i=((f=t==null?void 0:t.data)==null?void 0:f.message)||(t==null?void 0:t.message);i?(a(i),s(!1),p(null),c.current&&(c.current.value=null)):(a("Upload failed Check CSV format."),s(!0))}catch(t){console.error("Upload error:",t);const i=((x=(g=t.response)==null?void 0:g.data)==null?void 0:x.error)||"Upload failed Check CSV format.";a(i),s(!0)}finally{m(!1)}};return o.jsxs("div",{style:r.container,children:[o.jsx("h2",{style:r.heading,children:"Upload Product CSV"}),o.jsx(v,{className:"mb-3 align-items-center",children:o.jsxs(S,{xs:"auto",className:"d-flex align-items-center",children:[o.jsx("strong",{className:"me-1",style:{marginLeft:"10px"},children:"Sample CSV template for products"}),o.jsx(j,{color:"success",variant:"outline",title:"Download Sample Template",style:{padding:"6px 10px"},onClick:()=>{const e=document.createElement("a");e.href=k,e.download="SampleProductTemplate.csv",document.body.appendChild(e),e.click(),document.body.removeChild(e)},children:"ðŸ“¥"})]})}),o.jsx("input",{ref:c,type:"file",accept:".csv",onChange:C,style:r.fileInput}),o.jsx("button",{onClick:b,style:{...r.uploadButton,backgroundColor:d?"#6c757d":"#007bff",cursor:d?"not-allowed":"pointer"},disabled:d,children:d?"Uploading...":"Upload"}),u&&o.jsx("p",{style:{...r.message,color:h?"red":"green"},children:u})]})},r={container:{padding:30,maxWidth:500,margin:"50px auto",border:"1px solid #ccc",borderRadius:12,boxShadow:"0 4px 12px rgba(0,0,0,0.1)",backgroundColor:"#f9f9f9",fontFamily:"Arial, sans-serif"},heading:{marginBottom:20,color:"#333",textAlign:"center"},fileInput:{display:"block",width:"100%",padding:"10px",marginBottom:15,borderRadius:6,border:"1px solid #ccc",backgroundColor:"#fff"},uploadButton:{padding:"10px 20px",color:"#fff",border:"none",borderRadius:6,width:"100%",fontWeight:"bold"},message:{marginTop:15,textAlign:"center",fontWeight:"bold"}};export{I as default};
