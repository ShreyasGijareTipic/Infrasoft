import{d as g,r as l,b,u as y,j as e}from"./index-fatTeUCR.js";import{a as v,b as E}from"./api-CIBCEetx.js";import{a as N,b as w}from"./index.esm-Mmat67Is.js";import{C as T,a as k}from"./CCardBody-CWs2rFEf.js";import{C as F}from"./CCardHeader-DIjx7CZA.js";import{C as S}from"./CForm-BbEA8t0A.js";import{C as i}from"./CFormLabel-Cp8KupB2.js";import{C as m}from"./CFormInput-wID138bU.js";import{C as P}from"./CFormTextarea-cNlJlc5V.js";import{C as I}from"./CFormCheck-BvOdjD5Q.js";import{C as D}from"./CButton-Dnh0eu3x.js";import"./CFormControlWrapper-BGWL0obt.js";const K=()=>{const p=g(),[h,u]=l.useState(!1),{showToast:n}=b(),x=y(),[r,c]=l.useState({id:0,name:"",slug:"",localName:"",show:!0,desc:""}),d=a=>{const{name:t,value:s}=a.target;c({...r,[t]:s})},C=a=>{const{name:t,checked:s}=a.target;c({...r,[t]:s})},f=async()=>{try{const a=await v("/api/expenseType/"+p.id);c({id:a.id,name:a.name,localName:a.localName,slug:a.slug,show:a.show==1,desc:a.desc})}catch(a){n("danger","Error occured "+a)}};l.useEffect(()=>{f()},[]);const j=async a=>{const t=a.currentTarget;if(a.preventDefault(),a.stopPropagation(),u(!0),t.checkValidity()!==!0)return;let s={...r};s.slug=s.name.replace(/[^\w]/g,"_");try{const o=await E("/api/expenseType/"+s.id,s);o!=null&&o.id?(n("success","ExpenseType updated successfully"),x("/expense/all-type")):n("danger","Error occured, please try again later.")}catch(o){n("danger","Error occured "+o)}};return e.jsx(N,{children:e.jsx(w,{xs:12,children:e.jsxs(T,{className:"mb-4",children:[e.jsx(F,{children:e.jsx("strong",{children:e.jsx("b",{children:"Edit ExpenseType"})})}),e.jsx(k,{children:e.jsxs(S,{noValidate:!0,validated:h,onSubmit:j,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{htmlFor:"pname",children:e.jsx("b",{children:"ExpenseType Name"})}),e.jsx(m,{type:"text",id:"pname",placeholder:"Expense Name",name:"name",value:r.name,onChange:d,required:!0,feedbackInvalid:"Please provide name."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{htmlFor:"pname",children:e.jsx("b",{children:"ExpenseType Local Name"})}),e.jsx(m,{type:"text",id:"plname",placeholder:"Expense Name",name:"localName",value:r.localName,onChange:d,required:!0,feedbackInvalid:"Please provide local name."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(i,{htmlFor:"desc",children:e.jsx("b",{children:"Short Description"})}),e.jsx(P,{id:"desc",rows:3,name:"desc",value:r.desc,onChange:d,required:!0,feedbackInvalid:"Please provide description."})]}),e.jsx("div",{className:"mb-3",children:e.jsx(I,{id:"flexCheckDefault",label:"Show for expense records",name:"show",checked:r.show,onChange:C})}),e.jsx("div",{className:"mb-3",children:e.jsx(D,{color:"success",type:"submit",children:"Update"})})]})})]})})})};export{K as default};
